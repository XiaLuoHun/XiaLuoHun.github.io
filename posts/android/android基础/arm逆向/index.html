<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Arm逆向   夏洛魂的个人博客</title><meta name="author" content="夏洛魂">
<meta name="author-link" content="">
<meta name="description" content="这部分内容跟x86很大程度上都是一样的. 加法 源代码: 1 2 3 4 5 6 7 8 9 10 int main(int argc, char** argv){ 15 &#43; 20; int n1 = 0; int n2 = 0; n1 = n1 &#43; 1; n1 = 1 &#43; 2; n1 = n1 &#43; n2; printf(&#34;n1 = %d\n&#34;," /><meta name="keywords" content='Android' />
  <meta itemprop="name" content="Arm逆向">
  <meta itemprop="description" content="这部分内容跟x86很大程度上都是一样的. 加法 源代码: 1 2 3 4 5 6 7 8 9 10 int main(int argc, char** argv){ 15 &#43; 20; int n1 = 0; int n2 = 0; n1 = n1 &#43; 1; n1 = 1 &#43; 2; n1 = n1 &#43; n2; printf(&#34;n1 = %d\n&#34;,">
  <meta itemprop="datePublished" content="2021-09-12T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-09-12T00:00:00+00:00">
  <meta itemprop="wordCount" content="8886">
  <meta itemprop="image" content="https://XiaLuoHun.top/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/dowhile.png">
  <meta itemprop="keywords" content="Android"><meta property="og:url" content="https://XiaLuoHun.top/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/">
  <meta property="og:site_name" content="夏洛魂的个人博客">
  <meta property="og:title" content="Arm逆向">
  <meta property="og:description" content="这部分内容跟x86很大程度上都是一样的. 加法 源代码: 1 2 3 4 5 6 7 8 9 10 int main(int argc, char** argv){ 15 &#43; 20; int n1 = 0; int n2 = 0; n1 = n1 &#43; 1; n1 = 1 &#43; 2; n1 = n1 &#43; n2; printf(&#34;n1 = %d\n&#34;,">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-09-12T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-09-12T00:00:00+00:00">
    <meta property="article:tag" content="Android">
    <meta property="og:image" content="https://XiaLuoHun.top/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/dowhile.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://XiaLuoHun.top/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/dowhile.png">
  <meta name="twitter:title" content="Arm逆向">
  <meta name="twitter:description" content="这部分内容跟x86很大程度上都是一样的. 加法 源代码: 1 2 3 4 5 6 7 8 9 10 int main(int argc, char** argv){ 15 &#43; 20; int n1 = 0; int n2 = 0; n1 = n1 &#43; 1; n1 = 1 &#43; 2; n1 = n1 &#43; n2; printf(&#34;n1 = %d\n&#34;,">
<meta name="application-name" content="夏洛魂">
<meta name="apple-mobile-web-app-title" content="夏洛魂"><meta name="theme-color" data-light="#ffffff" data-dark="#ffffff" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://XiaLuoHun.top/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/" /><link rel="prev" href="https://XiaLuoHun.top/posts/android/android%E5%9F%BA%E7%A1%80/smali/" /><link rel="next" href="https://XiaLuoHun.top/posts/android/android%E5%9F%BA%E7%A1%80/dex/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Arm逆向",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/XiaLuoHun.top\/posts\/android\/android%E5%9F%BA%E7%A1%80\/arm%E9%80%86%E5%90%91\/"
    },"image": [{
              "@type": "ImageObject",
              "url": "https:\/\/XiaLuoHun.top\/posts\/android\/android%E5%9F%BA%E7%A1%80\/arm%E9%80%86%E5%90%91\/images\/Arm%E9%80%86%E5%90%91\/dowhile.png",
              "width":  1321 ,
              "height":  1004 
            }],"genre": "posts","keywords": "Android","wordcount":  8886 ,
    "url": "https:\/\/XiaLuoHun.top\/posts\/android\/android%E5%9F%BA%E7%A1%80\/arm%E9%80%86%E5%90%91\/","datePublished": "2021-09-12T00:00:00+00:00","dateModified": "2021-09-12T00:00:00+00:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "夏洛魂"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="夏洛魂的个人博客"><span class="header-title-text">夏洛魂</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              >文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              >标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              >分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/excalidraw/"
                
                
              >在线绘图</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/about/"
                
                
              >关于作者</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="输入关键词搜索" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="夏洛魂的个人博客"><span class="header-title-text">夏洛魂</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="输入关键词搜索" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                >文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                >标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                >分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/excalidraw/"
                  
                  
                >在线绘图</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/about/"
                  
                  
                >关于作者</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>Arm逆向</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><img loading="lazy" src="/images/Luo.png" alt="夏洛魂" data-title="夏洛魂" width="20" height="20" class="avatar" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/>&nbsp;夏洛魂</span></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/android%E5%9F%BA%E7%A1%80/" class="post-category" title="分类 - Android基础"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Android基础</a></span></div><div class="post-meta-line"><span title="发布于 2021-09-12 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2021-09-12">2021-09-12</time></span>&nbsp;<span title="8886 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 8900 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 18 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#加法">加法</a></li>
            <li><a href="#减法">减法</a></li>
            <li><a href="#乘法">乘法</a></li>
            <li><a href="#除法">除法</a>
              <ul>
                <li><a href="#无符号">无符号</a>
                  <ul>
                    <li><a href="#除数为2的幂常量">除数为2的幂(常量)</a></li>
                    <li><a href="#除数为非2的幂常量">除数为非2的幂(常量)</a>
                      <ul>
                        <li><a href="#magicnumber无进位">MagicNumber无进位</a></li>
                        <li><a href="#magicnumber有进位">MagicNumber有进位</a></li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li><a href="#有符号">有符号</a>
                  <ul>
                    <li><a href="#除数为正2的幂">除数为正2的幂</a></li>
                    <li><a href="#除数为正非2的幂">除数为正非2的幂</a>
                      <ul>
                        <li><a href="#magicnumber为正">MagicNumber为正</a></li>
                        <li><a href="#magicnumber为负">MagicNumber为负</a></li>
                      </ul>
                    </li>
                    <li><a href="#除数为负2的幂">除数为负2的幂</a></li>
                    <li><a href="#除数为负非2的幂">除数为负非2的幂</a>
                      <ul>
                        <li><a href="#magicnumber为正-1">MagicNumber为正</a></li>
                        <li><a href="#magicnumber为负-1">MagicNumber为负</a></li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#取模">取模</a>
              <ul>
                <li><a href="#无符号-1">无符号</a>
                  <ul>
                    <li><a href="#除数为2的幂">除数为2的幂</a></li>
                    <li><a href="#除数为非2的幂">除数为非2的幂</a></li>
                  </ul>
                </li>
                <li><a href="#有符号-1">有符号</a>
                  <ul>
                    <li><a href="#除数为2的幂-1">除数为2的幂</a></li>
                    <li><a href="#除数为非2的幂-1">除数为非2的幂</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#分支">分支</a>
              <ul>
                <li><a href="#if">if</a></li>
                <li><a href="#while">while</a></li>
                <li><a href="#do-while">do-while</a></li>
                <li><a href="#switch-case">Switch-case</a></li>
              </ul>
            </li>
            <li><a href="#函数">函数</a>
              <ul>
                <li><a href="#整型传参">整型传参</a></li>
                <li><a href="#浮点传参">浮点传参</a></li>
                <li><a href="#混合传参">混合传参</a></li>
                <li><a href="#注意的小细节">注意的小细节</a></li>
              </ul>
            </li>
            <li><a href="#变量">变量</a>
              <ul>
                <li><a href="#全局变量">全局变量</a></li>
                <li><a href="#静态局部变量">静态局部变量</a></li>
              </ul>
            </li>
            <li><a href="#数组">数组</a>
              <ul>
                <li><a href="#一维数组">一维数组</a></li>
                <li><a href="#二维数组">二维数组</a></li>
              </ul>
            </li>
            <li><a href="#类">类</a>
              <ul>
                <li><a href="#this指针">this指针</a></li>
                <li><a href="#对象作为参数">对象作为参数</a></li>
                <li><a href="#返回对象">返回对象</a></li>
                <li><a href="#构造函数">构造函数</a></li>
                <li><a href="#虚析构">虚析构</a></li>
                <li><a href="#单重继承">单重继承</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><p>这部分内容跟x86很大程度上都是一样的.</p>
<h3 id="加法" class="heading-element"><span>加法</span>
  <a href="#%e5%8a%a0%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="mi">15</span> <span class="o">+</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">n1</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">n1</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">n1</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;n1 = %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">n1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">argc</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aN1D</span> <span class="p">-</span> <span class="mi">0x2A0C</span><span class="p">)</span> <span class="c1">; &#34;n1 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">MOVS</span>            <span class="no">argv</span><span class="p">,</span> <span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;n1 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">argc</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aN1D</span> <span class="p">-</span> <span class="mi">0x2A0C</span><span class="p">)</span> <span class="c1">; &#34;n1 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">MOVS</span>            <span class="no">argv</span><span class="p">,</span> <span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;n1 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="减法" class="heading-element"><span>减法</span>
  <a href="#%e5%87%8f%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">argc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">n1</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">n1</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">n2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;n1 = %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">n1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029EC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span> <span class="no">var_10</span>          <span class="err">=</span> <span class="p">-</span><span class="mi">0x10</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span> <span class="no">var_C</span>           <span class="err">=</span> <span class="p">-</span><span class="mi">0xC</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A30</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R4</span><span class="p">,</span><span class="no">R5</span><span class="p">,</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A32</span>                 <span class="no">ADD</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span><span class="p">,</span> <span class="c1">#8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A34</span>                 <span class="no">SUB</span>             <span class="no">SP</span><span class="p">,</span> <span class="no">SP</span><span class="p">,</span> <span class="c1">#8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A36</span>                 <span class="no">MOV</span>             <span class="no">R4</span><span class="p">,</span> <span class="no">argc</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A38</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R4</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A38</span>                 <span class="no">LDR</span>             <span class="no">R0</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">__stack_chk_guard_ptr</span> <span class="p">-</span> <span class="mi">0x2A3E</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A3A</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; __stack_chk_guard_ptr
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A3C</span>                 <span class="no">LDR</span>             <span class="no">R5</span><span class="p">,</span> <span class="p">[</span><span class="no">R0</span><span class="p">]</span> <span class="c1">; __stack_chk_guard
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A3E</span>                 <span class="no">LDR</span>             <span class="no">argv</span><span class="p">,</span> <span class="p">[</span><span class="no">R5</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A40</span>                 <span class="no">LDR</span>             <span class="no">R0</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aD</span> <span class="p">-</span> <span class="mi">0x2A4A</span><span class="p">)</span> <span class="c1">; &#34;%d&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A42</span>                 <span class="no">STR</span>             <span class="no">R1</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#0x10+var_C]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A44</span> <span class="no">n1</span> <span class="err">=</span> <span class="no">R4</span>                                 <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A44</span>                 <span class="no">MOVS</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A46</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;%d&#34; ; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A48</span>                 <span class="no">STR</span>             <span class="no">R1</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#0x10+var_10]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A4A</span>                 <span class="no">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A4C</span>                 <span class="no">BLX</span>             <span class="no">scanf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A50</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R4</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A50</span>                 <span class="no">LDR</span>             <span class="no">R1</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#0x10+var_10]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A52</span> <span class="no">n2</span> <span class="err">=</span> <span class="no">R1</span>                                 <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A52</span>                 <span class="no">LDR</span>             <span class="no">R0</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aN1D</span> <span class="p">-</span> <span class="mi">0x2A5A</span><span class="p">)</span> <span class="c1">; &#34;n1 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A54</span>                 <span class="no">SUBS</span>            <span class="no">n2</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">n2</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A56</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;n1 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A58</span>                 <span class="no">SUBS</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x5F ; &#39;_&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A5A</span> <span class="no">n1</span> <span class="err">=</span> <span class="no">R1</span>                                 <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A5A</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A5E</span>                 <span class="no">LDR</span>             <span class="no">R0</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#0x10+var_C]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A60</span>                 <span class="no">LDR</span>             <span class="no">R1</span><span class="p">,</span> <span class="p">[</span><span class="no">R5</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A62</span>                 <span class="no">SUBS</span>            <span class="no">R0</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A64</span>                 <span class="no">ITTT</span> <span class="no">EQ</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A66</span>                 <span class="no">MOVEQ</span>           <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A68</span>                 <span class="no">ADDEQ</span>           <span class="no">SP</span><span class="p">,</span> <span class="no">SP</span><span class="p">,</span> <span class="c1">#8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A6A</span>                 <span class="no">POPEQ</span>           <span class="err">{</span><span class="no">argc</span><span class="p">,</span><span class="no">R5</span><span class="p">,</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A6C</span>                 <span class="no">BLX</span>             <span class="no">__stack_chk_fail</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A6C</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><p>上述中的ITTT EQ指令中有3个T,表示接下来的3条指令是条件执行指令.
IT EQ,这是thumb2的指令,是指令前缀.</p>
<h3 id="乘法" class="heading-element"><span>乘法</span>
  <a href="#%e4%b9%98%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">argc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n2</span> <span class="o">=</span> <span class="n">argc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;n1 * 15 = %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">n1</span> <span class="o">*</span><span class="mi">15</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span> <span class="no">n2</span> <span class="err">=</span> <span class="no">R0</span>                                 <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aN115D</span> <span class="p">-</span> <span class="mi">0x2A0E</span><span class="p">)</span> <span class="c1">; &#34;n1 * 15 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">RSB.W</span>           <span class="no">argv</span><span class="p">,</span> <span class="no">n2</span><span class="p">,</span> <span class="no">n2</span><span class="p">,</span><span class="no">LSL</span><span class="c1">#4
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;n1 * 15 = %d\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">MOV</span>             <span class="no">n2</span><span class="p">,</span> <span class="no">R2</span>  <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="除法" class="heading-element"><span>除法</span>
  <a href="#%e9%99%a4%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><h4 id="无符号" class="heading-element"><span>无符号</span>
  <a href="#%e6%97%a0%e7%ac%a6%e5%8f%b7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><h5 id="除数为2的幂常量" class="heading-element"><span>除数为2的幂(常量)</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba2%e7%9a%84%e5%b9%82%e5%b8%b8%e9%87%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / 8&#34;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="n">argc</span> <span class="o">/</span> <span class="mi">8</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc8</span> <span class="p">-</span> <span class="mi">0x2A0C</span><span class="p">)</span> <span class="c1">; &#34;argc / 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">LSRS</span>            <span class="no">argv</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">MOV</span>             <span class="no">argc</span><span class="p">,</span> <span class="no">R2</span> <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//右移3位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSRS</span>            <span class="no">argv</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="err">#</span><span class="mi">3</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">LSR</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B4</span>                 <span class="no">ADRL</span>            <span class="no">X0</span><span class="p">,</span> <span class="no">aArgc8</span> <span class="c1">; &#34;argc / 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//右移3位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="err">#</span><span class="mi">3</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">x / 2^n = x &gt;&gt; n</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="除数为非2的幂常量" class="heading-element"><span>除数为非2的幂(常量)</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba%e9%9d%9e2%e7%9a%84%e5%b9%82%e5%b8%b8%e9%87%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><h6 id="magicnumber无进位" class="heading-element"><span>MagicNumber无进位</span>
  <a href="#magicnumber%e6%97%a0%e8%bf%9b%e4%bd%8d" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h6><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / 9&#34;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="n">argc</span> <span class="o">/</span> <span class="mi">9</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">UMULL.W</span>         <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">LDR</span>             <span class="no">R0</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc9</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">LSRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = (argc * R1) &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">UMULL.W</span>         <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="c1">//R1 = R1 &gt;&gt; 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">R1</span> <span class="err">=</span> <span class="p">(</span><span class="no">argc</span> <span class="p">*</span> <span class="no">c</span><span class="p">)</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">&gt;&gt;</span> <span class="mi">1</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">UMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc9@PAGE ; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">LSR</span>             <span class="no">argv</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#33 ; &#39;!&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc9@PAGEOFF ; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//W8 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = argc * W8 //这里W0就是argc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">UMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="c1">//argv = X8 &gt;&gt; 33
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">argv</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="err">#</span><span class="mi">33</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">上述特征为:x / y = x * c &gt;&gt; 32 &gt;&gt; n
</span></span><span class="line"><span class="cl">还原的话就看c,分为3种情况:
</span></span><span class="line"><span class="cl">c为正数:y = 2^n / c
</span></span><span class="line"><span class="cl">c为负数:y = 2^n / (2^32 - c)
</span></span><span class="line"><span class="cl">c溢出:  y = 2^n / (2^32 + c)
</span></span><span class="line"><span class="cl">以上述arm-v7a为例:
</span></span><span class="line"><span class="cl">c = 0x38E38E39 = 954437177, 为正.
</span></span><span class="line"><span class="cl">n = 32 + 1 = 33
</span></span><span class="line"><span class="cl">则 y = 2^33 / 954437177 = 9</span></span></code></pre></td></tr></table>
</div>
</div><h6 id="magicnumber有进位" class="heading-element"><span>MagicNumber有进位</span>
  <a href="#magicnumber%e6%9c%89%e8%bf%9b%e4%bd%8d" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h6><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / 7&#34;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="n">argc</span> <span class="o">/</span> <span class="mi">7</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOVW</span>            <span class="no">argv</span><span class="p">,</span> <span class="c1">#0x4925
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc7</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x2492
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">UMULL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">SUBS</span>            <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R3</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">ADD.W</span>           <span class="no">R0</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">R0</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">LSRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">R0</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span>                 <span class="no">MOV</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">R2</span>  <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1E</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A22</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A24</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A24</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = 0x24924925 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOVW</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x4925
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x2492
</span></span></span><span class="line"><span class="cl"><span class="c1">//R3 = argc * R1 &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">UMULL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="c1">//argc = argc - R3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUBS</span>            <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R3</span>
</span></span><span class="line"><span class="cl"><span class="c1">//argc = R3 + argc &gt;&gt; 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">argc</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = (argc * c &gt;&gt; 32 + (argc - argc * c &gt;&gt; 32) &gt;&gt; 1) &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">这种形式的还原</span> <span class="nf">y</span> <span class="err">=</span> <span class="mi">2</span><span class="err">^</span><span class="no">n</span> <span class="err">/</span> <span class="p">(</span><span class="mi">2</span><span class="err">^</span><span class="mi">32</span> <span class="err">+</span> <span class="no">c</span><span class="p">)</span> <span class="err">=</span> <span class="mi">2</span><span class="err">^</span><span class="mi">35</span> <span class="err">/</span> <span class="p">(</span><span class="mi">2</span><span class="err">^</span><span class="mi">32</span> <span class="err">+</span> <span class="mi">0x24924925</span><span class="p">)</span> <span class="err">=</span> <span class="mi">7</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x24924925
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">UMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">LSR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#32 ; &#39; &#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">SUB</span>             <span class="no">W9</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W9</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc7@PAGE ; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">LSR</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc7@PAGEOFF ; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D8</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//w8 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x24924925
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = W0 * W8 = argc * W8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">UMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="c1">//X8 = X8 &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#32
</span></span></span><span class="line"><span class="cl"><span class="c1">//W9 = W0 - W8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUB</span>             <span class="no">W9</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="c1">//W8 = W8 + W9 &gt;&gt; 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W9</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = W8 &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = ((argc * c) &gt;&gt; 32 + (argc - ((argc * c) &gt;&gt; 32) &gt;&gt; 1) &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//还原的方法同上</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">形如x / y =(x * c &gt;&gt; 32 + (x - x * c &gt;&gt; 32) &gt;&gt; n1) &gt;&gt; n2这种形式的
</span></span><span class="line"><span class="cl">还原的话,y = 2^(32 + n1 + n2)/(2^32 + c)</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="有符号" class="heading-element"><span>有符号</span>
  <a href="#%e6%9c%89%e7%ac%a6%e5%8f%b7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><h5 id="除数为正2的幂" class="heading-element"><span>除数为正2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba%e6%ad%a32%e7%9a%84%e5%b9%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / 8&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">/</span> <span class="mi">8</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc8</span> <span class="p">-</span> <span class="mi">0x2A10</span><span class="p">)</span> <span class="c1">; &#34;argc / 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">ASRS</span>            <span class="no">argv</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#0x1F
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">ADD.W</span>           <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#29
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">ASRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">R0</span><span class="p">,</span> <span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">MOV</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">R2</span>  <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A18</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A18</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = argc &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1">//如果argc为正数, R1 = 0, 否则 R1 = 0xFFFFFFFF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc = argc + R1 &gt;&gt; 29
</span></span></span><span class="line"><span class="cl"><span class="c1">//如果argc为正数, argc = argc, 否则 argc = argc + 7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#29
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc &gt;&gt; 3
</span></span></span><span class="line"><span class="cl"><span class="c1">//如果argc为正数, R1 = argc &gt;&gt; 3, 否则 R1 = (argc + 7) &gt;&gt; 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="err">#</span><span class="mi">3</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="c1">#7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B4</span>                 <span class="no">CMP</span>             <span class="no">W0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">CSEL</span>            <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">LT</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc8@PAGE ; &#34;argc / 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">ASR</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc8@PAGEOFF ; &#34;argc / 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//W8 = argc + 7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">CMP</span>             <span class="no">argc</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1">//如果argc &lt; 0, W8 = argc + 7, 否则W8 = argc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">CSEL</span>            <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">LT</span>
</span></span><span class="line"><span class="cl"><span class="c1">//W1 = W8 &gt;&gt; 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASR</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="err">#</span><span class="mi">3</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">x</span> <span class="err">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="no">x</span> <span class="err">/</span> <span class="no">y</span> <span class="err">=</span> <span class="no">x</span> <span class="err">&gt;&gt;</span> <span class="no">n</span>
</span></span><span class="line"><span class="cl"><span class="nf">x</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="no">x</span> <span class="err">/</span> <span class="no">y</span> <span class="err">=</span> <span class="p">(</span><span class="no">x</span> <span class="err">+</span> <span class="mi">2</span> <span class="err">^</span><span class="no">n</span> <span class="p">-</span> <span class="mi">1</span><span class="p">)</span> <span class="err">&gt;&gt;</span> <span class="no">n</span>
</span></span><span class="line"><span class="cl"><span class="err">这种还原的话就是,</span><span class="nf">y</span> <span class="err">=</span> <span class="mi">2</span><span class="err">^</span><span class="no">n</span></span></span></code></pre></td></tr></table>
</div>
</div><h5 id="除数为正非2的幂" class="heading-element"><span>除数为正非2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba%e6%ad%a3%e9%9d%9e2%e7%9a%84%e5%b9%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><h6 id="magicnumber为正" class="heading-element"><span>MagicNumber为正</span>
  <a href="#magicnumber%e4%b8%ba%e6%ad%a3" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h6><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / 9&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">/</span> <span class="mi">9</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">LDR</span>             <span class="no">argc</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc9</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">ASRS</span>            <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1E</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A20</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A20</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc * R1 &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="c1">//R2 = R1 &gt;&gt; 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = R2 + R1 &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc * c &gt;&gt; 32 &gt;&gt; 1 + argc * c &gt;&gt; 63
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, argc * c &gt;&gt; 32 &gt;&gt; n
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="no">argc</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">&gt;&gt;</span> <span class="no">n</span> <span class="err">+</span> <span class="mi">1</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">LSR</span>             <span class="no">X9</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#0x3F ; &#39;?&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">ASR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#0x21 ; &#39;!&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc9@PAGE ; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W9</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc9@PAGEOFF ; &#34;argc / 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D8</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//W8 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x38E38E39
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = argc * W8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="c1">//X9 = X8 &gt;&gt; 63
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">X9</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#63
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = X8 &gt;&gt; 33
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#33
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = W8 + W9
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W9</span>
</span></span><span class="line"><span class="cl"><span class="c1">//W1 = argc * c &gt;&gt; 33 + argc * c &gt;&gt; 63
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, argc * c &gt;&gt; 32 &gt;&gt; n
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span>  <span class="no">argc</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">&gt;&gt;</span> <span class="no">n</span> <span class="err">+</span> <span class="mi">1</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">c为正:</span>
</span></span><span class="line"><span class="cl"><span class="nf">x</span> <span class="err">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="no">x</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">&gt;&gt;</span> <span class="no">n</span>
</span></span><span class="line"><span class="cl"><span class="nf">x</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span>  <span class="no">x</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">&gt;&gt;</span> <span class="no">n</span> <span class="err">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="err">还原的时候,</span> <span class="nf">y</span> <span class="err">=</span> <span class="mi">2</span><span class="err">^</span><span class="p">(</span><span class="mi">32</span> <span class="err">+</span> <span class="no">n</span><span class="p">)</span> <span class="err">/</span> <span class="no">c</span></span></span></code></pre></td></tr></table>
</div>
</div><h6 id="magicnumber为负" class="heading-element"><span>MagicNumber为负</span>
  <a href="#magicnumber%e4%b8%ba%e8%b4%9f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h6><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / 7&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">/</span> <span class="mi">7</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x92492493
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">SMMLA.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">LDR</span>             <span class="no">argc</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc7</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">ASRS</span>            <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1E</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A20</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A20</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x92492493
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = R1 * argc &gt;&gt; 32 + argc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMMLA.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span>
</span></span><span class="line"><span class="cl"><span class="c1">//R2 = R1 &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = R2 + R1 &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = (c * argc &gt;&gt; 32 + argc) &gt;&gt; 2 + (c * argc &gt;&gt; 32 + argc) &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, (c * argc &gt;&gt; 32 + argc) &gt;&gt; 2 + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span>  <span class="p">(</span><span class="no">c</span> <span class="p">*</span> <span class="no">argc</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">+</span> <span class="no">argc</span><span class="p">)</span> <span class="err">&gt;&gt;</span> <span class="mi">2</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x92492493
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">LSR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#0x20 ; &#39; &#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ASR</span>             <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc7@PAGE ; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc7@PAGEOFF ; &#34;argc / 7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D8</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//W8 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x92492493
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = argc * c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="c1">//X8 = X8 &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#32
</span></span></span><span class="line"><span class="cl"><span class="c1">//W8 = W8 + argc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">argc</span>
</span></span><span class="line"><span class="cl"><span class="c1">//W9 = W8 &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASR</span>             <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = W9 + W8 &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = (argc * c &gt;&gt; 32 + argc) &gt;&gt; 2 + (argc * c &gt;&gt; 32 + argc) &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, (c * argc &gt;&gt; 32 + argc) &gt;&gt; 2 + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span>  <span class="p">(</span><span class="no">c</span> <span class="p">*</span> <span class="no">argc</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">+</span> <span class="no">argc</span><span class="p">)</span> <span class="err">&gt;&gt;</span> <span class="mi">2</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">c为负:
</span></span><span class="line"><span class="cl">x &gt;= 0, (c * x &gt;&gt; 32 + x) &gt;&gt; n + 1
</span></span><span class="line"><span class="cl">x &lt; 0,  (c * x &gt;&gt; 32 + x) &gt;&gt; n
</span></span><span class="line"><span class="cl">还原的时候,y = 2^(32 + n) / c</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="除数为负2的幂" class="heading-element"><span>除数为负2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba%e8%b4%9f2%e7%9a%84%e5%b9%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / -8&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">/</span> <span class="o">-</span><span class="mi">8</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc8</span> <span class="p">-</span> <span class="mi">0x2A12</span><span class="p">)</span> <span class="c1">; &#34;argc / -8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">ASRS</span>            <span class="no">argv</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#0x1F
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">ADD.W</span>           <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#29
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">MOVS</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / -8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">SUB.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R0</span><span class="p">,</span><span class="no">ASR</span><span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">MOV</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">R2</span>  <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = argc &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc = argc + R1 &gt;&gt; 29
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">argc</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#29
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOVS</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1">// R1 = 0 - R0 &gt;&gt; 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUB.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R0</span><span class="p">,</span><span class="no">ASR</span><span class="err">#</span><span class="mi">3</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="c1">#7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B4</span>                 <span class="no">CMP</span>             <span class="no">W0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">CSEL</span>            <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">LT</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc8@PAGE ; &#34;argc / -8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">NEG</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span><span class="no">ASR</span><span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc8@PAGEOFF ; &#34;argc / -8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//W8 = argc + 7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">CMP</span>             <span class="no">argc</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1">//如果argc &lt; 0, W8 = argc + 7, 否则W8 = argc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">CSEL</span>            <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">LT</span>
</span></span><span class="line"><span class="cl"><span class="c1">//W1 = -W8 &gt;&gt; 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">NEG</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span><span class="no">ASR</span><span class="err">#</span><span class="mi">3</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">除数为负的2的幂的情况,跟除数为正的2的幂的情况相同,只不过加了一个负号</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="除数为负非2的幂" class="heading-element"><span>除数为负非2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba%e8%b4%9f%e9%9d%9e2%e7%9a%84%e5%b9%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><h6 id="magicnumber为正-1" class="heading-element"><span>MagicNumber为正</span>
  <a href="#magicnumber%e4%b8%ba%e6%ad%a3-1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h6><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / -7&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">/</span> <span class="o">-</span><span class="mi">7</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOVW</span>            <span class="no">argv</span><span class="p">,</span> <span class="c1">#0xDB6D
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc7</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc / -7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x6DB6
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / -7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">SUBS</span>            <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">ASRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">R0</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A18</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R0</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span>                 <span class="no">MOV</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">R2</span>  <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1E</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A22</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A24</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A24</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = 0x6DB6DB6D = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOVW</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0xDB6D
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x6DB6
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc * R1 &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="c1">//argc = R1 - argc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUBS</span>            <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span>
</span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = R1 + argc &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = (argc * c &gt;&gt; 32 - argc) &gt;&gt; 2 + (argc * c &gt;&gt; 32 - argc) &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, (argc * c &gt;&gt; 32 - argc) &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span>  <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="no">argc</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="p">-</span> <span class="no">argc</span><span class="p">)</span> <span class="err">&gt;&gt;</span> <span class="mi">2</span> <span class="err">+</span> <span class="mi">1</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x6DB6DB6D
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">LSR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#0x20 ; &#39; &#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">SUB</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ASR</span>             <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc7@PAGE ; &#34;argc / -7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc7@PAGEOFF ; &#34;argc / -7&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D8</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">E0</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//W8 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0x6DB6DB6D
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = argc * W8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="c1">//X8 = X8 &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#32
</span></span></span><span class="line"><span class="cl"><span class="c1">//W8 = W8 - argc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUB</span>             <span class="no">W8</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">argc</span>
</span></span><span class="line"><span class="cl"><span class="c1">//W9 = W8 &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASR</span>             <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="c1">#2
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = W9 + W8 &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W9</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = (argc * c &gt;&gt; 32 - argc) &gt;&gt; 2 + (argc * c &gt;&gt; 32 - argc) &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, (argc * c &gt;&gt; 32 - argc) &gt;&gt; 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span>  <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="no">argc</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="p">-</span> <span class="no">argc</span><span class="p">)</span> <span class="err">&gt;&gt;</span> <span class="mi">2</span> <span class="err">+</span> <span class="mi">1</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">c为正:
</span></span><span class="line"><span class="cl">x &gt;= 0, (x * c &gt;&gt; 32 - x) &gt;&gt; 2
</span></span><span class="line"><span class="cl">x &lt;  0, (x * c &gt;&gt; 32 - x) &gt;&gt; 2 + 1
</span></span><span class="line"><span class="cl">还原的时候, y = -2^(32 + n) / (2^32 - c)</span></span></code></pre></td></tr></table>
</div>
</div><h6 id="magicnumber为负-1" class="heading-element"><span>MagicNumber为负</span>
  <a href="#magicnumber%e4%b8%ba%e8%b4%9f-1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h6><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc / -9&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">/</span> <span class="o">-</span><span class="mi">9</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0xC71C71C7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">LDR</span>             <span class="no">argc</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc9</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc / -9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R0</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc / -9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">ASRS</span>            <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31 ; n1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1E</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A20</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A20</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">R1</span><span class="p">,</span> <span class="c1">#0xC71C71C7
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc * R1 &gt;&gt; 32
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="c1">//R2 = R1 &gt;&gt; 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = R2 + R1 &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R2</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc * c &gt;&gt; 32 &gt;&gt; 1 + argc * c &gt;&gt; 63
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, argc * c &gt;&gt; 32 &gt;&gt; n + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="no">argc</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">&gt;&gt;</span> <span class="no">n</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v8a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: LOAD:0000000000000448↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">var_s0</span>          <span class="err">=</span>  <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">X0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">X1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">A8</span>                 <span class="no">STP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="p">,</span><span class="c1">#-0x10+var_s0]!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">AC</span>                 <span class="no">MOV</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B0</span>                 <span class="no">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0xC71C71C7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">B8</span>                 <span class="no">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">W0</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">BC</span>                 <span class="no">LSR</span>             <span class="no">X9</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#63 ; &#39;?&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C0</span>                 <span class="no">ASR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#33 ; &#39;!&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C4</span>                 <span class="no">ADRP</span>            <span class="no">argc</span><span class="p">,</span> <span class="c1">#aArgc9@PAGE ; &#34;argc / -9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">C8</span>                 <span class="no">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W9</span> <span class="c1">; n1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">CC</span>                 <span class="no">ADD</span>             <span class="no">X0</span><span class="p">,</span> <span class="no">X0</span><span class="p">,</span> <span class="c1">#aArgc9@PAGEOFF ; &#34;argc / -9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D0</span>                 <span class="no">BL</span>              <span class="no">.printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D4</span>                 <span class="no">MOV</span>             <span class="no">W0</span><span class="p">,</span> <span class="no">WZR</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">D8</span>                 <span class="no">LDP</span>             <span class="no">X29</span><span class="p">,</span> <span class="no">X30</span><span class="p">,</span> <span class="p">[</span><span class="no">SP</span><span class="err">+</span><span class="no">var_s0</span><span class="p">],</span><span class="c1">#0x10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span>                 <span class="no">RET</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span> <span class="c1">; } // starts at 6A8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00000000000006</span><span class="nf">DC</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//W8 = c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOV</span>             <span class="no">W8</span><span class="p">,</span> <span class="c1">#0xC71C71C7
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = argc * W8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMULL</span>           <span class="no">X8</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">W8</span>
</span></span><span class="line"><span class="cl"><span class="c1">//X9 = X8 &gt;&gt; 63
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">LSR</span>             <span class="no">X9</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#63
</span></span></span><span class="line"><span class="cl"><span class="c1">//X8 = X8 &gt;&gt; 33
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASR</span>             <span class="no">X8</span><span class="p">,</span> <span class="no">X8</span><span class="p">,</span> <span class="c1">#33
</span></span></span><span class="line"><span class="cl"><span class="c1">//W1 = W8 + W9
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD</span>             <span class="no">W1</span><span class="p">,</span> <span class="no">W8</span><span class="p">,</span> <span class="no">W9</span>
</span></span><span class="line"><span class="cl"><span class="c1">//W1 = argc * c &gt;&gt; 33 + argc * c &gt;&gt; 63
</span></span></span><span class="line"><span class="cl"><span class="c1">//argc &gt;= 0, argc * c &gt;&gt; 32 &gt;&gt; n +1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">//</span><span class="nf">argc</span> <span class="err">&lt;</span> <span class="mi">0</span><span class="p">,</span>  <span class="no">argc</span> <span class="p">*</span> <span class="no">c</span> <span class="err">&gt;&gt;</span> <span class="mi">32</span> <span class="err">&gt;&gt;</span> <span class="no">n</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">c为负:
</span></span><span class="line"><span class="cl">x &gt;= 0, x * c &gt;&gt; 32 &gt;&gt; n + 1
</span></span><span class="line"><span class="cl">x &lt; 0,  x * c &gt;&gt; 32 &gt;&gt; n
</span></span><span class="line"><span class="cl">还原的时候, y = -2^(32 + n) / (2^32 - c)</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="取模" class="heading-element"><span>取模</span>
  <a href="#%e5%8f%96%e6%a8%a1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><h4 id="无符号-1" class="heading-element"><span>无符号</span>
  <a href="#%e6%97%a0%e7%ac%a6%e5%8f%b7-1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><h5 id="除数为2的幂" class="heading-element"><span>除数为2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba2%e7%9a%84%e5%b9%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc % 8&#34;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="n">argc</span> <span class="o">%</span> <span class="mi">8</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc8</span> <span class="p">-</span> <span class="mi">0x2A0E</span><span class="p">)</span> <span class="c1">; &#34;argc % 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">AND.W</span>          <span class="no">argv</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc % 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">MOV</span>             <span class="no">argc</span><span class="p">,</span> <span class="no">R2</span> <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = argc &amp; 7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">AND.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="err">#</span><span class="mi">7</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">x % y = x &amp; (2^ - 1)</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="除数为非2的幂" class="heading-element"><span>除数为非2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba%e9%9d%9e2%e7%9a%84%e5%b9%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc % 9&#34;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="n">argc</span> <span class="o">%</span> <span class="mi">9</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; int __cdecl main(int argc, const char **argv, const char **envp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">EXPORT</span> <span class="no">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOVW</span>            <span class="no">argv</span><span class="p">,</span> <span class="c1">#0x8E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc9</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc % 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">UMULL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc % 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">LSRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSL</span><span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">SUBS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span>                 <span class="no">MOV</span>             <span class="no">argc</span><span class="p">,</span> <span class="no">R2</span> <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1E</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A22</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A24</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A24</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">MOVW</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x8E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">UMULL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nf">LSRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1">//上面是除法运算,结果在R1中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSL</span><span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUBS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="err">//余数</span> <span class="err">=</span> <span class="err">被除数</span> <span class="err">-</span> <span class="err">除数</span> <span class="err">*</span> <span class="err">商</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="有符号-1" class="heading-element"><span>有符号</span>
  <a href="#%e6%9c%89%e7%ac%a6%e5%8f%b7-1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><h5 id="除数为2的幂-1" class="heading-element"><span>除数为2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba2%e7%9a%84%e5%b9%82-1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc % 8&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">%</span> <span class="mi">8</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc8</span> <span class="p">-</span> <span class="mi">0x2A14</span><span class="p">)</span> <span class="c1">; &#34;argc % 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A06</span>                 <span class="no">ASRS</span>            <span class="no">argv</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#0x1F
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#29
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0C</span>                 <span class="no">BIC.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A10</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc % 8&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">SUBS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">MOV</span>             <span class="no">argc</span><span class="p">,</span> <span class="no">R2</span> <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1C</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="c1">//R1 = argc &gt;&gt; 31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ASRS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc + R1 &gt;&gt; 29
</span></span></span><span class="line"><span class="cl"><span class="c1">//如果argc &gt;= 0, R1 = argc
</span></span></span><span class="line"><span class="cl"><span class="c1">//如果argc &lt;  0, R1 = argc + 7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#29
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = R1 &amp; ~7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">BIC.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#7
</span></span></span><span class="line"><span class="cl"><span class="c1">//R1 = argc - R1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUBS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">x &gt;= 0,x % y = x - x &amp; ~(2^n - 1)
</span></span><span class="line"><span class="cl">x &lt;  0,x % y = x - (x + 2^n - 1) &amp;~(2^n - 1)</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="除数为非2的幂-1" class="heading-element"><span>除数为非2的幂</span>
  <a href="#%e9%99%a4%e6%95%b0%e4%b8%ba%e9%9d%9e2%e7%9a%84%e5%b9%82-1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc % 9&#34;</span><span class="p">,</span> <span class="n">argc</span> <span class="o">%</span> <span class="mi">9</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">main</span>                                    <span class="c1">; DATA XREF: .text:000029BC↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                                         <span class="c1">; .got:main_ptr↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argc</span> <span class="err">=</span> <span class="no">R0</span>                               <span class="c1">; int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="no">argv</span> <span class="err">=</span> <span class="no">R1</span>                               <span class="c1">; unsigned __int8 **
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span> <span class="c1">; __unwind {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A00</span>                 <span class="no">PUSH</span>            <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">LR</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A02</span>                 <span class="no">MOV</span>             <span class="no">R7</span><span class="p">,</span> <span class="no">SP</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A04</span>                 <span class="no">MOVW</span>            <span class="no">argv</span><span class="p">,</span> <span class="c1">#0x8E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A08</span>                 <span class="no">LDR</span>             <span class="no">R2</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="no">aArgc9</span> <span class="p">-</span> <span class="mi">0x2A16</span><span class="p">)</span> <span class="c1">; &#34;argc % 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0A</span>                 <span class="no">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A0E</span>                 <span class="no">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A12</span>                 <span class="no">ADD</span>             <span class="no">R2</span><span class="p">,</span> <span class="no">PC</span>  <span class="c1">; &#34;argc % 9&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A14</span>                 <span class="no">ASRS</span>            <span class="no">R3</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A16</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1A</span>                 <span class="no">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSL</span><span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A1E</span>                 <span class="no">SUBS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A20</span>                 <span class="no">MOV</span>             <span class="no">argc</span><span class="p">,</span> <span class="no">R2</span> <span class="c1">; format
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A22</span>                 <span class="no">BLX</span>             <span class="no">printf</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A26</span>                 <span class="no">MOVS</span>            <span class="no">R0</span><span class="p">,</span> <span class="c1">#0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A28</span>                 <span class="no">POP</span>             <span class="err">{</span><span class="no">R7</span><span class="p">,</span><span class="no">PC</span><span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="nl">.text:</span><span class="err">00002</span><span class="nf">A28</span> <span class="err">;</span> <span class="no">End</span> <span class="no">of</span> <span class="no">function</span> <span class="no">main</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nf">MOVW</span>            <span class="no">argv</span><span class="p">,</span> <span class="c1">#0x8E39
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MOVT</span>            <span class="no">R1</span><span class="p">,</span> <span class="c1">#0x38E3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SMMUL.W</span>         <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="nf">ASRS</span>            <span class="no">R3</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="c1">#1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R3</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSR</span><span class="c1">#31
</span></span></span><span class="line"><span class="cl"><span class="c1">//上面是除法运算, R1为商
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">ADD.W</span>           <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span> <span class="no">R1</span><span class="p">,</span><span class="no">LSL</span><span class="c1">#3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">SUBS</span>            <span class="no">R1</span><span class="p">,</span> <span class="no">argc</span><span class="p">,</span> <span class="no">R1</span>
</span></span><span class="line"><span class="cl"><span class="err">//余数</span> <span class="err">=</span> <span class="err">被除数</span> <span class="err">-</span> <span class="err">商</span> <span class="err">*</span> <span class="err">除数</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分支" class="heading-element"><span>分支</span>
  <a href="#%e5%88%86%e6%94%af" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><h4 id="if" class="heading-element"><span>if</span>
  <a href="#if" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">       <span class="n">printf</span><span class="p">(</span><span class="s">&#34;argc &gt; 0&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span> <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="n">puts</span><span class="p">(</span><span class="s">&#34;argc &lt;= 0&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/if.png" alt="if" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/if.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/if.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/if.png?size=large 2x" data-title="if" style="--width: 1452px;--aspect-ratio: 1452 / 1002;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h4 id="while" class="heading-element"><span>while</span>
  <a href="#while" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">argc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="n">argc</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/while.png" alt="while" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/while.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/while.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/while.png?size=large 2x" data-title="while" style="--width: 1379px;--aspect-ratio: 1379 / 1006;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h4 id="do-while" class="heading-element"><span>do-while</span>
  <a href="#do-while" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">do</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">argc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">argc</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/dowhile.png" alt="dowhile" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/dowhile.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/dowhile.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/dowhile.png?size=large 2x" data-title="dowhile" style="--width: 1321px;--aspect-ratio: 1321 / 1004;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h4 id="switch-case" class="heading-element"><span>Switch-case</span>
  <a href="#switch-case" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>这里只讨论做表的情况.</p>
<p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">switch</span> <span class="p">(</span><span class="n">argc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">puts</span><span class="p">(</span><span class="s">&#34;3&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mi">5</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mi">9</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">printf</span><span class="p">(</span><span class="s">&#34;9&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/switch.png" alt="switch" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/switch.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/switch.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/switch.png?size=large 2x" data-title="switch" style="--width: 1743px;--aspect-ratio: 1743 / 1000;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h3 id="函数" class="heading-element"><span>函数</span>
  <a href="#%e5%87%bd%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>这一部分跟x86相差还是挺大的.</p>
<h4 id="整型传参" class="heading-element"><span>整型传参</span>
  <a href="#%e6%95%b4%e5%9e%8b%e4%bc%a0%e5%8f%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">add1</span><span class="p">(</span><span class="kt">int</span> <span class="n">n1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n3</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n4</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n5</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n6</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n7</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n8</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n9</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span> <span class="o">+</span> <span class="n">n5</span> <span class="o">+</span> <span class="n">n6</span> <span class="o">+</span> <span class="n">n7</span> <span class="o">+</span> <span class="n">n8</span> <span class="o">+</span> <span class="n">n9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">add1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v7.png" alt="整型传参v7" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v7.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v7.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v7.png?size=large 2x" data-title="整型传参v7" style="--width: 1686px;--aspect-ratio: 1686 / 1001;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>从上面可以看到,前4个整型参数放在寄存器R0-R3中,后面的参数就入栈了,整型返回值放在R0中.</p>
<p>arm-v8a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v8.png" alt="整型传参v8" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v8.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v8.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B4%E5%9E%8B%E4%BC%A0%E5%8F%82v8.png?size=large 2x" data-title="整型传参v8" style="--width: 1810px;--aspect-ratio: 1810 / 1001;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>从上面可以看到,前8个整型参数放在寄存器X0-X7中,后面的参数就入栈了,整型返回值放在X0中.</p>
<h4 id="浮点传参" class="heading-element"><span>浮点传参</span>
  <a href="#%e6%b5%ae%e7%82%b9%e4%bc%a0%e5%8f%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">float</span> <span class="nf">add2</span><span class="p">(</span><span class="kt">float</span> <span class="n">f1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f3</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f4</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f5</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f6</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f7</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f8</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f9</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">f2</span> <span class="o">+</span> <span class="n">f3</span> <span class="o">+</span> <span class="n">f4</span> <span class="o">+</span> <span class="n">f5</span> <span class="o">+</span> <span class="n">f6</span> <span class="o">+</span> <span class="n">f7</span> <span class="o">+</span> <span class="n">f8</span> <span class="o">+</span> <span class="n">f9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">float</span> <span class="n">f</span> <span class="o">=</span> <span class="n">add2</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%f</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v7.png" alt="浮点传参v7" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v7.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v7.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v7.png?size=large 2x" data-title="浮点传参v7" style="--width: 1906px;--aspect-ratio: 1906 / 1001;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>从上面可以看到,浮点传参跟整型传参没有区别,前4个参数放R0-R3,后面的参数入栈,浮点返回值放在R0中.</p>
<p>arm-v8a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v8.png" alt="浮点传参v8" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v8.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v8.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B5%AE%E7%82%B9%E4%BC%A0%E5%8F%82v8.png?size=large 2x" data-title="浮点传参v8" style="--width: 1911px;--aspect-ratio: 1911 / 968;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>从上面可以看到,前8个浮点参数,放浮点寄存器S0-S7,后面的浮点参数入栈,浮点返回值放在S0中.</p>
<h4 id="混合传参" class="heading-element"><span>混合传参</span>
  <a href="#%e6%b7%b7%e5%90%88%e4%bc%a0%e5%8f%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">long</span> <span class="kt">long</span> <span class="nf">add3</span><span class="p">(</span><span class="kt">int</span> <span class="n">n1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n3</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f4</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n5</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f6</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n7</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f8</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n9</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">n1</span> <span class="o">+</span> <span class="n">f2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">f4</span> <span class="o">+</span> <span class="n">n5</span> <span class="o">+</span> <span class="n">f6</span> <span class="o">+</span> <span class="n">n7</span> <span class="o">+</span> <span class="n">f8</span> <span class="o">+</span> <span class="n">n9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">l</span> <span class="o">=</span> <span class="n">add3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%ld</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v7.png" alt="混合传参v7" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v7.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v7.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v7.png?size=large 2x" data-title="混合传参v7" style="--width: 1800px;--aspect-ratio: 1800 / 1000;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>从上面可以看到,混合传参对32位没有影响,前4个参数放R0-R3中,后面的参数入栈,长整型的返回值放在R1 .</p>
<p>arm-v8a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v8.png" alt="混合传参v8" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v8.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v8.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82v8.png?size=large 2x" data-title="混合传参v8" style="--width: 1888px;--aspect-ratio: 1888 / 1002;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>从上面可以看到,对于混合传参,64位的处理方式还是挺特别的,将整型参数放在X0-X7中,浮点参数放在S0-S7中,单从传参来说,没有办法区分谁是第一个参数,谁是第二个参数,除非有符号.</p>
<h4 id="注意的小细节" class="heading-element"><span>注意的小细节</span>
  <a href="#%e6%b3%a8%e6%84%8f%e7%9a%84%e5%b0%8f%e7%bb%86%e8%8a%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">long</span> <span class="kt">long</span> <span class="nf">add4</span><span class="p">(</span><span class="kt">int</span> <span class="n">n1</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">n2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">f3</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">f3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">l</span> <span class="o">=</span> <span class="n">add4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%ld</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>arm-v7a:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%87%BD%E6%95%B0%E6%B3%A8%E6%84%8F%E7%9A%84%E5%B0%8F%E7%BB%86%E8%8A%82.png" alt="函数注意的小细节" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%87%BD%E6%95%B0%E6%B3%A8%E6%84%8F%E7%9A%84%E5%B0%8F%E7%BB%86%E8%8A%82.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%87%BD%E6%95%B0%E6%B3%A8%E6%84%8F%E7%9A%84%E5%B0%8F%E7%BB%86%E8%8A%82.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%87%BD%E6%95%B0%E6%B3%A8%E6%84%8F%E7%9A%84%E5%B0%8F%E7%BB%86%E8%8A%82.png?size=large 2x" data-title="函数注意的小细节" style="--width: 1410px;--aspect-ratio: 1410 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>本例中,long long add4(int n1, long long n2, float f3);
按理来说n1放R0,n2放R2, R1, f3放R3.
但从上面的汇编代码来看,并没有用到寄存器R1,
也就是说64位整型,低32位放的应该是2的幂下标的寄存器,如R1 R0, R3 R2.
而不是像R2 R1这种的.</p>
<h3 id="变量" class="heading-element"><span>变量</span>
  <a href="#%e5%8f%98%e9%87%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><h4 id="全局变量" class="heading-element"><span>全局变量</span>
  <a href="#%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">g_n1</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">g_n2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">g_n3</span> <span class="o">=</span> <span class="n">fun1</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">__attribute__</span> <span class="p">((</span><span class="n">constructor</span><span class="p">))</span> <span class="kt">void</span> <span class="n">myload</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;myload</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">g_n2</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">__attribute__</span> <span class="p">((</span><span class="n">destructor</span><span class="p">))</span> <span class="kt">void</span> <span class="n">myunload</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;myunload</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d %d %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">g_n1</span><span class="p">,</span> <span class="n">g_n2</span><span class="p">,</span> <span class="n">g_n3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F1.png" alt="变量1" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F1.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F1.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F1.png?size=large 2x" data-title="变量1" style="--width: 1712px;--aspect-ratio: 1712 / 774;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>全局变量初始化以及初始化函数在.init_array这个区段中.
反初始化函数在.fini_array这个区段中.</p>
<h4 id="静态局部变量" class="heading-element"><span>静态局部变量</span>
  <a href="#%e9%9d%99%e6%80%81%e5%b1%80%e9%83%a8%e5%8f%98%e9%87%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">showStatic</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">int</span> <span class="n">nStatic</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">nStatic</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">showStatic</span><span class="p">(</span><span class="n">argc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F2.png" alt="变量2" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F2.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F2.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8F%98%E9%87%8F2.png?size=large 2x" data-title="变量2" style="--width: 1962px;--aspect-ratio: 1962 / 968;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>这部分跟x86一样,就不细述了.</p>
<h3 id="数组" class="heading-element"><span>数组</span>
  <a href="#%e6%95%b0%e7%bb%84" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><h4 id="一维数组" class="heading-element"><span>一维数组</span>
  <a href="#%e4%b8%80%e7%bb%b4%e6%95%b0%e7%bb%84" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">ary</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d %d&#34;</span><span class="p">,</span> <span class="n">ary</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ary</span><span class="p">[</span><span class="n">argc</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%841.png" alt="数组1" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%841.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%841.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%841.png?size=large 2x" data-title="数组1" style="--width: 1322px;--aspect-ratio: 1322 / 746;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">假设数组为ary[n]
</span></span><span class="line"><span class="cl">ary[x]寻址:
</span></span><span class="line"><span class="cl">数组首地址 + x * sizeof(type)</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="二维数组" class="heading-element"><span>二维数组</span>
  <a href="#%e4%ba%8c%e7%bb%b4%e6%95%b0%e7%bb%84" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">ary</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="n">ary</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%842.png" alt="数组2" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%842.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%842.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%95%B0%E7%BB%842.png?size=large 2x" data-title="数组2" style="--width: 1277px;--aspect-ratio: 1277 / 1042;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">假设数组为ary[M][N]
</span></span><span class="line"><span class="cl">ary[x][y]寻址:
</span></span><span class="line"><span class="cl">ary + x * sizeof(type[N]) + y * sizeof(type)</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="类" class="heading-element"><span>类</span>
  <a href="#%e7%b1%bb" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>如果没有虚函数,类和结构体是没办法区分的.</p>
<h4 id="this指针" class="heading-element"><span>this指针</span>
  <a href="#this%e6%8c%87%e9%92%88" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Person</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nAge</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nHeight</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Person</span><span class="p">(){};</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">GetAge</span><span class="p">(){</span><span class="k">return</span> <span class="n">m_nAge</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">GetHeight</span><span class="p">(){</span><span class="k">return</span> <span class="n">m_nHeight</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nAge</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span> <span class="n">person</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/this%E6%8C%87%E9%92%88.png" alt="this指针" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/this%E6%8C%87%E9%92%88.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/this%E6%8C%87%E9%92%88.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/this%E6%8C%87%E9%92%88.png?size=large 2x" data-title="this指针" style="--width: 1206px;--aspect-ratio: 1206 / 633;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">32位this指针放在R0,64位this指针放在X0</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="对象作为参数" class="heading-element"><span>对象作为参数</span>
  <a href="#%e5%af%b9%e8%b1%a1%e4%bd%9c%e4%b8%ba%e5%8f%82%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Person</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nAge</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nHeight</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nWeight</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Person</span><span class="p">(){};</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nAge</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nWeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">showPerson</span><span class="p">(</span><span class="n">Person</span> <span class="n">person</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">person</span><span class="p">.</span><span class="n">m_nAge</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d %d %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="n">m_nAge</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="n">m_nHeight</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="n">m_nWeight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span> <span class="n">person</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">showPerson</span><span class="p">(</span><span class="n">person</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0.png" alt="对象作为参数" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0.png?size=large 2x" data-title="对象作为参数" style="--width: 1421px;--aspect-ratio: 1421 / 1010;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">将原类中的成员拷贝到一块内存区域,然后将该内存区域的首地址传进去</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="返回对象" class="heading-element"><span>返回对象</span>
  <a href="#%e8%bf%94%e5%9b%9e%e5%af%b9%e8%b1%a1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Person</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nAge</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nHeight</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nWeight</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Person</span><span class="p">(){};</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nAge</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nWeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person</span> <span class="nf">getPerson</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span> <span class="n">person</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">person</span><span class="p">.</span><span class="n">m_nAge</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">person</span><span class="p">.</span><span class="n">m_nHeight</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">person</span><span class="p">.</span><span class="n">m_nWeight</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>  <span class="n">person</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="n">getPerson</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d %d %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="n">m_nAge</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="n">m_nHeight</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="n">m_nWeight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1.png" alt="返回对象" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1.png?size=large 2x" data-title="返回对象" style="--width: 1424px;--aspect-ratio: 1424 / 857;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">多传一个存放类对象的地址进去</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="构造函数" class="heading-element"><span>构造函数</span>
  <a href="#%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Person</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">puts</span><span class="p">(</span><span class="s">&#34;Person()&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Person</span><span class="p">(){};</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">getAge</span><span class="p">(){</span><span class="k">return</span> <span class="n">m_nAge</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">getHeight</span><span class="p">(){</span><span class="k">return</span> <span class="n">m_nHeight</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nAge</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span> <span class="n">person</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0.png" alt="构造函数" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0.png?size=large 2x" data-title="构造函数" style="--width: 1586px;--aspect-ratio: 1586 / 924;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">类有虚函数,才可以识别构造函数
</span></span><span class="line"><span class="cl">在构造函数中很明显的特征就是要填虚表地址,
</span></span><span class="line"><span class="cl">还有一些特征比如说作用域内第一次调用,返回this指针</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="虚析构" class="heading-element"><span>虚析构</span>
  <a href="#%e8%99%9a%e6%9e%90%e6%9e%84" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Person</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">puts</span><span class="p">(</span><span class="s">&#34;Person()&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Person</span><span class="p">(){};</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">getAge</span><span class="p">(){</span><span class="k">return</span> <span class="n">m_nAge</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">getHeight</span><span class="p">(){</span><span class="k">return</span> <span class="n">m_nHeight</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nAge</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">-&gt;~</span><span class="n">Person</span><span class="p">();</span><span class="c1">//这种没有释放空间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>  <span class="c1">//这种要释放空间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%841.png" alt="虚析构1" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%841.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%841.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%841.png?size=large 2x" data-title="虚析构1" style="--width: 1561px;--aspect-ratio: 1561 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%842.png" alt="虚析构2" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%842.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%842.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E8%99%9A%E6%9E%90%E6%9E%842.png?size=large 2x" data-title="虚析构2" style="--width: 1412px;--aspect-ratio: 1412 / 886;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">VS编译的x86需要传参来判断是不是需要释放空间,
</span></span><span class="line"><span class="cl">而Clang编译的Arm却不是这样的,它生成了两个析构函数,一个释放空间,一个没有释放空间.
</span></span><span class="line"><span class="cl">这样的话,析构就不需要传参了.</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="单重继承" class="heading-element"><span>单重继承</span>
  <a href="#%e5%8d%95%e9%87%8d%e7%bb%a7%e6%89%bf" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4><p>源代码:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">BaseHuman</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">BaseHuman</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">m_nBase</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nBase</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Person</span> <span class="o">:</span> <span class="k">public</span> <span class="n">BaseHuman</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">puts</span><span class="p">(</span><span class="s">&#34;Person()&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Person</span><span class="p">()</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">getAge</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_nAge</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">getHeight</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_nHeight</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nAge</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">m_nHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Person</span> <span class="n">person</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>总结:</p>
<p><img loading="lazy" src="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8D%95%E9%87%8D%E7%BB%A7%E6%89%BF.png" alt="单重继承" srcset="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8D%95%E9%87%8D%E7%BB%A7%E6%89%BF.png?size=small, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8D%95%E9%87%8D%E7%BB%A7%E6%89%BF.png?size=medium 1.5x, /posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/images/Arm%E9%80%86%E5%90%91/%E5%8D%95%E9%87%8D%E7%BB%A7%E6%89%BF.png?size=large 2x" data-title="单重继承" style="--width: 1540px;--aspect-ratio: 1540 / 1002;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">父类构造在填虚表之前,
</span></span><span class="line"><span class="cl">成员对象构造在填虚表之后.</span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2021-09-12 00:00:00">更新于 2021-09-12&nbsp;</span>
      </div></div><div class="post-info-line">
        <div class="post-info-md"></div>
        <div class="post-info-share">
          <span></span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/android/" class="post-tag" title="标签 - Android">Android</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/android/android%E5%9F%BA%E7%A1%80/smali/" class="post-nav-item" rel="prev" title="Smali"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Smali</a>
      <a href="/posts/android/android%E5%9F%BA%E7%A1%80/dex/" class="post-nav-item" rel="next" title="Dex">Dex<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content always-active" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2020 - 2024</span><span class="author" itemprop="copyrightHolder">
              <a href="/">夏洛魂</a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><div id="mask"></div><div class="reading-progress-bar" style="left: 0;top: 0;--bg-progress: #0076ff;--bg-progress-dark: #fff;"></div><noscript>
    <div class="noscript-warning">该网站在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><link rel="stylesheet" href="/lib/pace/themes/purple/pace-theme-minimal.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/pace/pace.min.js" async defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":200},"comment":{"enable":false},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":true,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":1,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"version":"v0.3.8"};</script><script src="/js/theme.min.js" defer></script><script src="/js/custom.min.js" defer></script></body>
</html>
