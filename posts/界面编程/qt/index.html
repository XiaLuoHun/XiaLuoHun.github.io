<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Qt - 夏洛魂的个人博客</title><meta name="Description" content="个人笔记本"><meta property="og:title" content="Qt" />
<meta property="og:description" content="Qt 介绍 Qt安装 https://download.qt.io/ 目前我下载的是5.12.10版本 https://download.qt.io/archive/qt/5.12/5.12.10/ VS插件安装: https://download.qt.io/archive/vsaddin/ 第一个Qt项目 工程规范化 创建一个文件夹Lesson,然后分别创建bin、d" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://XiaLuoHun.github.io/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-10-13T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Qt"/>
<meta name="twitter:description" content="Qt 介绍 Qt安装 https://download.qt.io/ 目前我下载的是5.12.10版本 https://download.qt.io/archive/qt/5.12/5.12.10/ VS插件安装: https://download.qt.io/archive/vsaddin/ 第一个Qt项目 工程规范化 创建一个文件夹Lesson,然后分别创建bin、d"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://XiaLuoHun.github.io/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/" /><link rel="prev" href="https://XiaLuoHun.github.io/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/sdk/" /><link rel="next" href="https://XiaLuoHun.github.io/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/mfc/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Qt",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/XiaLuoHun.github.io\/posts\/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B\/qt\/"
        },"genre": "posts","keywords": "Qt","wordcount":  16302 ,
        "url": "https:\/\/XiaLuoHun.github.io\/posts\/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B\/qt\/","datePublished": "2021-10-13T00:00:00+00:00","dateModified": "2021-10-13T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "夏洛魂"},"author": {
                "@type": "Person",
                "name": "夏洛魂"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="夏洛魂的个人博客">主页</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于作者 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="夏洛魂的个人博客">主页</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于作者</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Qt</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>夏洛魂</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/"><i class="far fa-folder fa-fw"></i>界面编程</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-10-13">2021-10-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 16302 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 33 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#qt">Qt</a>
      <ul>
        <li><a href="#介绍">介绍</a>
          <ul>
            <li><a href="#qt安装">Qt安装</a></li>
            <li><a href="#第一个qt项目">第一个Qt项目</a>
              <ul>
                <li><a href="#工程规范化">工程规范化</a></li>
                <li><a href="#目录文件介绍">目录文件介绍</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#qmake">QMake</a>
          <ul>
            <li><a href="#qt程序编译步骤">Qt程序编译步骤</a></li>
            <li><a href="#jom或者make">jom或者make</a></li>
            <li><a href="#控制台手工编译qt程序">控制台手工编译Qt程序</a>
              <ul>
                <li><a href="#准备源文件">准备源文件</a>
                  <ul>
                    <li><a href="#func1h">func1.h</a></li>
                    <li><a href="#func1cpp">func1.cpp</a></li>
                    <li><a href="#maincpp">main.cpp</a></li>
                  </ul>
                </li>
                <li><a href="#编写pro文件">编写pro文件</a>
                  <ul>
                    <li><a href="#luoqtpro">LuoQt.pro</a></li>
                  </ul>
                </li>
                <li><a href="#编译">编译</a>
                  <ul>
                    <li><a href="#buildbat">build.bat</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#qt项目转vs工程">Qt项目转VS工程</a>
              <ul>
                <li><a href="#命令行">命令行</a></li>
                <li><a href="#利用插件打开pro项目">利用插件打开pro项目</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#信号槽">信号槽</a>
          <ul>
            <li><a href="#介绍-1">介绍</a></li>
            <li><a href="#原理">原理</a></li>
            <li><a href="#通过qtcreator设置信号槽">通过QtCreator设置信号槽</a></li>
            <li><a href="#手动添加槽函数">手动添加槽函数</a>
              <ul>
                <li><a href="#q_object">Q_OBJECT</a></li>
                <li><a href="#示例">示例</a></li>
              </ul>
            </li>
            <li><a href="#利用qtcreator绑定信号槽">利用QtCreator绑定信号槽</a>
              <ul>
                <li><a href="#将上述写的槽函数绑定到按钮的点击事件中">将上述写的槽函数绑定到按钮的点击事件中</a></li>
                <li><a href="#将上述写的信号函数和槽函数绑定起来">将上述写的信号函数和槽函数绑定起来</a></li>
                <li><a href="#qt生成代码分析">Qt生成代码分析</a></li>
              </ul>
            </li>
            <li><a href="#手动绑定信号槽">手动绑定信号槽</a></li>
          </ul>
        </li>
        <li><a href="#qthread">QThread</a></li>
        <li><a href="#qwidget">QWidget</a>
          <ul>
            <li><a href="#使用示例">使用示例</a></li>
            <li><a href="#相关函数">相关函数</a>
              <ul>
                <li><a href="#获取窗口坐标和尺寸">获取窗口坐标和尺寸</a></li>
                <li><a href="#窗口状态">窗口状态</a></li>
                <li><a href="#定制窗口">定制窗口</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#qstring">QString</a>
          <ul>
            <li><a href="#空判断">空判断</a></li>
            <li><a href="#字符串拼接">字符串拼接</a></li>
            <li><a href="#字符串格式化">字符串格式化</a></li>
            <li><a href="#单个整型字符串互转">单个整型字符串互转</a></li>
            <li><a href="#提取字符串">提取字符串</a></li>
            <li><a href="#字符串查找">字符串查找</a></li>
            <li><a href="#检查字符串是否以xxx开始或结束">检查字符串是否以XXX开始或结束</a></li>
            <li><a href="#字符串替换">字符串替换</a></li>
            <li><a href="#字符串两端删除空白符">字符串两端删除空白符</a></li>
            <li><a href="#分割字符串">分割字符串</a></li>
            <li><a href="#vs中解决中文乱码">VS中解决中文乱码</a>
              <ul>
                <li><a href="#法一">法一</a></li>
                <li><a href="#法二">法二</a></li>
                <li><a href="#法三">法三</a></li>
              </ul>
            </li>
            <li><a href="#编码方式转换">编码方式转换</a>
              <ul>
                <li><a href="#设置本地字符集">设置本地字符集</a></li>
                <li><a href="#gbk-utf-8">GBK-&gt;UTF-8</a></li>
                <li><a href="#utf-8-gbk">UTF-8-&gt;GBK</a></li>
              </ul>
            </li>
            <li><a href="#qstring与winapi">QString与WinAPI</a></li>
          </ul>
        </li>
        <li><a href="#qlabel">QLabel</a>
          <ul>
            <li><a href="#主要成员函数">主要成员函数</a></li>
            <li><a href="#播放gif动画">播放Gif动画</a></li>
            <li><a href="#文本格式">文本格式</a></li>
            <li><a href="#url链接">Url链接</a></li>
            <li><a href="#属性设置">属性设置</a></li>
          </ul>
        </li>
        <li><a href="#qpushbutton">QPushButton</a>
          <ul>
            <li><a href="#事件信号">事件信号</a></li>
            <li><a href="#设置快捷键">设置快捷键</a>
              <ul>
                <li><a href="#法一-1">法一</a></li>
                <li><a href="#法二-1">法二</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#qlineedit">QLineEdit</a>
          <ul>
            <li><a href="#常用函数">常用函数</a></li>
            <li><a href="#事件信号-1">事件信号</a></li>
            <li><a href="#格式掩码">格式掩码</a></li>
            <li><a href="#格式校验">格式校验</a>
              <ul>
                <li><a href="#设置有效范围">设置有效范围</a></li>
                <li><a href="#校验是否有效">校验是否有效</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#布局">布局</a>
          <ul>
            <li><a href="#遍历qobject子节点">遍历QObject子节点</a></li>
            <li><a href="#递归遍历qobject子节点">递归遍历QObject子节点</a></li>
            <li><a href="#qsizepolicy布局尺寸策略分析">QSizePolicy布局尺寸策略分析</a>
              <ul>
                <li><a href="#sizehint推荐尺寸">SizeHint推荐尺寸</a></li>
                <li><a href="#qsizepolicypolicyflag">QSizePolicy::PolicyFlag</a></li>
                <li><a href="#qsizepolicypolicy">QSizePolicy::Policy</a></li>
              </ul>
            </li>
            <li><a href="#qvboxlayoutqhboxlayout">QVBoxlayout,QHBoxLayout</a></li>
            <li><a href="#qgridlayout">QGridLayout</a></li>
            <li><a href="#qformlayout">QFormLayout</a>
              <ul>
                <li><a href="#luoqth">luoqt.h</a></li>
                <li><a href="#luoqtcpp">luoqt.cpp</a></li>
                <li><a href="#maincpp-1">main.cpp</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#qcheckbox">QCheckBox</a>
          <ul>
            <li><a href="#常用函数-1">常用函数</a></li>
            <li><a href="#事件信号-2">事件信号</a></li>
          </ul>
        </li>
        <li><a href="#qbuttongroup">QButtonGroup</a>
          <ul>
            <li><a href="#常用信号">常用信号</a></li>
            <li><a href="#示例-1">示例</a>
              <ul>
                <li><a href="#luoqth-1">luoqt.h</a></li>
                <li><a href="#luoqtcpp-1">luoqt.cpp</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#qradiobutton">QRadioButton</a>
          <ul>
            <li><a href="#示例-2">示例</a>
              <ul>
                <li><a href="#luoqth-2">luoqt.h</a></li>
                <li><a href="#luoqtcpp-2">luoqt.cpp</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#qcombobox">QComboBox</a>
          <ul>
            <li><a href="#常用函数-2">常用函数</a></li>
            <li><a href="#事件信号-3">事件信号</a></li>
            <li><a href="#示例-3">示例</a>
              <ul>
                <li><a href="#luoqth-3">luoqt.h</a></li>
                <li><a href="#luoqtcpp-3">luoqt.cpp</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#qslider">QSlider</a>
          <ul>
            <li><a href="#属性">属性</a></li>
            <li><a href="#事件信号-4">事件信号</a></li>
            <li><a href="#重载鼠标事件">重载鼠标事件</a></li>
          </ul>
        </li>
        <li><a href="#qlistwidget">QListWidget</a>
          <ul>
            <li><a href="#属性-1">属性</a></li>
            <li><a href="#常用函数-3">常用函数</a></li>
            <li><a href="#事件信号-5">事件信号</a></li>
            <li><a href="#示例-4">示例</a></li>
          </ul>
        </li>
        <li><a href="#qtablewidget">QTableWidget</a>
          <ul>
            <li><a href="#属性-2">属性</a></li>
            <li><a href="#事件信号-6">事件信号</a></li>
            <li><a href="#清空内容">清空内容</a></li>
            <li><a href="#插入标题">插入标题</a></li>
            <li><a href="#插入数据">插入数据</a></li>
            <li><a href="#获取选中数据">获取选中数据</a></li>
            <li><a href="#删除数据">删除数据</a></li>
            <li><a href="#源代码">源代码</a></li>
          </ul>
        </li>
        <li><a href="#qtreewidget">QTreeWidget</a>
          <ul>
            <li><a href="#属性-3">属性</a></li>
            <li><a href="#常用函数-4">常用函数</a></li>
            <li><a href="#槽函数">槽函数</a></li>
            <li><a href="#事件信号-7">事件信号</a></li>
            <li><a href="#清空内容-1">清空内容</a></li>
            <li><a href="#插入标题-1">插入标题</a></li>
            <li><a href="#插入数据-1">插入数据</a></li>
          </ul>
        </li>
        <li><a href="#qdialog">QDialog</a>
          <ul>
            <li><a href="#常用函数-5">常用函数</a></li>
            <li><a href="#槽函数-1">槽函数</a></li>
            <li><a href="#自定义messagebox">自定义MessageBox</a></li>
            <li><a href="#qprogressbar应用">QProgressBar应用</a>
              <ul>
                <li><a href="#新建一个线程类模拟做事">新建一个线程类,模拟做事</a>
                  <ul>
                    <li><a href="#luothreadh">LuoThread.h</a></li>
                    <li><a href="#luothreadcpp">LuoThread.cpp</a></li>
                  </ul>
                </li>
                <li><a href="#新建一个对话框类显示进度">新建一个对话框类,显示进度</a>
                  <ul>
                    <li><a href="#luoprogressdialogh">LuoProgressDialog.h</a></li>
                    <li><a href="#luoprogressdialogcpp">LuoProgressDialog.cpp</a></li>
                  </ul>
                </li>
                <li><a href="#main中调用">Main中调用</a></li>
              </ul>
            </li>
            <li><a href="#源代码-1">源代码</a></li>
          </ul>
        </li>
        <li><a href="#qt菜单">Qt菜单</a>
          <ul>
            <li><a href="#widget创建菜单">Widget创建菜单</a>
              <ul>
                <li><a href="#添加菜单">添加菜单</a></li>
                <li><a href="#事件信号-8">事件信号</a></li>
                <li><a href="#动态产生菜单">动态产生菜单</a></li>
                <li><a href="#菜单单选和多选">菜单单选和多选</a></li>
                <li><a href="#按钮菜单">按钮菜单</a></li>
                <li><a href="#工具栏">工具栏</a></li>
                <li><a href="#状态栏">状态栏</a></li>
              </ul>
            </li>
            <li><a href="#qmainwindow">QMainWindow</a>
              <ul>
                <li><a href="#菜单栏">菜单栏</a></li>
                <li><a href="#工具栏-1">工具栏</a></li>
                <li><a href="#状态栏-1">状态栏</a></li>
              </ul>
            </li>
            <li><a href="#源码">源码</a></li>
          </ul>
        </li>
        <li><a href="#qt事件">Qt事件</a>
          <ul>
            <li><a href="#qevent">QEvent</a>
              <ul>
                <li><a href="#重载事件">重载事件</a></li>
                <li><a href="#示例-5">示例</a></li>
              </ul>
            </li>
            <li><a href="#键盘事件">键盘事件</a>
              <ul>
                <li><a href="#重载事件-1">重载事件</a></li>
                <li><a href="#示例-6">示例</a></li>
              </ul>
            </li>
            <li><a href="#鼠标事件">鼠标事件</a>
              <ul>
                <li><a href="#重载事件-2">重载事件</a></li>
                <li><a href="#坐标">坐标</a></li>
                <li><a href="#按键">按键</a></li>
              </ul>
            </li>
            <li><a href="#窗口大小改变">窗口大小改变</a>
              <ul>
                <li><a href="#重载事件-3">重载事件</a></li>
                <li><a href="#示例-7">示例</a></li>
              </ul>
            </li>
            <li><a href="#源代码-2">源代码</a></li>
          </ul>
        </li>
        <li><a href="#qpainter">QPainter</a>
          <ul>
            <li><a href="#重载事件-4">重载事件</a></li>
            <li><a href="#绘制文本">绘制文本</a></li>
            <li><a href="#绘制线">绘制线</a></li>
          </ul>
        </li>
        <li><a href="#qt配置">Qt配置</a>
          <ul>
            <li><a href="#vs2019黑色方案">VS2019黑色方案</a></li>
            <li><a href="#控制台">控制台</a>
              <ul>
                <li><a href="#qtcreator">QtCreator</a></li>
                <li><a href="#vs">VS</a></li>
              </ul>
            </li>
            <li><a href="#vs番茄插件设置">VS番茄插件设置</a></li>
            <li><a href="#环境变量">环境变量</a></li>
            <li><a href="#vs工程标红">VS工程标红</a></li>
          </ul>
        </li>
        <li><a href="#qss">Qss</a></li>
        <li><a href="#qt程序打包">Qt程序打包</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="qt">Qt</h1>
<h2 id="介绍">介绍</h2>
<h3 id="qt安装">Qt安装</h3>
<p><a href="https://download.qt.io/" target="_blank" rel="noopener noreffer">https://download.qt.io/</a></p>
<p>目前我下载的是5.12.10版本</p>
<p><a href="https://download.qt.io/archive/qt/5.12/5.12.10/" target="_blank" rel="noopener noreffer">https://download.qt.io/archive/qt/5.12/5.12.10/</a></p>
<p>VS插件安装:</p>
<p><a href="https://download.qt.io/archive/vsaddin/" target="_blank" rel="noopener noreffer">https://download.qt.io/archive/vsaddin/</a></p>
<h3 id="第一个qt项目">第一个Qt项目</h3>
<h4 id="工程规范化">工程规范化</h4>
<ol>
<li>创建一个文件夹<strong>Lesson</strong>,然后分别创建<strong>bin</strong>、<strong>doc</strong>、<strong>lib</strong>、<strong>src</strong>文件夹.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">D:.
</span></span><span class="line"><span class="cl">│  
</span></span><span class="line"><span class="cl">└─Lesson
</span></span><span class="line"><span class="cl">    ├─bin
</span></span><span class="line"><span class="cl">    ├─doc
</span></span><span class="line"><span class="cl">    ├─lib
</span></span><span class="line"><span class="cl">    └─src
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>新建一个qt工程,目录放在<strong>src</strong>中.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/Qt%e5%88%9b%e5%bb%ba%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%b7%a5%e7%a8%8b.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%B7%A5%E7%A8%8B.png, images/Qt%e5%88%9b%e5%bb%ba%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%b7%a5%e7%a8%8b.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%B7%A5%E7%A8%8B.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%B7%A5%E7%A8%8B.png"
        title="Qt创建第一个工程" /></p>
<h4 id="目录文件介绍">目录文件介绍</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="nl">D</span><span class="p">:.</span>
</span></span><span class="line"><span class="cl"><span class="err">│</span>  
</span></span><span class="line"><span class="cl"><span class="err">├─</span><span class="n">bin</span>
</span></span><span class="line"><span class="cl"><span class="err">├─</span><span class="n">doc</span>
</span></span><span class="line"><span class="cl"><span class="err">├─</span><span class="n">lib</span>
</span></span><span class="line"><span class="cl"><span class="err">└─</span><span class="n">src</span>
</span></span><span class="line"><span class="cl">    <span class="err">├─</span><span class="n">build</span><span class="o">-</span><span class="n">QtTest</span><span class="o">-</span><span class="n">Desktop_Qt_5_12_10_MSVC2017_32bit</span><span class="o">-</span><span class="n">Debug</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>  <span class="p">.</span><span class="n">qmake</span><span class="p">.</span><span class="n">stash</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>  <span class="n">Makefile</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>  <span class="n">Makefile</span><span class="p">.</span><span class="n">Debug</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>  <span class="n">Makefile</span><span class="p">.</span><span class="n">Release</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>  <span class="n">ui_widget</span><span class="p">.</span><span class="n">h</span>           <span class="c1">//这是qt设计器代码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="err">│</span>  <span class="err">│</span>  
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">├─</span><span class="n">debug</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">main</span><span class="p">.</span><span class="n">obj</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">moc_predefs</span><span class="p">.</span><span class="n">h</span>     <span class="c1">//qt中与信号槽相关的代码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="err">│</span>  <span class="err">│</span>      <span class="n">moc_widget</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">moc_widget</span><span class="p">.</span><span class="n">obj</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">QtTest</span><span class="p">.</span><span class="n">exe</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">QtTest</span><span class="p">.</span><span class="n">ilk</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">QtTest</span><span class="p">.</span><span class="n">pdb</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">QtTest</span><span class="p">.</span><span class="n">vc</span><span class="p">.</span><span class="n">pdb</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      <span class="n">widget</span><span class="p">.</span><span class="n">obj</span>
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">│</span>      
</span></span><span class="line"><span class="cl">    <span class="err">│</span>  <span class="err">└─</span><span class="n">release</span>
</span></span><span class="line"><span class="cl">    <span class="err">└─</span><span class="n">QtTest</span>
</span></span><span class="line"><span class="cl">            <span class="n">main</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl">            <span class="n">QtTest</span><span class="p">.</span><span class="n">pro</span>            <span class="c1">//这是qt的项目文件,用来生成makefile文件.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">QtTest</span><span class="p">.</span><span class="n">pro</span><span class="p">.</span><span class="n">user</span>       <span class="c1">//这是qt的编译环境,可删掉,重新指定编译环境.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">widget</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl">            <span class="n">widget</span><span class="p">.</span><span class="n">h</span>
</span></span><span class="line"><span class="cl">            <span class="n">widget</span><span class="p">.</span><span class="n">ui</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>需要注意的是</strong>,在qt中创建的.h .cpp文件的文件名要小写,为了跨平台.</p>
<p>在windows平台,文件名大小写不敏感,但在其他平台大小写可能是敏感的.</p>
<h2 id="qmake">QMake</h2>
<h3 id="qt程序编译步骤">Qt程序编译步骤</h3>
<ol>
<li>编译pro生成makefile</li>
<li>jom或make编译makefile</li>
</ol>
<h3 id="jom或者make">jom或者make</h3>
<p>jom下载链接:https://wiki.qt.io/Jom</p>
<ul>
<li>生成界面源码</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">uic.exe widget.ui -o ui_widget.h
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>生成信号槽代码</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">moc.exe widget.h moc_widget.cpp
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="控制台手工编译qt程序">控制台手工编译Qt程序</h3>
<p>首先要配置要qmake和jom的环境变量.</p>
<h4 id="准备源文件">准备源文件</h4>
<h5 id="func1h">func1.h</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">func1</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="func1cpp">func1.cpp</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;func1.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">func1</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;func1</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="maincpp">main.cpp</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;func1.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">func1</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;main</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">system</span><span class="p">(</span><span class="s">&#34;pause&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="编写pro文件">编写pro文件</h4>
<h5 id="luoqtpro">LuoQt.pro</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">SOURCES</span> <span class="o">+=</span> \
</span></span><span class="line"><span class="cl">    <span class="n">main</span><span class="p">.</span><span class="n">cpp</span> \
</span></span><span class="line"><span class="cl">    <span class="n">func1</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">HEADERS</span> <span class="o">+=</span> \
</span></span><span class="line"><span class="cl">    <span class="n">func1</span><span class="p">.</span><span class="n">h</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">CONFIG</span> <span class="o">+=</span> <span class="n">console</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这一步也可以利用qmake自动生成</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//命令行执行以下语句,添加VC环境
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s">&#34;D:/VS2019/VS2019/VC/Auxiliary/Build/vcvarsx86_amd64.bat&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//执行qmake语句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">qmake</span> <span class="o">-</span><span class="n">project</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="编译">编译</h4>
<h5 id="buildbat">build.bat</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">call</span> <span class="s">&#34;D:/VS2019/VS2019/VC/Auxiliary/Build/vcvarsx86_amd64.bat&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">qmake</span> <span class="o">-</span><span class="n">o</span> <span class="n">makefile</span> <span class="n">LuoQt</span><span class="p">.</span><span class="n">pro</span>
</span></span><span class="line"><span class="cl"><span class="n">jom</span> <span class="o">/</span><span class="n">f</span> <span class="n">makefile</span>
</span></span><span class="line"><span class="cl"><span class="n">pause</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%BC%96%E8%AF%91Qt.7z" rel="">控制台编译Qt.7z</a></p>
<h3 id="qt项目转vs工程">Qt项目转VS工程</h3>
<p>有两种方式.</p>
<h4 id="命令行">命令行</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//添加VC环境
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s">&#34;D:/VS2019/VS2019/VC/Auxiliary/Build/vcvarsx86_amd64.bat&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//生成vcxproj文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">qmake</span> <span class="o">-</span><span class="n">tp</span> <span class="n">vc</span> <span class="n">luoQt</span><span class="p">.</span><span class="n">pro</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="利用插件打开pro项目">利用插件打开pro项目</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/VS%e6%8f%92%e4%bb%b6%e6%89%93%e5%bc%80pro%e9%a1%b9%e7%9b%ae.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VS%E6%8F%92%E4%BB%B6%E6%89%93%E5%BC%80pro%E9%A1%B9%E7%9B%AE.png, images/VS%e6%8f%92%e4%bb%b6%e6%89%93%e5%bc%80pro%e9%a1%b9%e7%9b%ae.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VS%E6%8F%92%E4%BB%B6%E6%89%93%E5%BC%80pro%E9%A1%B9%E7%9B%AE.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VS%E6%8F%92%E4%BB%B6%E6%89%93%E5%BC%80pro%E9%A1%B9%E7%9B%AE.png"
        title="VS插件打开pro项目" /></p>
<h2 id="信号槽">信号槽</h2>
<h3 id="介绍-1">介绍</h3>
<p><strong>信号函数</strong>:只发送不需要知道接收者.</p>
<p><strong>槽函数</strong>:只接收不管通信.在主线程中调用,不要在其他线程中调,会崩!!!</p>
<p>QObject来绑定.</p>
<h3 id="原理">原理</h3>
<ol>
<li>绑定信号函数与槽函数.</li>
<li>调用信号函数(将信号写入队列中).</li>
<li>主线程从队列中获取信号.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e4%bf%a1%e5%8f%b7%e6%a7%bd%e5%85%b3%e7%b3%bb%e5%9b%be.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E5%85%B3%E7%B3%BB%E5%9B%BE.png, images/%e4%bf%a1%e5%8f%b7%e6%a7%bd%e5%85%b3%e7%b3%bb%e5%9b%be.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E5%85%B3%E7%B3%BB%E5%9B%BE.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E5%85%B3%E7%B3%BB%E5%9B%BE.png"
        title="信号槽关系图" /></p>
<h3 id="通过qtcreator设置信号槽">通过QtCreator设置信号槽</h3>
<p>有以下两种方式:</p>
<ol>
<li>拖动.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e4%bf%a1%e5%8f%b7%e6%a7%bd%e8%ae%be%e7%bd%ae1.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E8%AE%BE%E7%BD%AE1.png, images/%e4%bf%a1%e5%8f%b7%e6%a7%bd%e8%ae%be%e7%bd%ae1.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E8%AE%BE%E7%BD%AE1.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E8%AE%BE%E7%BD%AE1.png"
        title="信号槽设置1" /></p>
<ol start="2">
<li>添加,点下方的加号进行添加.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e4%bf%a1%e5%8f%b7%e6%a7%bd%e8%ae%be%e7%bd%ae2.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E8%AE%BE%E7%BD%AE2.png, images/%e4%bf%a1%e5%8f%b7%e6%a7%bd%e8%ae%be%e7%bd%ae2.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E8%AE%BE%E7%BD%AE2.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E6%A7%BD%E8%AE%BE%E7%BD%AE2.png"
        title="信号槽设置2" /></p>
<h3 id="手动添加槽函数">手动添加槽函数</h3>
<h4 id="q_object">Q_OBJECT</h4>
<p>如果一个类中,我们添加了信号槽,我们就要定义<strong>Q_OBJECT</strong>这个宏,这样的话,QT的moc程序才会帮我们生成代码.</p>
<h4 id="示例">示例</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">luoqt</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Q_NULLPTR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">//信号函数,只声明即可
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">signals</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">TstSignal</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">//槽函数声明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">TstSlot</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ui</span><span class="o">::</span><span class="n">luoqtClass</span> <span class="n">ui</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//槽函数定义
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">TstSlot</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Hello TstSlot</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="利用qtcreator绑定信号槽">利用QtCreator绑定信号槽</h3>
<h4 id="将上述写的槽函数绑定到按钮的点击事件中">将上述写的槽函数绑定到按钮的点击事件中</h4>
<ol>
<li>新建一个按钮,利用QtCreator拖动来设置.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e6%8c%89%e9%92%ae%e4%ba%8b%e4%bb%b61.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B61.png, images/%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e6%8c%89%e9%92%ae%e4%ba%8b%e4%bb%b61.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B61.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B61.png"
        title="槽函数绑定到按钮事件1" /></p>
<ol start="2">
<li>点击上述编辑按钮后,添加新建的槽函数.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e6%8c%89%e9%92%ae%e4%ba%8b%e4%bb%b62.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B62.png, images/%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e6%8c%89%e9%92%ae%e4%ba%8b%e4%bb%b62.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B62.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B62.png"
        title="槽函数绑定到按钮事件2" /></p>
<ol start="3">
<li>将按钮点击和刚创建的槽函数绑定起来.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e6%8c%89%e9%92%ae%e4%ba%8b%e4%bb%b63.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B63.png, images/%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e6%8c%89%e9%92%ae%e4%ba%8b%e4%bb%b63.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B63.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E5%88%B0%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B63.png"
        title="槽函数绑定到按钮事件3" /></p>
<p>这样的话,就可以了,测试的时候,我们将控制台打开.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e5%b7%a5%e7%a8%8b%e6%89%93%e5%bc%80%e6%8e%a7%e5%88%b6%e5%8f%b0.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%B7%A5%E7%A8%8B%E6%89%93%E5%BC%80%E6%8E%A7%E5%88%B6%E5%8F%B0.png, images/%e5%b7%a5%e7%a8%8b%e6%89%93%e5%bc%80%e6%8e%a7%e5%88%b6%e5%8f%b0.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%B7%A5%E7%A8%8B%E6%89%93%E5%BC%80%E6%8E%A7%E5%88%B6%E5%8F%B0.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%B7%A5%E7%A8%8B%E6%89%93%E5%BC%80%E6%8E%A7%E5%88%B6%E5%8F%B0.png"
        title="工程打开控制台" /></p>
<h4 id="将上述写的信号函数和槽函数绑定起来">将上述写的信号函数和槽函数绑定起来</h4>
<ol>
<li>利用QtCreator拖动来设置,在空白的地方拖一下就可以了.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e4%bf%a1%e5%8f%b7%e5%87%bd%e6%95%b0%e5%92%8c%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a1.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A1.png, images/%e4%bf%a1%e5%8f%b7%e5%87%bd%e6%95%b0%e5%92%8c%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a1.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A1.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A1.png"
        title="信号函数和槽函数绑定1" /></p>
<ol start="2">
<li>添加信号函数和槽函数.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e4%bf%a1%e5%8f%b7%e5%87%bd%e6%95%b0%e5%92%8c%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a2.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A2.png, images/%e4%bf%a1%e5%8f%b7%e5%87%bd%e6%95%b0%e5%92%8c%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a2.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A2.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A2.png"
        title="信号函数和槽函数绑定2" /></p>
<ol start="3">
<li>绑定.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e4%bf%a1%e5%8f%b7%e5%87%bd%e6%95%b0%e5%92%8c%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a3.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A3.png, images/%e4%bf%a1%e5%8f%b7%e5%87%bd%e6%95%b0%e5%92%8c%e6%a7%bd%e5%87%bd%e6%95%b0%e7%bb%91%e5%ae%9a3.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A3.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E4%BF%A1%E5%8F%B7%E5%87%BD%E6%95%B0%E5%92%8C%E6%A7%BD%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A3.png"
        title="信号函数和槽函数绑定3" /></p>
<h4 id="qt生成代码分析">Qt生成代码分析</h4>
<p>上面这些操作Qt帮我们生成了很多的代码,</p>
<ul>
<li>生成Connect代码.</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QT%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%811.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%811.png, images/QT%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%811.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%811.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%811.png"
        title="QT生成代码1" /></p>
<ul>
<li>将信号和槽函数转化为字符串.</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QT%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%812.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%812.png, images/QT%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%812.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%812.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%812.png"
        title="QT生成代码2" /></p>
<ul>
<li>moc生成的槽函数调用代码.</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QT%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%813.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%813.png, images/QT%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%813.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%813.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QT%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%813.png"
        title="QT生成代码3" /></p>
<h3 id="手动绑定信号槽">手动绑定信号槽</h3>
<ol>
<li>新建一个按钮.</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e6%89%8b%e5%8a%a8%e7%bb%91%e5%ae%9a%e4%bf%a1%e5%8f%b7%e6%a7%bd1.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%89%8B%E5%8A%A8%E7%BB%91%E5%AE%9A%E4%BF%A1%E5%8F%B7%E6%A7%BD1.png, images/%e6%89%8b%e5%8a%a8%e7%bb%91%e5%ae%9a%e4%bf%a1%e5%8f%b7%e6%a7%bd1.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%89%8B%E5%8A%A8%E7%BB%91%E5%AE%9A%E4%BF%A1%E5%8F%B7%E6%A7%BD1.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%89%8B%E5%8A%A8%E7%BB%91%E5%AE%9A%E4%BF%A1%E5%8F%B7%E6%A7%BD1.png"
        title="手动绑定信号槽1" /></p>
<ol start="2">
<li>添加信号和槽函数.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//luoqt.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">luoqt</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Q_NULLPTR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">//信号函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">signals</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">TstSignal</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//槽函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">TstSlot</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">TstConnect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ui</span><span class="o">::</span><span class="n">luoqtClass</span> <span class="n">ui</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>使用connect函数进行绑定.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//luoqt.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">luoqt</span><span class="o">::</span><span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//使用connect进行绑定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//发送者 信号函数 接收者 槽函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">btn_connect</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">TstSignal</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">TstConnect</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">TstSlot</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Hello TstSlot</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">TstConnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Hello TstConnect</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qthread">QThread</h2>
<p>新建一个类,继承QThread,重写run函数即可.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QThread&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">LuoThread</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QThread</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//休眠5s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QThread</span><span class="o">::</span><span class="n">msleep</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//调用,调start,就会自动调用上述的run函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">LuoThread</span> <span class="n">luoThread</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">luoThread</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//或者使用下面这种
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">(</span><span class="k">new</span> <span class="n">LuoThread</span><span class="p">())</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qwidget">QWidget</h2>
<p>所有用户界面对象的基类.</p>
<h3 id="使用示例">使用示例</h3>
<p>假设我们要实现的是,程序启动的时候,运行的窗口是我们新建的类所关联的一个窗口,然后5s之后窗口隐藏.</p>
<ol>
<li>新建一个类,继承QWidget.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//LuoQWidget.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;QWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">LuoQWidget</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoQWidget</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="o">~</span><span class="n">LuoQWidget</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nl">signals</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">LuoHide</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//LuoQWidget.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">LuoQWidget</span><span class="o">::</span><span class="n">LuoQWidget</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//手动绑定信号槽
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">LuoHide</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">hide</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">LuoQWidget</span><span class="o">::~</span><span class="n">LuoQWidget</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>新建一个类,继承QThread.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//LuoThread.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&#34;LuoQWidget.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QThread&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">LuoThread</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QThread</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoThread</span><span class="p">(</span><span class="n">LuoQWidget</span><span class="o">*</span> <span class="n">pQWidget</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">m_pQWidget</span> <span class="o">=</span> <span class="n">pQWidget</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//休眠5s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QThread</span><span class="o">::</span><span class="n">msleep</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//发信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">m_pQWidget</span><span class="o">-&gt;</span><span class="n">LuoHide</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoQWidget</span><span class="o">*</span> <span class="n">m_pQWidget</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>main函数中进行调用.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//main.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;QtWidgets/QApplication&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;LuoQWidget.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;LuoThread.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">LuoQWidget</span> <span class="n">w</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">w</span><span class="p">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s">&#34;LuoQWidget&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">w</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">LuoThread</span> <span class="n">luoThread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">w</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">luoThread</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里需要注意的是,不要在其他线程中直接调用槽函数,否则会崩,我们可以绑定一个信号和槽函数,然后在其他线程中发信号.</p>
<h3 id="相关函数">相关函数</h3>
<h4 id="获取窗口坐标和尺寸">获取窗口坐标和尺寸</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QRect</span> <span class="o">&amp;</span><span class="n">QWidget</span><span class="o">::</span><span class="n">geometry</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QWidget</span><span class="o">::</span><span class="n">setGeometry</span><span class="p">(</span><span class="kt">int</span> <span class="n">ax</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ay</span><span class="p">,</span> <span class="kt">int</span> <span class="n">aw</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ah</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">QWidget</span> <span class="n">w</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">w</span><span class="p">.</span><span class="n">x</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">w</span><span class="p">.</span><span class="n">y</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">w</span><span class="p">.</span><span class="n">width</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">w</span><span class="p">.</span><span class="n">height</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QWidget</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="kt">int</span> <span class="n">ax</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ay</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QWidget</span><span class="o">::</span><span class="n">resize</span><span class="p">(</span><span class="kt">int</span> <span class="n">w</span><span class="p">,</span> <span class="kt">int</span> <span class="n">h</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="窗口状态">窗口状态</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setWindowState</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">WindowStates</span> <span class="n">state</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//参数如下
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">enum</span> <span class="nc">WindowState</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">WindowNoState</span>    <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">WindowMinimized</span>  <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">WindowMaximized</span>  <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">WindowFullScreen</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">WindowActive</span>     <span class="o">=</span> <span class="mh">0x00000008</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Qt定义的槽函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">showMinimized</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">showMaximized</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">showFullScreen</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">showNormal</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="定制窗口">定制窗口</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">QWidget</span> <span class="n">w</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//无边框
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">w</span><span class="p">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">FramelessWindowHint</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//去掉最大最小化按钮
</span></span></span><span class="line"><span class="cl"><span class="c1">//w.setWindowFlag(Qt::WindowMinimizeButtonHint, false);
</span></span></span><span class="line"><span class="cl"><span class="c1">//w.setWindowFlag(Qt::WindowMaximizeButtonHint, false);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//标题栏保留,去除所有按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">w</span><span class="p">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">WindowTitleHint</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">CustomizeWindowHint</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">w</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qstring">QString</h2>
<h3 id="空判断">空判断</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">qstr</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;qstr is empty</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="字符串拼接">字符串拼接</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr1</span> <span class="o">=</span> <span class="s">&#34;Luo&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr2</span> <span class="o">=</span> <span class="s">&#34;Hun&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">qstr1</span> <span class="o">+=</span> <span class="n">qstr2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//qstr1, LuoHun
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="字符串格式化">字符串格式化</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">qstr</span> <span class="o">=</span> <span class="n">QString</span><span class="p">(</span><span class="s">&#34;name = %1, arg = %2 %3&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="s">&#34;Luo&#34;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="mi">56</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//qstr, name = Luo, arg = 56 a
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="单个整型字符串互转">单个整型字符串互转</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//单个整型转字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="n">qstrNum</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="mi">5566</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//字符串转整型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">qstrNum</span><span class="p">.</span><span class="n">toInt</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="提取字符串">提取字符串</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34;Luo5566,Hun8899&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstrLeft</span> <span class="o">=</span> <span class="n">qstr</span><span class="p">.</span><span class="n">left</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//qstrLeft, Luo55
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstrMid</span> <span class="o">=</span> <span class="n">qstr</span><span class="p">.</span><span class="n">mid</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//qstrMid, o5566,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstrRight</span> <span class="o">=</span> <span class="n">qstr</span><span class="p">.</span><span class="n">right</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//qstrRight, n8899
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="字符串查找">字符串查找</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34;Luo5566,Hun8899&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">qstr</span><span class="p">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s">&#34;55&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//n, 3
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="检查字符串是否以xxx开始或结束">检查字符串是否以XXX开始或结束</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34;Luo5566Hun&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">qstr</span><span class="p">.</span><span class="n">startsWith</span><span class="p">(</span><span class="s">&#34;luo&#34;</span><span class="p">,</span> <span class="n">Qt</span><span class="o">::</span><span class="n">CaseInsensitive</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;startsWith True</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">qstr</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">&#34;Hun&#34;</span><span class="p">,</span> <span class="n">Qt</span><span class="o">::</span><span class="n">CaseSensitive</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;endsWith True</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="字符串替换">字符串替换</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34;Luo5566,5566Hun8899&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr1</span> <span class="o">=</span> <span class="n">qstr</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#34;5566&#34;</span><span class="p">,</span> <span class="s">&#34;2233&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//qstr1, Luo2233,2233Hun8899
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="字符串两端删除空白符">字符串两端删除空白符</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34; Luo5566,Hun8899 &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr1</span> <span class="o">=</span> <span class="n">qstr</span><span class="p">.</span><span class="n">trimmed</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//qstr1, Luo5566,Hun8899
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分割字符串">分割字符串</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34;Luo5566:5566Hun:8899&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">QStringList</span> <span class="n">qLst</span> <span class="o">=</span> <span class="n">qstr</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#34;:&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="n">QString</span> <span class="nl">str</span><span class="p">:</span> <span class="n">qLst</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="n">toStdString</span><span class="p">().</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//Luo5566
</span></span></span><span class="line"><span class="cl"><span class="c1">//5566Hun
</span></span></span><span class="line"><span class="cl"><span class="c1">//8899
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="vs中解决中文乱码">VS中解决中文乱码</h3>
<p>QString内部采用UTF-16编码,构造函数QString::QString(const char *str)默认使用fromUtf8(),将str所指的执行字符集从UTF-8转码成UTF-16.</p>
<p>VS默认创建的源码文件格式为GBK.</p>
<p>QtCreator默认创建的源码文件格式为UTF-8.</p>
<h4 id="法一">法一</h4>
<p>使用QStringLiteral</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDebug&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QStringLiteral&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QMessageBox&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QWidget</span> <span class="n">w</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;中文&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">qstr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">QMessageBox</span><span class="o">::</span><span class="n">information</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&#34;Luo&#34;</span><span class="p">,</span> <span class="n">qstr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">w</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>需要注意的是</strong>,如果源文件本身的格式为UTF-8,再用QStringLiteral这个宏进行转换就会产生乱码.</p>
<h4 id="法二">法二</h4>
<p>手动将该源文件格式转换为UTF-8</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDebug&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QStringLiteral&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QMessageBox&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QWidget</span> <span class="n">w</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34;中文&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">qstr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">QMessageBox</span><span class="o">::</span><span class="n">information</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&#34;Luo&#34;</span><span class="p">,</span> <span class="n">qstr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">w</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="法三">法三</h4>
<p>使用代码修改源文件字符集为UTF-8</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDebug&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QStringLiteral&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QMessageBox&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#pragma execution_character_set(&#34;utf-8&#34;)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QWidget</span> <span class="n">w</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="s">&#34;中文&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">qstr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">QMessageBox</span><span class="o">::</span><span class="n">information</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&#34;Luo&#34;</span><span class="p">,</span> <span class="n">qstr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">w</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="编码方式转换">编码方式转换</h3>
<h4 id="设置本地字符集">设置本地字符集</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QTextCodec&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="n">QTextCodec</span><span class="o">::</span><span class="n">setCodecForLocale</span><span class="p">(</span><span class="n">QTextCodec</span><span class="o">::</span><span class="n">codecForName</span><span class="p">(</span><span class="s">&#34;GBK&#34;</span><span class="p">));</span><span class="c1">//或UTF-8
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="gbk-utf-8">GBK-&gt;UTF-8</h4>
<p>通常在<strong>VS</strong>中使用<strong>QString::fromLocal8Bit</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">char</span><span class="o">*</span> <span class="n">szSrc</span> <span class="o">=</span> <span class="s">&#34;中文测试&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//VS本地编码默认为GBK
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">fromLocal8Bit</span><span class="p">(</span><span class="n">szSrc</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="utf-8-gbk">UTF-8-&gt;GBK</h4>
<p>通常在<strong>QtCreator</strong>中使用<strong>QString::fromUtf8</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">szSrc</span> <span class="o">=</span> <span class="s">&#34;中文测试&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//QtCreator本地编码默认为UTF-8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">fromUtf8</span><span class="p">(</span><span class="n">szSrc</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="qstring与winapi">QString与WinAPI</h3>
<p>将QString中存放的中文在WinAPI中使用.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">char</span><span class="o">*</span> <span class="n">szSrc</span> <span class="o">=</span> <span class="s">&#34;中文测试&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//VS       中使用QString::fromLocal8Bit
</span></span></span><span class="line"><span class="cl"><span class="c1">//QtCreator中使用QString::fromUtf8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="n">qstr</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">fromLocal8Bit</span><span class="p">(</span><span class="n">szSrc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">::</span><span class="n">MessageBoxA</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">qstr</span><span class="p">.</span><span class="n">toLocal8Bit</span><span class="p">(),</span> <span class="s">&#34;MessageBoxA&#34;</span><span class="p">,</span> <span class="n">MB_OK</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">::</span><span class="n">MessageBoxW</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">qstr</span><span class="p">.</span><span class="n">toStdWString</span><span class="p">().</span><span class="n">c_str</span><span class="p">(),</span> <span class="sa">L</span><span class="s">&#34;MessageBoxW&#34;</span><span class="p">,</span> <span class="n">MB_OK</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qlabel">QLabel</h2>
<h3 id="主要成员函数">主要成员函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setText</span><span class="p">(</span><span class="n">QString</span><span class="p">);</span> <span class="c1">//设置label框内的文本. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">hide</span><span class="p">();</span> <span class="c1">//隐藏label框. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setBuddy</span><span class="p">(</span><span class="n">QWidget</span><span class="o">*</span><span class="p">);</span> <span class="c1">//把另一个部件设为label框的伙伴，方便快捷使用. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">clear</span><span class="p">();</span> <span class="c1">//清空label框内所有内容. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setPixmap</span><span class="p">(</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">QString</span><span class="p">));</span> <span class="c1">//设置图片. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setMovie</span><span class="p">(</span><span class="n">QMovie</span><span class="o">*</span><span class="p">);</span> <span class="c1">//设置电影. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setScaledContents</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span> <span class="c1">//设置是否按比例填充满整个label框(非常重要) 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setToolTip</span><span class="p">(</span><span class="n">QString</span><span class="p">);</span> <span class="c1">//设置信息提示,鼠标放在label框上面会自动跳出文字. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setToolTipDuration</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">//设置信息提示的持续时间，单位是毫秒. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">Alignment</span><span class="p">);</span> <span class="c1">//设置label框的对齐格式. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setStyleSheet</span><span class="p">(</span><span class="n">QString</span><span class="p">);</span> <span class="c1">//设置label框的样式.
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="播放gif动画">播放Gif动画</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QLabel</span><span class="o">*</span> <span class="n">label</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QLabel</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">label</span><span class="o">-&gt;</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">QMovie</span><span class="o">*</span> <span class="n">mov</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">QMovie</span><span class="p">(</span><span class="s">&#34;tst.gif&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">label</span><span class="o">-&gt;</span><span class="n">setMovie</span><span class="p">(</span><span class="n">mov</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">label</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">mov</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="文本格式">文本格式</h3>
<p>两种格式:</p>
<ul>
<li>PlainText, \n换行.</li>
<li>RichText, 支持html.</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QLabel%e6%96%87%e6%9c%ac%e6%a0%bc%e5%bc%8f.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QLabel%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F.png, images/QLabel%e6%96%87%e6%9c%ac%e6%a0%bc%e5%bc%8f.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QLabel%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QLabel%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F.png"
        title="QLabel文本格式" /></p>
<h3 id="url链接">Url链接</h3>
<p>首先选择RichText.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;br&gt;是换行.
</span></span><span class="line"><span class="cl">QtCreator有点Bug,我目前使用的是5.12.0,要在文本中输入&lt;br&gt;后双击文本,才可以弹出下面的框
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e6%8f%92%e5%85%a5%e9%93%be%e6%8e%a51.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%8F%92%E5%85%A5%E9%93%BE%E6%8E%A51.png, images/%e6%8f%92%e5%85%a5%e9%93%be%e6%8e%a51.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%8F%92%E5%85%A5%E9%93%BE%E6%8E%A51.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%8F%92%E5%85%A5%E9%93%BE%E6%8E%A51.png"
        title="插入链接1" /></p>
<p>通过上图插入链接,Qt已经定义好了两个信号,然后就可以写槽函数来处理相应的事件了.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//鼠标点击url链接信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">linkActivated</span><span class="p">(</span><span class="n">QString</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//鼠标滑过url链接信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">linkHovered</span><span class="p">(</span><span class="n">QString</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="属性设置">属性设置</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QLabel%e5%b1%9e%e6%80%a7.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QLabel%E5%B1%9E%E6%80%A7.png, images/QLabel%e5%b1%9e%e6%80%a7.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QLabel%E5%B1%9E%E6%80%A7.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QLabel%E5%B1%9E%E6%80%A7.png"
        title="QLabel属性" /></p>
<p>通过勾选上述标志,可设置QLabel可选择可编辑等.</p>
<h2 id="qpushbutton">QPushButton</h2>
<h3 id="事件信号">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QAbstractButton</span><span class="o">::</span><span class="n">click</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QAbstractButton</span><span class="o">::</span><span class="n">clicked</span><span class="p">(</span><span class="kt">bool</span> <span class="n">checked</span> <span class="o">=</span> <span class="nb">false</span><span class="p">)</span> <span class="c1">//是否选中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">QAbstractButton</span><span class="o">::</span><span class="n">pressed</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QAbstractButton</span><span class="o">::</span><span class="n">released</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置快捷键">设置快捷键</h3>
<h4 id="法一-1">法一</h4>
<p>在英文按钮前加&amp;符号.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e5%bf%ab%e6%8d%b7%e9%94%ae1.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%BF%AB%E6%8D%B7%E9%94%AE1.png, images/%e5%bf%ab%e6%8d%b7%e9%94%ae1.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%BF%AB%E6%8D%B7%E9%94%AE1.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%BF%AB%E6%8D%B7%E9%94%AE1.png"
        title="快捷键1" /></p>
<p>这样的话,通过快捷键Alt + P就可以激发click信号了.</p>
<h4 id="法二-1">法二</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">btn_shortCut</span><span class="o">-&gt;</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s">&#34;Alt+x&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">btn_shortCut</span><span class="o">-&gt;</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s">&#34;Alt+x,Ctrl+c&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qlineedit">QLineEdit</h2>
<h3 id="常用函数">常用函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setText</span><span class="p">(</span><span class="n">QString</span><span class="p">);</span> <span class="c1">//设置文本,槽函数 不发信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="nf">text</span><span class="p">();</span><span class="c1">//获取文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setPlaceholderText</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="p">);</span><span class="c1">//设置提示文字
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setClearButtonEnabled</span><span class="p">(</span><span class="kt">bool</span> <span class="n">enable</span><span class="p">);</span><span class="c1">//是否设置一个清空按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setReadOnly</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setMaxLength</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setEchoMode</span><span class="p">(</span><span class="n">QLineEdit</span><span class="o">::</span><span class="n">EchoMode</span><span class="p">);</span><span class="c1">//设置行编辑框内文本的显示模式
</span></span></span><span class="line"><span class="cl"><span class="c1">//最常用的模式,分别为:QLineEdit::Normal,QLineEdit::Password.默认为QLineEdit::Normal.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setDragEnabled</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span> <span class="c1">//设置行编辑框内的被选择的文本能否被拖拽,默认不能被拖拽
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setAcceptDrops</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span> <span class="c1">//设置行编辑框能否被拖拽进来文本.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="nf">isModified</span><span class="p">();</span> <span class="c1">//判断文本是否被修改.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">selectAll</span><span class="p">();</span> <span class="c1">//选中框内所有文本.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="nf">displayText</span><span class="p">();</span> <span class="c1">//返回显示的文本.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="nf">selectedText</span><span class="p">();</span> <span class="c1">//返回被选中的文本.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setInputMask</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">inputMask</span><span class="p">);</span><span class="c1">//格式掩码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setValidator</span><span class="p">(</span><span class="n">QVaildator</span><span class="o">*</span><span class="p">);</span> <span class="c1">//设置输入验证器
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="事件信号-1">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">editingFinished</span><span class="p">();</span><span class="c1">//按下回车,焦点移开
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">returnPressed</span><span class="p">();</span><span class="c1">//格式有效,如setInputMask的参数为&#34;NNN&#34;,则编辑框内必须输入3个英文字母或者数字,此时按回车,方可激发该信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">textChanged</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span><span class="c1">//setText()也会激发这个信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">textEdited</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="格式掩码">格式掩码</h3>
<p>假如说编辑框中要设置格式,比如说要指定输入IP地址</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">Edt_IP</span><span class="o">-&gt;</span><span class="n">setInputMask</span><span class="p">(</span><span class="s">&#34;000.000.000.000;_&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//;后面的_,表示无输入时,填_
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="格式校验">格式校验</h3>
<h4 id="设置有效范围">设置有效范围</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QIntValidator&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDoubleValidator&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置只输入整型,设置有效范围为10, 100
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QIntValidator</span><span class="o">*</span> <span class="n">iVal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QIntValidator</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">iVal</span><span class="o">-&gt;</span><span class="n">setRange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">Edt_Int</span><span class="o">-&gt;</span><span class="n">setValidator</span><span class="p">(</span><span class="n">iVal</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//设置只输入浮点,设置有效范围为10, 20,精度为2,即小数点后面有两位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QDoubleValidator</span><span class="o">*</span> <span class="n">dVal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QDoubleValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">dVal</span><span class="o">-&gt;</span><span class="n">setRange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">dVal</span><span class="o">-&gt;</span><span class="n">setNotation</span><span class="p">(</span><span class="n">QDoubleValidator</span><span class="o">::</span><span class="n">StandardNotation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">Edt_Double</span><span class="o">-&gt;</span><span class="n">setValidator</span><span class="p">(</span><span class="n">dVal</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//验证邮箱
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QRegExp</span> <span class="nf">exp</span><span class="p">(</span><span class="s">&#34;[a-zA-Z0-9-_]+@[a-zA-Z0-9_]+</span><span class="se">\\</span><span class="s">.[a-zA-Z]+&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">QRegExpValidator</span><span class="o">*</span> <span class="n">rVal</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">QRegExpValidator</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">rVal</span><span class="o">-&gt;</span><span class="n">setRegExp</span><span class="p">(</span><span class="n">exp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">Edt_RegExp</span><span class="o">-&gt;</span><span class="n">setValidator</span><span class="p">(</span><span class="n">rVal</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>需要注意的是</strong>,上述是设置LineEdit的有效范围,并不是限制输入的范围,如果想要限制输入的范围,我们可以使用QSpinBox、QDoubleSpinBox.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">spinBox</span><span class="o">-&gt;</span><span class="n">setRange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">doubleSpinBox</span><span class="o">-&gt;</span><span class="n">setRange</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="校验是否有效">校验是否有效</h4>
<p>我们可以设置一个按钮,当编辑框输入内容后,点击按钮来校验.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">const</span> <span class="n">QValidator</span><span class="o">*</span> <span class="n">pQValidator</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">Edt_Int</span><span class="o">-&gt;</span><span class="n">validator</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">nRet</span> <span class="o">=</span> <span class="n">pQValidator</span><span class="o">-&gt;</span><span class="n">validate</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">Edt_Int</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">(),</span> <span class="n">pos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">nRet</span> <span class="o">==</span> <span class="n">QValidator</span><span class="o">::</span><span class="n">Acceptable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;格式正确&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//nRet的返回值有以下三种
</span></span></span><span class="line"><span class="cl"><span class="c1">//QValidator::Invalid       格式正确
</span></span></span><span class="line"><span class="cl"><span class="c1">//QValidator::Intermediate  中间输入没结束
</span></span></span><span class="line"><span class="cl"><span class="c1">//QValidator::Acceptable    格式正确
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="布局">布局</h2>
<h3 id="遍历qobject子节点">遍历QObject子节点</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QObjectList</span> <span class="n">cs</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">children</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">cs</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历子节点, 获取节点对象名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">cs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">objectName</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历子节点, 获取节点对象类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">const</span> <span class="n">QMetaObject</span><span class="o">*</span> <span class="n">oj</span> <span class="o">=</span> <span class="n">cs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">metaObject</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">oj</span><span class="o">-&gt;</span><span class="n">className</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="递归遍历qobject子节点">递归遍历QObject子节点</h3>
<p>可以遍历子节点的子节点.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">PrintName</span><span class="p">(</span><span class="n">QObject</span><span class="o">*</span> <span class="n">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">obj</span><span class="p">)</span>  <span class="c1">//为空直接返回
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;%s :&#34;</span><span class="p">,</span> <span class="n">obj</span><span class="o">-&gt;</span><span class="n">objectName</span><span class="p">().</span><span class="n">toStdString</span><span class="p">().</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="n">QMetaObject</span><span class="o">*</span> <span class="n">mobj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">-&gt;</span><span class="n">metaObject</span><span class="p">();</span> <span class="c1">//获取元数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QString</span> <span class="n">cname</span> <span class="o">=</span> <span class="n">mobj</span><span class="o">-&gt;</span><span class="n">className</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">cname</span><span class="p">.</span><span class="n">toStdString</span><span class="p">().</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//对PushButton进行操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="n">cname</span> <span class="o">==</span> <span class="s">&#34;QPushButton&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">QPushButton</span><span class="o">*</span> <span class="n">pb</span> <span class="o">=</span> <span class="n">qobject_cast</span><span class="o">&lt;</span><span class="n">QPushButton</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">pb</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">pb</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="n">pb</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#34;class&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//递归打印名字
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QObjectList</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">obj</span><span class="o">-&gt;</span><span class="n">children</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">cs</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">cs</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">PrintName</span><span class="p">(</span><span class="n">cs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="qsizepolicy布局尺寸策略分析">QSizePolicy布局尺寸策略分析</h3>
<p>有四种布局:</p>
<ul>
<li>Vertical Layout</li>
<li>Horizontal Layout</li>
<li>Grid Layout</li>
<li>Form Layout</li>
</ul>
<h4 id="sizehint推荐尺寸">SizeHint推荐尺寸</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QSize</span> <span class="n">sizeHint</span><span class="p">()</span> <span class="c1">//推荐尺寸,只能重载修改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QSize</span> <span class="n">size</span><span class="p">()</span>     <span class="c1">//不包含边框的窗口尺寸
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="qsizepolicypolicyflag">QSizePolicy::PolicyFlag</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">QSizePolicy</span><span class="o">::</span><span class="n">GrowFlag</span>    <span class="c1">//必要时可超过推荐
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QSizePolicy</span><span class="o">::</span><span class="n">ExpandFlag</span>  <span class="c1">//尽可能的拓展
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QSizePolicy</span><span class="o">::</span><span class="n">ShrinkFlag</span>  <span class="c1">//必要时可小于推荐
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QSizePolicy</span><span class="o">::</span><span class="n">IgnoreFlag</span>  <span class="c1">//缺省大小被忽略
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="qsizepolicypolicy">QSizePolicy::Policy</h4>
<table>
<thead>
<tr>
<th>QSizePolicy::Policy</th>
<th>QSizePolicy::PolicyFlag</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Fixed</td>
<td>0</td>
<td>只参考sizeHint()</td>
</tr>
<tr>
<td>Minimum</td>
<td>GrowFlag</td>
<td>伸展和收缩 &gt;= sizeHint()</td>
</tr>
<tr>
<td>Maximum</td>
<td>ShrinkFlag</td>
<td>伸展和收缩 &lt;= sizeHint()</td>
</tr>
<tr>
<td>Preferred</td>
<td>GrowFlag | ShrinkFlag</td>
<td></td>
</tr>
<tr>
<td>Expanding</td>
<td>GrowFlag | ShrinkFlag | ExpandFlag</td>
<td>尽量缩放,最小值为推荐值</td>
</tr>
<tr>
<td>MinimumExpanding</td>
<td>GrowFlag | ExpandFlag</td>
<td></td>
</tr>
<tr>
<td>Ignored</td>
<td>ShrinkFlag | GrowFlag | IgnoreFlag</td>
<td>忽略推荐大小,尽量缩放</td>
</tr>
</tbody>
</table>
<h3 id="qvboxlayoutqhboxlayout">QVBoxlayout,QHBoxLayout</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QVBoxLayout&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QHBoxLayout&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置全局字体
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QFont</span> <span class="n">f</span><span class="p">(</span><span class="s">&#34;Yahei Mono&#34;</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">a</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QWidget</span><span class="o">*</span> <span class="n">LuoWin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QWidget</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoWin</span><span class="o">-&gt;</span><span class="n">resize</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//垂直布局
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QVBoxLayout</span><span class="o">*</span> <span class="n">lay</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QVBoxLayout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//新建一个按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btn1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;btn1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置按钮的尺寸策略, 设置Fixed, 使用推荐尺寸
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">btn1</span><span class="o">-&gt;</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">QSizePolicy</span><span class="o">::</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QSizePolicy</span><span class="o">::</span><span class="n">Expanding</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置按钮的最大最小尺寸
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">btn1</span><span class="o">-&gt;</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">btn1</span><span class="o">-&gt;</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btn2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;btn2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//布局中添加按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//设置布局的边界, 在LuoWin-&gt;show()前设置和后面设置是不一样的,在前设置才可以改变btn1-&gt;width()的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//设置布局中元素之间的间距,垂直布局,当缩的很小的时候,就可以看到间距了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//添加上述布局
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LuoWin</span><span class="o">-&gt;</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lay</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">LuoWin</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//打印推荐尺寸,这个值只有在设置了布局,才可能有效
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;width:</span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">btn1</span><span class="o">-&gt;</span><span class="n">sizeHint</span><span class="p">().</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;&lt;</span><span class="s">&#34; height:&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">btn1</span><span class="o">-&gt;</span><span class="n">sizeHint</span><span class="p">().</span><span class="n">height</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//打印实际尺寸
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;width:</span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">btn1</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;&lt;</span><span class="s">&#34; height:&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">btn1</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="qgridlayout">QGridLayout</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QSizePolicy&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QGridLayout&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置全局字体
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QFont</span> <span class="n">f</span><span class="p">(</span><span class="s">&#34;Yahei Mono&#34;</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">a</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QWidget</span><span class="o">*</span> <span class="n">LuoWin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QWidget</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoWin</span><span class="o">-&gt;</span><span class="n">resize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QGridLayout</span><span class="o">*</span> <span class="n">lay</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QGridLayout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btn00</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;btn00&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btn02</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;btn02&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btn12</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;btn12&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btn33</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;btn33&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn02</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn33</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//设置控件之间的间距
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//水平间距
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">setHorizontalSpacing</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//垂直间距
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">setVerticalSpacing</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//也可以使用setSpacing同时设置水平和垂直间距
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//lay-&gt;setSpacing(10);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	
</span></span><span class="line"><span class="cl">	<span class="c1">//设置布局的对齐方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">AlignLeft</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">LuoWin</span><span class="o">-&gt;</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lay</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">LuoWin</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="qformlayout">QFormLayout</h3>
<p>以下示例,实现遍历FormLayout布局所有元素,并实现空验证和清除.</p>
<h4 id="luoqth">luoqt.h</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#pragma once
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QtWidgets/QWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;ui_luoqt.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDebug&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QFile&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QFormLayout&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QLineEdit&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QLabel&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">luoqt</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Q_NULLPTR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置皮肤样式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">static</span> <span class="kt">void</span> <span class="n">SetStyle</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span><span class="o">&amp;</span> <span class="n">styleName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">Save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">Clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ui</span><span class="o">::</span><span class="n">luoqtClass</span> <span class="n">ui</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="luoqtcpp">luoqt.cpp</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;luoqt.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">luoqt</span><span class="o">::</span><span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//新建一个FormLayout布局
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QFormLayout</span><span class="o">*</span> <span class="n">lay</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QFormLayout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">QLineEdit</span><span class="o">*</span> <span class="n">edtName</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QLineEdit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建一个带有给定文本的QLabel及QWidget控件行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addRow</span><span class="p">(</span><span class="s">&#34;&amp;Name&#34;</span><span class="p">,</span> <span class="n">edtName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QLineEdit</span><span class="o">*</span> <span class="n">edtEmail</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QLineEdit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addRow</span><span class="p">(</span><span class="s">&#34;&amp;Email&#34;</span><span class="p">,</span> <span class="n">edtEmail</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QLineEdit</span><span class="o">*</span> <span class="n">edtAge</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QLineEdit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//插入到下标1的位置, 从0开始
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">insertRow</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;&amp;Age&#34;</span><span class="p">,</span> <span class="n">edtAge</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//显示出错信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QLabel</span><span class="o">*</span> <span class="n">labelInfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QLabel</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">labelInfo</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="s">&#34;Input&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">labelInfo</span><span class="o">-&gt;</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">&#34;color:red&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//插入到下标0的位置, 从0开始
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">insertRow</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">labelInfo</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//添加Save clear按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btnSave</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;Save&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btnClear</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;Clear&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//信号槽绑定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">btnSave</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">clicked</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">Save</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">	<span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">btnClear</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">clicked</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">Clear</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//添加一个平行布局
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QHBoxLayout</span><span class="o">*</span> <span class="n">hLay</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QHBoxLayout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">hLay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btnSave</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">hLay</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btnClear</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">lay</span><span class="o">-&gt;</span><span class="n">addRow</span><span class="p">(</span><span class="n">hLay</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">this</span><span class="o">-&gt;</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lay</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">SetStyle</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span><span class="o">&amp;</span> <span class="n">styleName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QFile</span> <span class="nf">file</span><span class="p">(</span><span class="n">QString</span><span class="p">(</span><span class="s">&#34;./image/%1.qss&#34;</span><span class="p">).</span><span class="n">arg</span><span class="p">(</span><span class="n">styleName</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="n">b</span> <span class="o">=</span> <span class="n">file</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">QFile</span><span class="o">::</span><span class="n">ReadOnly</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QString</span> <span class="n">qss</span> <span class="o">=</span> <span class="n">QLatin1String</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">readAll</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="n">qApp</span><span class="o">-&gt;</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="n">qss</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">qApp</span><span class="o">-&gt;</span><span class="n">setPalette</span><span class="p">(</span><span class="n">QPalette</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#34;#F0F0F0&#34;</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">Save</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//扎到layout
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QFormLayout</span><span class="o">*</span> <span class="n">lay</span> <span class="o">=</span> <span class="p">(</span><span class="n">QFormLayout</span><span class="o">*</span><span class="p">)</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">layout</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//找到显示错误信息的Label
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QLabel</span><span class="o">*</span> <span class="n">label</span> <span class="o">=</span> <span class="p">(</span><span class="n">QLabel</span><span class="o">*</span><span class="p">)</span><span class="n">lay</span><span class="o">-&gt;</span><span class="n">itemAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QFormLayout</span><span class="o">::</span><span class="n">FieldRole</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">widget</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//存放错误信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QString</span> <span class="n">qstrErr</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历FormLayout的所有元素
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">lay</span><span class="o">-&gt;</span><span class="n">rowCount</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//Label
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QLayoutItem</span><span class="o">*</span> <span class="n">LabelItem</span> <span class="o">=</span> <span class="n">lay</span><span class="o">-&gt;</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">QFormLayout</span><span class="o">::</span><span class="n">LabelRole</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">LabelItem</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">QLabel</span><span class="o">*</span> <span class="n">titleLabel</span> <span class="o">=</span> <span class="p">(</span><span class="n">QLabel</span><span class="o">*</span><span class="p">)</span><span class="n">LabelItem</span><span class="o">-&gt;</span><span class="n">widget</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">titleLabel</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//Field
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QLayoutItem</span><span class="o">*</span> <span class="n">fieldItem</span> <span class="o">=</span> <span class="n">lay</span><span class="o">-&gt;</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">QFormLayout</span><span class="o">::</span><span class="n">FieldRole</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">QLineEdit</span><span class="o">*</span> <span class="n">pWidget</span> <span class="o">=</span> <span class="p">(</span><span class="n">QLineEdit</span><span class="o">*</span><span class="p">)</span><span class="n">fieldItem</span><span class="o">-&gt;</span><span class="n">widget</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pWidget</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">QString</span> <span class="n">qstrName</span> <span class="o">=</span> <span class="n">pWidget</span><span class="o">-&gt;</span><span class="n">metaObject</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">className</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">qstrName</span> <span class="o">==</span> <span class="s">&#34;QLineEdit&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">pWidget</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">().</span><span class="n">trimmed</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">pWidget</span><span class="o">-&gt;</span><span class="n">setFocus</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">				<span class="n">qstrErr</span> <span class="o">+=</span> <span class="n">titleLabel</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">				<span class="n">qstrErr</span> <span class="o">+=</span> <span class="s">&#34;is Empty</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">label</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="n">qstrErr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">Clear</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//扎到layout
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QFormLayout</span><span class="o">*</span> <span class="n">lay</span> <span class="o">=</span> <span class="p">(</span><span class="n">QFormLayout</span><span class="o">*</span><span class="p">)</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">layout</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历所有LineEdit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//遍历FormLayout的所有元素
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span>  <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">lay</span><span class="o">-&gt;</span><span class="n">rowCount</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">QLayoutItem</span><span class="o">*</span> <span class="n">fieldItem</span> <span class="o">=</span> <span class="n">lay</span><span class="o">-&gt;</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">QFormLayout</span><span class="o">::</span><span class="n">FieldRole</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">QLineEdit</span><span class="o">*</span> <span class="n">pWidget</span> <span class="o">=</span> <span class="p">(</span><span class="n">QLineEdit</span><span class="o">*</span><span class="p">)</span><span class="n">fieldItem</span><span class="o">-&gt;</span><span class="n">widget</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pWidget</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">QString</span> <span class="n">qstrName</span> <span class="o">=</span> <span class="n">pWidget</span><span class="o">-&gt;</span><span class="n">metaObject</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">className</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">qstrName</span> <span class="o">==</span> <span class="s">&#34;QLineEdit&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">pWidget</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="maincpp-1">main.cpp</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;luoqt.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QtWidgets/QApplication&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置全局字体
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QFont</span> <span class="n">f</span><span class="p">(</span><span class="s">&#34;Yahei Mono&#34;</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">a</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">luoqt</span> <span class="n">w</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">w</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qcheckbox">QCheckBox</h2>
<p>默认多选.</p>
<h3 id="常用函数-1">常用函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//文本获取与设置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="nf">text</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setText</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//状态获取与设置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="nf">isChecked</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setChecked</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置自动排他,单选属性
</span></span></span><span class="line"><span class="cl"><span class="c1">//若同Widget上的两个QCheckBox设置该属性,则每次只能选择其中一个
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setAutoExclusive</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="事件信号-2">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QAbstractButton</span><span class="o">::</span><span class="n">clicked</span><span class="p">(</span><span class="kt">bool</span> <span class="n">checked</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span><span class="c1">//按钮点击,就会触发该信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">QAbstractButton</span><span class="o">::</span><span class="n">toggled</span><span class="p">(</span><span class="kt">bool</span> <span class="n">checked</span><span class="p">);</span>         <span class="c1">//状态发生变化,就会触发该信号
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qbuttongroup">QButtonGroup</h2>
<p>将一组按钮放在ButtonGroup上,点击时,可以知道哪个按钮被点击了.</p>
<h3 id="常用信号">常用信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonClicked</span><span class="p">(</span><span class="n">QAbstractButton</span> <span class="o">*</span><span class="n">button</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonClicked</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="n">QAbstractButton</span> <span class="o">*</span><span class="n">button</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonReleased</span><span class="p">(</span><span class="n">QAbstractButton</span> <span class="o">*</span><span class="n">button</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonReleased</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonToggled</span><span class="p">(</span><span class="n">QAbstractButton</span> <span class="o">*</span><span class="n">button</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">checked</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">buttonToggled</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">checked</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="示例-1">示例</h3>
<h4 id="luoqth-1">luoqt.h</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QCheckBox&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QButtonGroup&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">luoqt</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Q_NULLPTR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">LuoClicked</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span> <span class="n">button</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">LuoToggled</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span> <span class="n">button</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">checked</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ui</span><span class="o">::</span><span class="n">luoqtClass</span> <span class="n">ui</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="luoqtcpp-1">luoqt.cpp</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;luoqt.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">luoqt</span><span class="o">::</span><span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QButtonGroup</span><span class="o">*</span> <span class="n">btnGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QButtonGroup</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//加组后,默认变为单选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">addButton</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">checkBox1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">addButton</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">checkBox2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">addButton</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">checkBox3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//改为多选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">setExclusive</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//信号槽绑定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">btnGroup</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">buttonClicked</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span><span class="p">)),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">LuoClicked</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">	<span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">btnGroup</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">buttonToggled</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span> <span class="p">,</span> <span class="kt">bool</span><span class="p">)),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">LuoToggled</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span><span class="p">,</span> <span class="kt">bool</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">LuoClicked</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span> <span class="n">button</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;LuoClicked:&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">button</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">button</span><span class="o">-&gt;</span><span class="n">isChecked</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">LuoToggled</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="o">*</span> <span class="n">button</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">checked</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;LuoToggled:&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">button</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">button</span><span class="o">-&gt;</span><span class="n">isChecked</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qradiobutton">QRadioButton</h2>
<p>类似QCheckBox, 默认单选</p>
<h3 id="示例-2">示例</h3>
<h4 id="luoqth-2">luoqt.h</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QMessageBox&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QRadioButton&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QVBoxLayout&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QButtonGroup&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">luoqt</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Q_NULLPTR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">LuoSave</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ui</span><span class="o">::</span><span class="n">luoqtClass</span> <span class="n">ui</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="luoqtcpp-2">luoqt.cpp</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;luoqt.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">luoqt</span><span class="o">::</span><span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//单选按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QRadioButton</span><span class="o">*</span> <span class="n">btnRadio1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QRadioButton</span><span class="p">(</span><span class="s">&#34;btnRadio1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QRadioButton</span><span class="o">*</span> <span class="n">btnRadio2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QRadioButton</span><span class="p">(</span><span class="s">&#34;btnRadio2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QRadioButton</span><span class="o">*</span> <span class="n">btnRadio3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QRadioButton</span><span class="p">(</span><span class="s">&#34;btnRadio3&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//按钮组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QButtonGroup</span><span class="o">*</span> <span class="n">btnGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QButtonGroup</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">&#34;btnGroup&#34;</span><span class="p">);</span><span class="c1">//这里设置ObjectName, 方便下面查找
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">addButton</span><span class="p">(</span><span class="n">btnRadio1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">addButton</span><span class="p">(</span><span class="n">btnRadio2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">addButton</span><span class="p">(</span><span class="n">btnRadio3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//垂直布局
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QVBoxLayout</span><span class="o">*</span> <span class="n">layVbox</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历QButtonGroup
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">buttons</span><span class="p">().</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">layVbox</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">buttons</span><span class="p">()[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1">//保存按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QPushButton</span><span class="o">*</span> <span class="n">btnSave</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;Save&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">layVbox</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btnSave</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">btnSave</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">clicked</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">LuoSave</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">LuoSave</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//获取btnGroup
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QButtonGroup</span><span class="o">*</span> <span class="n">btnGroup</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">findChild</span><span class="o">&lt;</span><span class="n">QButtonGroup</span><span class="o">*&gt;</span><span class="p">(</span><span class="s">&#34;btnGroup&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">btnGroup</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//获取被选中的按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QRadioButton</span><span class="o">*</span> <span class="n">btnSelRadio</span> <span class="o">=</span> <span class="p">(</span><span class="n">QRadioButton</span><span class="o">*</span><span class="p">)</span><span class="n">btnGroup</span><span class="o">-&gt;</span><span class="n">checkedButton</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">btnSelRadio</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">QMessageBox</span><span class="o">::</span><span class="n">warning</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;Please checked!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">QMessageBox</span><span class="o">::</span><span class="n">information</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">btnSelRadio</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qcombobox">QComboBox</h2>
<h3 id="常用函数-2">常用函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//新增数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">addItem</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">,</span> <span class="k">const</span> <span class="n">QVariant</span> <span class="o">&amp;</span><span class="n">userData</span> <span class="o">=</span> <span class="n">QVariant</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">addItem</span><span class="p">(</span><span class="k">const</span> <span class="n">QIcon</span> <span class="o">&amp;</span><span class="n">icon</span><span class="p">,</span> <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">,</span> <span class="k">const</span> <span class="n">QVariant</span> <span class="o">&amp;</span><span class="n">userData</span> <span class="o">=</span> <span class="n">QVariant</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">addItems</span><span class="p">(</span><span class="k">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">texts</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//插入数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">insertItem</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">,</span> <span class="k">const</span> <span class="n">QVariant</span> <span class="o">&amp;</span><span class="n">userData</span> <span class="o">=</span> <span class="n">QVariant</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">insertItem</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="k">const</span> <span class="n">QIcon</span> <span class="o">&amp;</span><span class="n">icon</span><span class="p">,</span> <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">,</span> <span class="k">const</span> <span class="n">QVariant</span> <span class="o">&amp;</span><span class="n">userData</span> <span class="o">=</span> <span class="n">QVariant</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">insertItems</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="k">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">list</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//QVariant 用户自定义数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取当前下标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">currentIndex</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取当前文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="n">currentText</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">//删除数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">removeItem</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">clearEditText</span><span class="p">();</span> <span class="c1">//可编辑模式时,清空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">clear</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="事件信号-3">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//用户选中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">activated</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">activated</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//状态发生变化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">currentIndexChanged</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">currentTextChanged</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//只读模式没有
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">editTextChanged</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//选择下拉框,滑过,高亮某行时,就会触发该信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">highlighted</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">highlighted</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="示例-3">示例</h3>
<h4 id="luoqth-3">luoqt.h</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QIcon&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QComboBox&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">luoqt</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Q_NULLPTR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">LuoClick</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ui</span><span class="o">::</span><span class="n">luoqtClass</span> <span class="n">ui</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="luoqtcpp-3">luoqt.cpp</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;luoqt.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">LuoType</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//使Qt支持此类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Q_DECLARE_METATYPE</span><span class="p">(</span><span class="n">LuoType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">luoqt</span><span class="o">::</span><span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//添加用户自定义数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">LuoType</span> <span class="n">luoType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">luoType</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">QVariant</span> <span class="n">var</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">var</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">luoType</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="s">&#34;001&#34;</span><span class="p">,</span> <span class="n">var</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QIcon</span> <span class="nf">icon</span><span class="p">(</span><span class="s">&#34;:/luoqt/kenan.png&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="s">&#34;002&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">insertItem</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;003&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">luoqt</span><span class="o">::</span><span class="n">LuoClick</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//获取当前行下标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">ui</span><span class="p">.</span><span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">currentIndex</span><span class="p">();;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//打印第0行的自定义数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">ui</span><span class="p">.</span><span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">itemText</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QVariant</span> <span class="n">var</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">itemData</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">var</span><span class="p">.</span><span class="n">value</span><span class="o">&lt;</span><span class="n">LuoType</span><span class="o">&gt;</span><span class="p">().</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qslider">QSlider</h2>
<h3 id="属性">属性</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">setRange</span><span class="p">(</span><span class="kt">int</span> <span class="n">min</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//键盘,方向键控制
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setSingleStep</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//鼠标, 这里通过鼠标点击,并不是点到哪里,就拖动到哪里
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setPageStep</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//方向
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setOrientation</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">Orientation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//Qt::Horizontal
</span></span></span><span class="line"><span class="cl"><span class="c1">//Qt::Vertical
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="事件信号-4">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">sliderMoved</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">);</span><span class="c1">//拖动
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">sliderPressed</span><span class="p">();</span><span class="c1">//点击滑块
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">sliderReleased</span><span class="p">();</span><span class="c1">//松开滑块
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">valueChanged</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">);</span><span class="c1">//点击或者设置
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="重载鼠标事件">重载鼠标事件</h3>
<p>实现鼠标点击到哪里,滑块就滑动到哪里.</p>
<ol>
<li>新建一个类LuoSlider,继承QSlider,重载mousePressEvent</li>
</ol>
<p><strong>LuoSlider.h</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QSlider&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QMouseEvent&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDebug&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">LuoSlider</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QSlider</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoSlider</span><span class="p">(</span><span class="n">QWidget</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="o">~</span><span class="n">LuoSlider</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">void</span> <span class="n">mousePressEvent</span><span class="p">(</span><span class="n">QMouseEvent</span><span class="o">*</span> <span class="n">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>LuoSlider.cpp</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;LuoSlider.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">LuoSlider</span><span class="o">::</span><span class="n">LuoSlider</span><span class="p">(</span><span class="n">QWidget</span><span class="o">*</span> <span class="n">p</span> <span class="cm">/*= NULL*/</span><span class="p">)</span><span class="o">:</span><span class="n">QSlider</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">LuoSlider</span><span class="o">::~</span><span class="n">LuoSlider</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">LuoSlider</span><span class="o">::</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">QMouseEvent</span><span class="o">*</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">dbl</span> <span class="o">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">e</span><span class="o">-&gt;</span><span class="n">pos</span><span class="p">().</span><span class="n">x</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">width</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">nVal</span> <span class="o">=</span> <span class="n">dbl</span> <span class="o">*</span> <span class="p">(</span><span class="n">maximum</span><span class="p">()</span> <span class="o">-</span> <span class="n">minimum</span><span class="p">())</span> <span class="o">+</span> <span class="n">minimum</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">setValue</span><span class="p">(</span><span class="n">nVal</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">QSlider</span><span class="o">::</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="o">-&gt;</span><span class="n">pos</span><span class="p">().</span><span class="n">x</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>将新建的类LuoSlider与界面上的QSlider关联</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/LuoSlider%e6%8f%90%e5%8d%871.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/LuoSlider%E6%8F%90%E5%8D%871.png, images/LuoSlider%e6%8f%90%e5%8d%871.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/LuoSlider%E6%8F%90%E5%8D%871.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/LuoSlider%E6%8F%90%E5%8D%871.png"
        title="LuoSlider提升1" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/LuoSlider%e6%8f%90%e5%8d%872.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/LuoSlider%E6%8F%90%E5%8D%872.png, images/LuoSlider%e6%8f%90%e5%8d%872.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/LuoSlider%E6%8F%90%E5%8D%872.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/LuoSlider%E6%8F%90%E5%8D%872.png"
        title="LuoSlider提升2" /></p>
<h2 id="qlistwidget">QListWidget</h2>
<h3 id="属性-1">属性</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//单选,多选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QAbstractItemView</span><span class="o">::</span><span class="n">SelectionMode</span> <span class="n">selectionMode</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setSelectionMode</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">::</span><span class="n">SelectionMode</span> <span class="n">mode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">SelectionMode</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">NoSelection</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">SingleSelection</span><span class="p">,</span>    <span class="c1">//单选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">MultiSelection</span><span class="p">,</span>     <span class="c1">//多选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ExtendedSelection</span><span class="p">,</span>  <span class="c1">//Ctrl + 鼠标 多选, Shift + 鼠标 连续选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ContiguousSelection</span> <span class="c1">//Ctrl + 鼠标 以及 Shift + 鼠标 都是连续选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">//从上到下或从左到右排列
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">flow</span>
</span></span><span class="line"><span class="cl"><span class="c1">//每一行的行高
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">gridSize</span>
</span></span><span class="line"><span class="cl"><span class="c1">//图标的宽高
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">iconSize</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QListWidget%e5%b1%9e%e6%80%a7.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QListWidget%E5%B1%9E%E6%80%A7.png, images/QListWidget%e5%b1%9e%e6%80%a7.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QListWidget%E5%B1%9E%E6%80%A7.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QListWidget%E5%B1%9E%E6%80%A7.png"
        title="QListWidget属性" /></p>
<h3 id="常用函数-3">常用函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//新增数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">addItem</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">label</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">addItem</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">addItems</span><span class="p">(</span><span class="k">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">labels</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//添加数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">insertItem</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">insertItem</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">label</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">insertItems</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="k">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">labels</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取ListWidget, item个数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">count</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取当前行数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="nf">currentItem</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">currentRow</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">//设置列表控件的编辑策略 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setEditTriggers</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">::</span><span class="n">EditTriggers</span> <span class="n">triggers</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">EditTrigger</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">NoEditTriggers</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">CurrentChanged</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">DoubleClicked</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">SelectedClicked</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">EditKeyPressed</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">AnyKeyPressed</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">AllEditTriggers</span> <span class="o">=</span> <span class="mi">31</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">sortItems</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">SortOrder</span> <span class="n">order</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">::</span><span class="n">AscendingOrder</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//将列表控件的某一项,设置为控件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setItemWidget</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="n">QWidget</span> <span class="o">*</span><span class="n">widget</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Public Slots
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">clear</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="事件信号-5">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//鼠标键盘选中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">currentItemChanged</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">current</span><span class="p">,</span> <span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">previous</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">currentRowChanged</span><span class="p">(</span><span class="kt">int</span> <span class="n">currentRow</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">currentTextChanged</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">currentText</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//激活, 双击
</span></span></span><span class="line"><span class="cl"><span class="c1">//可编辑状态下,双击不会触发该信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemActivated</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//列表内容改变
</span></span></span><span class="line"><span class="cl"><span class="c1">//通过代码修改或者手动修改列表项显示的文字,会触发该信号
</span></span></span><span class="line"><span class="cl"><span class="c1">//通过代码新增列表数据,该信号并不会触发
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemChanged</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//鼠标左键松开  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemClicked</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//鼠标左键或右键双击
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemDoubleClicked</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//在设置鼠标跟踪后,鼠标移上去,才会触发该信号
</span></span></span><span class="line"><span class="cl"><span class="c1">//setMouseTracking(true);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemEntered</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//鼠标左键或右键按下
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemPressed</span><span class="p">(</span><span class="n">QListWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//选择改变
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemSelectionChanged</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="示例-4">示例</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QListWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QIcon&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QLineEdit&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">luoqt</span><span class="o">::</span><span class="n">luoqt</span><span class="p">(</span><span class="n">QWidget</span><span class="o">*</span> <span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//清空数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//插入数据方式一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QListWidgetItem</span><span class="o">*</span> <span class="n">item1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QListWidgetItem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">item1</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="s">&#34;item1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">item1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//插入数据方式二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">new</span> <span class="nf">QListWidgetItem</span><span class="p">(</span><span class="s">&#34;item2&#34;</span><span class="p">,</span> <span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//插入数据方式三
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="s">&#34;item3&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//插入包含图标的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QListWidgetItem</span><span class="o">*</span> <span class="n">item4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QListWidgetItem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">item4</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="s">&#34;item4&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">item4</span><span class="o">-&gt;</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s">&#34;:/luoqt/kenan.png&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">item4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//插入其他控件, 如LineEdit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QListWidgetItem</span><span class="o">*</span> <span class="n">item5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QListWidgetItem</span><span class="p">(</span><span class="s">&#34;12&#34;</span><span class="p">,</span> <span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QLineEdit</span><span class="o">*</span> <span class="n">edtLine</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="s">&#34;item5 LineEdit&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">setItemWidget</span><span class="p">(</span><span class="n">item5</span><span class="p">,</span> <span class="n">edtLine</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//设置鼠标跟踪
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//ui.listWidget-&gt;setMouseTracking(true);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置编辑策略, 双击启用编辑状态
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">::</span><span class="n">DoubleClicked</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历listWidget中的每个item,设置属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">setFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">ItemIsEditable</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">ItemIsSelectable</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">ItemIsEnabled</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//设置排序, 升序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ui</span><span class="p">.</span><span class="n">listWidget</span><span class="o">-&gt;</span><span class="n">sortItems</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">AscendingOrder</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qtablewidget">QTableWidget</h2>
<h3 id="属性-2">属性</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//标题显示(上方、左侧) 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">horizontalHeader</span><span class="p">()</span> <span class="n">verticalHeader</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1">//滚动条显示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setVerticalScrollBarPolicy</span>
</span></span><span class="line"><span class="cl"><span class="c1">//选择模式,跟QListWidget一样
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">selectionMode</span>
</span></span><span class="line"><span class="cl"><span class="c1">//选择行、列、一项
</span></span></span><span class="line"><span class="cl"><span class="c1">//常用的是行选择
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setSelectionBehavior</span>
</span></span><span class="line"><span class="cl"><span class="c1">//左上角全选按钮 标题上方和左侧都显示的时候,可以看到这个按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setCornerButtonEnabled</span>
</span></span><span class="line"><span class="cl"><span class="c1">//网格显示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setShowGrid</span> <span class="n">setGridStyle</span>
</span></span><span class="line"><span class="cl"><span class="c1">//排序按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setSortingEnabled</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QTableWidget%e5%b1%9e%e6%80%a7.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QTableWidget%E5%B1%9E%E6%80%A7.png, images/QTableWidget%e5%b1%9e%e6%80%a7.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QTableWidget%E5%B1%9E%E6%80%A7.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QTableWidget%E5%B1%9E%E6%80%A7.png"
        title="QTableWidget属性" /></p>
<h3 id="事件信号-6">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//在设置鼠标跟踪后,鼠标移上去,才会触发该信号,自定义widget不一定有效(Bug)
</span></span></span><span class="line"><span class="cl"><span class="c1">//setMouseTracking(true);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">cellEntered</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">cellChanged</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">cellClicked</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">cellDoubleClicked</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//仅 QTableWidgetItem 可触发下述信号
</span></span></span><span class="line"><span class="cl"><span class="c1">//在设置鼠标跟踪后,鼠标移上去,才会触发该信号,自定义widget无效
</span></span></span><span class="line"><span class="cl"><span class="c1">//setMouseTracking(true);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">itemEntered</span><span class="p">(</span><span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemChanged</span><span class="p">(</span><span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemClicked</span><span class="p">(</span><span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemDoubleClicked</span><span class="p">(</span><span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//标题栏点击信号
</span></span></span><span class="line"><span class="cl"><span class="c1">//QTableWidget标题栏的类型为QHeaderView
</span></span></span><span class="line"><span class="cl"><span class="c1">//可在QT手册中查看QHeaderView的信号事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">sectionClicked</span><span class="p">(</span><span class="kt">int</span> <span class="n">logicalIndex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//代码进行绑定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">horizontalHeader</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                 <span class="n">SIGNAL</span><span class="p">(</span><span class="n">sectionClicked</span><span class="p">(</span><span class="kt">int</span><span class="p">)),</span> 
</span></span><span class="line"><span class="cl">                 <span class="k">this</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                 <span class="n">SLOT</span><span class="p">(</span><span class="n">SectionClicked</span><span class="p">(</span><span class="kt">int</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="清空内容">清空内容</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QTableWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDebug&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QIcon&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QLabel&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QPixmap&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QMessageBox&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="插入标题">插入标题</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">LuoHeader</span> <span class="o">:</span><span class="k">public</span> <span class="n">QTableWidgetItem</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoHeader</span><span class="o">::</span><span class="n">LuoHeader</span><span class="p">(</span><span class="n">QString</span> <span class="n">qstr</span><span class="p">)</span> <span class="o">:</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">qstr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">LuoHeader</span><span class="o">::~</span><span class="n">LuoHeader</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;removed&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//插入列标题
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//方式1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s">&#34;Col1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//方式2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">horizontalHeaderItem</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="s">&#34;Col2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//方式3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="k">new</span> <span class="n">LuoHeader</span><span class="p">(</span><span class="s">&#34;C3&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//在同样的位置插入标题,会清理之前的对象,一会查看控制台,就会发现LuoHeader的析构函数会被调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="k">new</span> <span class="n">LuoHeader</span><span class="p">(</span><span class="s">&#34;Col2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//设置标题列的宽度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setColumnWidth</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//插入行标题
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置方式跟上面一样, 只不过要将Horizontal换成Vertical
</span></span></span><span class="line"><span class="cl"><span class="c1">//这里展示一种不一样的玩法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QStringList</span> <span class="n">qstrList</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#34;Row1&#34;</span><span class="p">,</span> <span class="s">&#34;Row2&#34;</span><span class="p">,</span> <span class="s">&#34;Row3&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setVerticalHeaderLabels</span><span class="p">(</span><span class="n">qstrList</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="插入数据">插入数据</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">nRow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">nCol</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//上面设置了 3行5列
</span></span></span><span class="line"><span class="cl"><span class="c1">//在0行0列、0行1列、0行2列添加内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s">&#34;Item 0, 0&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s">&#34;Item 0, 1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s">&#34;Item 0, 2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//结尾添加一行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">nRow</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">rowCount</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">insertRow</span><span class="p">(</span><span class="n">nRow</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="n">nRow</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s">&#34;ItemEnd&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//开始添加一行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">insertRow</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s">&#34;ItemBegin&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//插入QIcon图片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">nRow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">nCol</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="n">nRow</span><span class="p">,</span> <span class="n">nCol</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTableWidgetItem</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">item</span><span class="p">(</span><span class="n">nRow</span><span class="p">,</span> <span class="n">nCol</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s">&#34;:/luoqt/kenan.png&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置行高
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setRowHeight</span><span class="p">(</span><span class="n">nRow</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置图标显示大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setIconSize</span><span class="p">(</span><span class="n">QSize</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">rowHeight</span><span class="p">(</span><span class="n">nRow</span><span class="p">),</span> <span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">rowHeight</span><span class="p">(</span><span class="n">nRow</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//插入Widget图片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">nRow</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">nCol</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">QLabel</span><span class="o">*</span> <span class="n">qLabel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QLabel</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">QPixmap</span> <span class="nf">qPix</span><span class="p">(</span><span class="s">&#34;:/luoqt/kenan.png&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//缩放到和表格单元的宽高一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">qPix</span> <span class="o">=</span> <span class="n">qPix</span><span class="p">.</span><span class="n">scaled</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">columnWidth</span><span class="p">(</span><span class="n">nCol</span><span class="p">),</span> <span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">rowHeight</span><span class="p">(</span><span class="n">nRow</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">qLabel</span><span class="o">-&gt;</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">qPix</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">nRow</span><span class="p">,</span> <span class="n">nCol</span><span class="p">,</span> <span class="n">qLabel</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//插入空数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">insertRow</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">insertRow</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//设置每次选择以行为单位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">::</span><span class="n">SelectRows</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="获取选中数据">获取选中数据</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//方式一
</span></span></span><span class="line"><span class="cl"><span class="c1">//这种方式,无法选择空行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;方式一--------------------------------&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">QList</span><span class="o">&lt;</span><span class="n">QTableWidgetItem</span><span class="o">*&gt;</span> <span class="n">qTableItems</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">selectedItems</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">qTableItems</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">qTableItems</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">row</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="o">&lt;&lt;</span> <span class="s">&#34;:&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="o">&lt;&lt;</span> <span class="n">qTableItems</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">column</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="o">&lt;&lt;</span> <span class="s">&#34; text=&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="o">&lt;&lt;</span> <span class="n">qTableItems</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//方式2
</span></span></span><span class="line"><span class="cl"><span class="c1">//这种方式,可以选择空行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;方式二--------------------------------&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//选择模式器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QItemSelectionModel</span><span class="o">*</span> <span class="n">qItemSelModel</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">selectionModel</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取所有的选择索引
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QModelIndexList</span> <span class="n">qModelIndexLst</span> <span class="o">=</span> <span class="n">qItemSelModel</span><span class="o">-&gt;</span><span class="n">selectedIndexes</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取所有被选中的行号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">stdRows</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">qModelIndexLst</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//重复的插入会失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">stdRows</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">qModelIndexLst</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">row</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="删除数据">删除数据</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//Slot
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">removeColumn</span><span class="p">(</span><span class="kt">int</span> <span class="n">column</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">removeRow</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//给用户提示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QString</span> <span class="n">qstrMsg</span> <span class="o">=</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;您确认删除:&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">itr</span> <span class="o">=</span> <span class="n">stdRows</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">itr</span> <span class="o">!=</span> <span class="n">stdRows</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">itr</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QTableWidgetItem</span><span class="o">*</span> <span class="n">item</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">item</span><span class="p">(</span><span class="o">*</span><span class="n">itr</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">qstrMsg</span> <span class="o">+=</span> <span class="s">&#34;[&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">qstrMsg</span> <span class="o">+=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="o">*</span><span class="n">itr</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">qstrMsg</span> <span class="o">+=</span> <span class="s">&#34;:&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">qstrMsg</span> <span class="o">+=</span> <span class="n">item</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">qstrMsg</span> <span class="o">+=</span> <span class="s">&#34;]&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">nRet</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">::</span><span class="n">information</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="n">qstrMsg</span><span class="p">,</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;确认&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	<span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;取消&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//用户点击了确认按钮, nRet == 0
</span></span></span><span class="line"><span class="cl"><span class="c1">//用户点击了取消按钮, nRet == 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="n">nRet</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//删除多行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//获取所有的选择索引
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QModelIndexList</span> <span class="n">s</span> <span class="o">=</span> <span class="n">qItemSelModel</span><span class="o">-&gt;</span><span class="n">selectedIndexes</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//每次删除一行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ui</span><span class="p">.</span><span class="n">tableWidget</span><span class="o">-&gt;</span><span class="n">removeRow</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">row</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="源代码">源代码</h3>
<p><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/QTableWidget.7z" rel="">QTableWidget.7z</a></p>
<h2 id="qtreewidget">QTreeWidget</h2>
<h3 id="属性-3">属性</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//标题显示与隐藏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">header</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">setVisible</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setSortingEnabled</span>
</span></span><span class="line"><span class="cl"><span class="c1">//动画
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setAnimated</span>
</span></span><span class="line"><span class="cl"><span class="c1">//滚动条显示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setVerticalScrollBarPolicy</span>
</span></span><span class="line"><span class="cl"><span class="n">serHorizontalScrollBarPolicy</span>
</span></span><span class="line"><span class="cl"><span class="c1">//选择模式,跟QListWidget一样
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">selectionMode</span>
</span></span><span class="line"><span class="cl"><span class="c1">//选择行、列、一项
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">setSelectionBehavior</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/QTreeWidget%e5%b1%9e%e6%80%a7.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QTreeWidget%E5%B1%9E%E6%80%A7.png, images/QTreeWidget%e5%b1%9e%e6%80%a7.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QTreeWidget%E5%B1%9E%E6%80%A7.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/QTreeWidget%E5%B1%9E%E6%80%A7.png"
        title="QTreeWidget属性" /></p>
<h3 id="常用函数-4">常用函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//QTreeWidget
</span></span></span><span class="line"><span class="cl"><span class="c1">//插入顶部节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">insertTopLevelItem</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">insertTopLevelItems</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="k">const</span> <span class="n">QList</span><span class="o">&lt;</span><span class="n">QTreeWidgetItem</span> <span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">items</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QTreeWidget</span><span class="o">::</span><span class="n">addTopLevelItem</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">QTreeWidget</span><span class="o">::</span><span class="n">addTopLevelItems</span><span class="p">(</span><span class="k">const</span> <span class="n">QList</span><span class="o">&lt;</span><span class="n">QTreeWidgetItem</span> <span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">items</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取顶部节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">QTreeWidget</span><span class="o">::</span><span class="n">topLevelItem</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取顶部节点数量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">topLevelItemCount</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//插入Widget控件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">QTreeWidget</span><span class="o">::</span><span class="n">setItemWidget</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">,</span> <span class="n">QWidget</span> <span class="o">*</span><span class="n">widget</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取选中节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QList</span><span class="o">&lt;</span><span class="n">QTreeWidgetItem</span> <span class="o">*&gt;</span> <span class="n">QTreeWidget</span><span class="o">::</span><span class="n">selectedItems</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置列数量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setColumnCount</span><span class="p">(</span><span class="kt">int</span> <span class="n">columns</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//QTreeWidgetItem
</span></span></span><span class="line"><span class="cl"><span class="c1">//插入子节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">addChild</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">child</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">addChildren</span><span class="p">(</span><span class="k">const</span> <span class="n">QList</span><span class="o">&lt;</span><span class="n">QTreeWidgetItem</span> <span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">children</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">setText</span><span class="p">(</span><span class="kt">int</span> <span class="n">column</span><span class="p">,</span> <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取父节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QTreeWidgetItem</span><span class="o">*</span> <span class="n">QTreeWidgetItem</span><span class="o">::</span><span class="n">parent</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取treeWidget
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QTreeWidget</span><span class="o">*</span> <span class="nf">treeWidget</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="槽函数">槽函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//收缩
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">collapseItem</span><span class="p">(</span><span class="k">const</span> <span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//展开
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">expandItem</span><span class="p">(</span><span class="k">const</span> <span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="事件信号-7">事件信号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">currentItemChanged</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">current</span><span class="p">,</span> <span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">previous</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemActivated</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemChanged</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemClicked</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemCollapsed</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemDoubleClicked</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemEntered</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemExpanded</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemPressed</span><span class="p">(</span><span class="n">QTreeWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">column</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">itemSelectionChanged</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="清空内容-1">清空内容</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QTreeWidget&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//清理标题,不清理数据
</span></span></span><span class="line"><span class="cl"><span class="c1">//ui.treeWidget-&gt;setColumnCount(0);//设置为0,不会清理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">setHeaderItem</span><span class="p">(</span><span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//清空数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">clear</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="插入标题-1">插入标题</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//设置4列
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QTreeWidgetItem</span><span class="o">*</span> <span class="n">pTreeHeader</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">headerItem</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">pTreeHeader</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#34;head1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">pTreeHeader</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;head2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">pTreeHeader</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#34;head3&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">pTreeHeader</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#34;head4&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="插入数据-1">插入数据</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//顶部节点插入
</span></span></span><span class="line"><span class="cl"><span class="c1">//在结尾处插入
</span></span></span><span class="line"><span class="cl"><span class="c1">//方式一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">addTopLevelItem</span><span class="p">(</span><span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#34;tree node1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;tree node2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//方式二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">addTopLevelItem</span><span class="p">(</span><span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">({</span><span class="s">&#34;tree node11&#34;</span><span class="p">,</span> <span class="s">&#34;tree node22&#34;</span><span class="p">}));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//在指定位置插入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">insertTopLevelItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">({</span> <span class="s">&#34;tree node1-1&#34;</span><span class="p">,</span> <span class="s">&#34;tree node2-2&#34;</span> <span class="p">}));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//在结尾插入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">insertTopLevelItem</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItemCount</span><span class="p">(),</span> <span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">({</span> <span class="s">&#34;tree node End&#34;</span> <span class="p">}));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//子节点插入
</span></span></span><span class="line"><span class="cl"><span class="c1">//方式一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">({</span> <span class="s">&#34;child1&#34;</span> <span class="p">,</span><span class="s">&#34;child2&#34;</span><span class="p">,</span> <span class="s">&#34;child3&#34;</span> <span class="p">}));</span>
</span></span><span class="line"><span class="cl"><span class="o">/</span> <span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItem</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">({</span> <span class="s">&#34;child11&#34;</span> <span class="p">}));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//方式二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QTreeWidgetItem</span><span class="o">*</span> <span class="n">pTreeItem</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItem</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">addTopLevelItem</span><span class="p">(</span><span class="k">new</span> <span class="n">QTreeWidgetItem</span><span class="p">(</span><span class="n">pTreeItem</span><span class="p">,</span> <span class="p">{</span> <span class="s">&#34;child110012&#34;</span> <span class="p">}));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//插入图标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">setIconSize</span><span class="p">(</span><span class="n">QSize</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">setIcon</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QIcon</span><span class="p">(</span><span class="s">&#34;:/luoqt/ke nan.png&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//插入Widget控件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QPushButton</span><span class="o">*</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&#34;test&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">setItemWidget</span><span class="p">(</span><span class="n">ui</span><span class="p">.</span><span class="n">treeWidget</span><span class="o">-&gt;</span><span class="n">topLevelItem</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">btn</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qdialog">QDialog</h2>
<h3 id="常用函数-5">常用函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//拿Dialog的返回值,与exec的返回值一样
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">QDialog</span><span class="o">::</span><span class="n">result</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="槽函数-1">槽函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//默认显示的是非模态对话框.
</span></span></span><span class="line"><span class="cl"><span class="c1">//可在show前调用setModal(true),或者setWindowModality(Qt::ApplicationModal),将其设置为模态对话框.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">QWidget</span><span class="o">::</span><span class="n">show</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//阻塞,有返回值, 显示的是模态对话框.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">int</span> <span class="nf">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//可将一个按钮的点击信号与下述槽函数绑定
</span></span></span><span class="line"><span class="cl"><span class="c1">//exec的返回值为 QDialog::Accepted
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">accept</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//exec的返回值为 QDialog::Rejected
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">reject</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">//可在与按钮点击信号绑定的槽函数中调用,这样就可以自定义exec的返回值为 r
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">done</span><span class="p">(</span><span class="kt">int</span> <span class="n">r</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="自定义messagebox">自定义MessageBox</h3>
<ol>
<li>新建一个Qt类继承QDialog</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e8%87%aa%e5%ae%9a%e4%b9%89MessageBox1.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E8%87%AA%E5%AE%9A%E4%B9%89MessageBox1.png, images/%e8%87%aa%e5%ae%9a%e4%b9%89MessageBox1.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E8%87%AA%E5%AE%9A%E4%B9%89MessageBox1.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E8%87%AA%E5%AE%9A%E4%B9%89MessageBox1.png"
        title="自定义MessageBox1" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e8%87%aa%e5%ae%9a%e4%b9%89MessageBox2.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E8%87%AA%E5%AE%9A%E4%B9%89MessageBox2.png, images/%e8%87%aa%e5%ae%9a%e4%b9%89MessageBox2.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E8%87%AA%E5%AE%9A%E4%B9%89MessageBox2.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E8%87%AA%E5%AE%9A%E4%B9%89MessageBox2.png"
        title="自定义MessageBox2" /></p>
<ol start="2">
<li>自定义界面</li>
</ol>
<p>可以弄一个QLabel控件用来显示要提示的信息,</p>
<p>将确认按钮与QDialog的槽函数accept绑定,</p>
<p>将取消按钮与QDialog的槽函数reject绑定.</p>
<h3 id="qprogressbar应用">QProgressBar应用</h3>
<h4 id="新建一个线程类模拟做事">新建一个线程类,模拟做事</h4>
<h5 id="luothreadh">LuoThread.h</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QThread&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">LuoThread</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QThread</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoThread</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="o">~</span><span class="n">LuoThread</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">run</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">signals</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="c1">///0~1000
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">void</span> <span class="n">SetPos</span><span class="p">(</span><span class="kt">int</span> <span class="n">pos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="luothreadcpp">LuoThread.cpp</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;luothread.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">LuoThread</span><span class="o">::</span><span class="n">LuoThread</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">LuoThread</span><span class="o">::~</span><span class="n">LuoThread</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">LuoThread</span><span class="o">::</span><span class="n">run</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//模拟做事
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//这个地方需要设置QProgressBar的范围为0-1000
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">1000</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">SetPos</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">msleep</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="新建一个对话框类显示进度">新建一个对话框类,显示进度</h4>
<h5 id="luoprogressdialogh">LuoProgressDialog.h</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QDialog&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QThread&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;ui_LuoProgressDialog.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">LuoProgressDialog</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QDialog</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">Q_OBJECT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LuoProgressDialog</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Q_NULLPTR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="o">~</span><span class="n">LuoProgressDialog</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//0~1000
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">void</span> <span class="n">SetPos</span><span class="p">(</span><span class="kt">int</span> <span class="n">pos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">Ui</span><span class="o">::</span><span class="n">LuoProgressDialog</span> <span class="n">ui</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="luoprogressdialogcpp">LuoProgressDialog.cpp</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;LuoProgressDialog.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">LuoProgressDialog</span><span class="o">::</span><span class="n">LuoProgressDialog</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">:</span> <span class="n">QDialog</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//为了实现圆角效果,在QDialog上面放一个QWidget控件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//在QWidget控件上面放一个QProgressBar控件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//去掉标题栏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">this</span><span class="o">-&gt;</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">FramelessWindowHint</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//设置背景透明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">this</span><span class="o">-&gt;</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">WA_TranslucentBackground</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">LuoProgressDialog</span><span class="o">::~</span><span class="n">LuoProgressDialog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">LuoProgressDialog</span><span class="o">::</span><span class="n">SetPos</span><span class="p">(</span><span class="kt">int</span> <span class="n">pos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">progressBar</span><span class="o">-&gt;</span><span class="n">setValue</span><span class="p">(</span><span class="n">pos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="mi">1000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//透明度 1.0 0.0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="k">this</span><span class="o">-&gt;</span><span class="n">setWindowOpacity</span><span class="p">((</span><span class="kt">float</span><span class="p">)</span><span class="n">i</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="n">QThread</span><span class="o">::</span><span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="c1">//界面上有一个QLabel控件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="c1">//这个地方的setText只是发出信号,需要等待槽函数进行处理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="c1">//LuoProgressDialog::SetPos(int pos)这个槽函数不退出,setText的槽函数是不会处理的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="n">ui</span><span class="p">.</span><span class="n">label</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//这一步会将消息队列中的消息都处理下,会立即调用槽函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="n">QEventLoop</span> <span class="n">loop</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="n">loop</span><span class="p">.</span><span class="n">processEvents</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">this</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>为了实现圆角效果,需要设置QWidget的样式为:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">#</span><span class="nn">widget</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">background-color</span><span class="p">:</span> <span class="nf">qlineargradient</span><span class="p">(</span><span class="n">spread</span><span class="err">:</span><span class="n">reflect</span><span class="p">,</span> <span class="n">x1</span><span class="err">:</span><span class="mf">0.999896</span><span class="p">,</span> <span class="n">y1</span><span class="err">:</span><span class="mf">0.494136</span><span class="p">,</span> <span class="n">x2</span><span class="err">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">y2</span><span class="err">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">stop</span><span class="err">:</span><span class="mi">0</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">stop</span><span class="err">:</span><span class="mi">1</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="k">border</span><span class="p">:</span><span class="mi">1</span><span class="kt">px</span> <span class="kc">groove</span> <span class="nb">rgb</span><span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="mi">232</span><span class="p">,</span> <span class="mi">232</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">border-radius</span><span class="p">:</span><span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="main中调用">Main中调用</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;luothread.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;LuoProgressDialog.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">QApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//进度条
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">LuoProgressDialog</span> <span class="n">luoPro</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//线程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">LuoThread</span> <span class="n">luoThread</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//信号槽绑定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="o">&amp;</span><span class="n">luoThread</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">SetPos</span><span class="p">(</span><span class="kt">int</span><span class="p">)),</span> <span class="o">&amp;</span><span class="n">luoPro</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">SetPos</span><span class="p">(</span><span class="kt">int</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//启动线程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">luoThread</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//显示对话框
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">luoPro</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="源代码-1">源代码</h3>
<p><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/QDialog.7z" rel="">QDialog.7z</a></p>
<h2 id="qt菜单">Qt菜单</h2>
<h3 id="widget创建菜单">Widget创建菜单</h3>
<h4 id="添加菜单">添加菜单</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">LuoWidget</span><span class="o">::</span><span class="n">LuoWidget</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//插入菜单栏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QMenuBar</span><span class="o">*</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMenuBar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//设置菜单栏大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">m</span><span class="o">-&gt;</span><span class="n">resize</span><span class="p">(</span><span class="n">width</span><span class="p">(),</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//一级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QMenu</span><span class="o">*</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//二级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QAction</span><span class="o">*</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">QAction</span><span class="o">*</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">QAction</span><span class="o">*</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.3&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置图标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">a3</span><span class="o">-&gt;</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s">&#34;:/LuoMenu/ke nan.png&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//三级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QMenu</span><span class="o">*</span> <span class="n">m14</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.4&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">m14</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;三级菜单1.4.1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置图标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">m14</span><span class="o">-&gt;</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s">&#34;:/LuoMenu/ke nan.png&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//一级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">QMenu</span><span class="o">*</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="n">QMenu</span><span class="o">*</span> <span class="n">m3</span> <span class="o">=</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单3&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="事件信号-8">事件信号</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//QMenuBar
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">hovered</span><span class="p">(</span><span class="n">QAction</span> <span class="o">*</span><span class="n">action</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">triggered</span><span class="p">(</span><span class="n">QAction</span> <span class="o">*</span><span class="n">action</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//QMenu
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">hovered</span><span class="p">(</span><span class="n">QAction</span> <span class="o">*</span><span class="n">action</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">triggered</span><span class="p">(</span><span class="n">QAction</span> <span class="o">*</span><span class="n">action</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//QAction
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">changed</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">hovered</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">toggled</span><span class="p">(</span><span class="kt">bool</span> <span class="n">checked</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">triggered</span><span class="p">(</span><span class="kt">bool</span> <span class="n">checked</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//槽函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">Hover</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Hover&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">Action1</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Action1&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">Action</span><span class="p">(</span><span class="n">QAction</span><span class="o">*</span> <span class="n">act</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Action &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">act</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//进行绑定
</span></span></span><span class="line"><span class="cl"><span class="c1">//一级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">m1</span> <span class="o">=</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//QMenu所有子节点(子节点的子节点)点击后,都会触发该信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">connect</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">triggered</span><span class="p">(</span><span class="n">QAction</span><span class="o">*</span><span class="p">)),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">Action</span><span class="p">(</span><span class="n">QAction</span><span class="o">*</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//二级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QAction</span><span class="o">*</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//QAction 触发信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">connect</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">triggered</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">Action1</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">QAction</span><span class="o">*</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//QAction 鼠标悬停信号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">connect</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">hovered</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">Hover</span><span class="p">()));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="动态产生菜单">动态产生菜单</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//槽函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">Hovered</span><span class="p">(</span><span class="n">QAction</span><span class="o">*</span> <span class="n">act</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//动态菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="n">act</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单3&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">act</span><span class="o">-&gt;</span><span class="n">menu</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">act</span><span class="o">-&gt;</span><span class="n">menu</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单3.1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">		<span class="n">act</span><span class="o">-&gt;</span><span class="n">menu</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单3.2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">		<span class="n">act</span><span class="o">-&gt;</span><span class="n">menu</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单3.3&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//信号槽绑定
</span></span></span><span class="line"><span class="cl"><span class="c1">//插入菜单栏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QMenuBar</span><span class="o">*</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMenuBar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//悬停,动态菜单生成
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">connect</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">hovered</span><span class="p">(</span><span class="n">QAction</span><span class="o">*</span><span class="p">)),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">Hovered</span><span class="p">(</span><span class="n">QAction</span><span class="o">*</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="菜单单选和多选">菜单单选和多选</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//槽函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">Action1</span><span class="p">(</span><span class="kt">bool</span> <span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Action1 &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//二级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QAction</span><span class="o">*</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">QAction</span><span class="o">*</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">QAction</span><span class="o">*</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.3&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//设置可选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">a1</span><span class="o">-&gt;</span><span class="n">setCheckable</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">a2</span><span class="o">-&gt;</span><span class="n">setCheckable</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">a3</span><span class="o">-&gt;</span><span class="n">setCheckable</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//添加到组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QActionGroup</span><span class="o">*</span> <span class="n">ag</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QActionGroup</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ag</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">a2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ag</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">a3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//单选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ag</span><span class="o">-&gt;</span><span class="n">setExclusive</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//是否选中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">connect</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">triggered</span><span class="p">(</span><span class="kt">bool</span><span class="p">)),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">Action1</span><span class="p">(</span><span class="kt">bool</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//添加快捷键
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">a1</span><span class="o">-&gt;</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">QString</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="按钮菜单">按钮菜单</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//准备一个按钮,响应点击事件
</span></span></span><span class="line"><span class="cl"><span class="c1">//按钮点击事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">Click</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//鼠标位置显示菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//m1的类型是QMenu
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">m1</span><span class="o">-&gt;</span><span class="n">exec</span><span class="p">(</span><span class="n">QCursor</span><span class="o">::</span><span class="n">pos</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">QMenuBar</span><span class="o">*</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMenuBar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置菜单栏大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">m</span><span class="o">-&gt;</span><span class="n">resize</span><span class="p">(</span><span class="n">width</span><span class="p">(),</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="c1">//一级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">m1</span> <span class="o">=</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//二级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QAction</span><span class="o">*</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">QAction</span><span class="o">*</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">QAction</span><span class="o">*</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.3&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//三级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QMenu</span><span class="o">*</span> <span class="n">m14</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;二级菜单1.4&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">m14</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;三级菜单1.4.1&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e6%8c%89%e9%92%ae%e8%8f%9c%e5%8d%95.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%8C%89%E9%92%AE%E8%8F%9C%E5%8D%95.png, images/%e6%8c%89%e9%92%ae%e8%8f%9c%e5%8d%95.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%8C%89%E9%92%AE%E8%8F%9C%E5%8D%95.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E6%8C%89%E9%92%AE%E8%8F%9C%E5%8D%95.png"
        title="按钮菜单" /></p>
<p>点击按钮的时候,就会弹出菜单.</p>
<h4 id="工具栏">工具栏</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QToolBar&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">QToolBar</span><span class="o">*</span> <span class="n">tBar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QToolBar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">tBar</span><span class="o">-&gt;</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">(),</span> <span class="n">width</span><span class="p">(),</span> <span class="mi">30</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">tBar</span><span class="o">-&gt;</span><span class="n">setIconSize</span><span class="p">(</span><span class="n">QSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">tBar</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">a1</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e5%b7%a5%e5%85%b7%e6%a0%8f.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%B7%A5%E5%85%B7%E6%A0%8F.png, images/%e5%b7%a5%e5%85%b7%e6%a0%8f.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%B7%A5%E5%85%B7%E6%A0%8F.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%B7%A5%E5%85%B7%E6%A0%8F.png"
        title="工具栏" /></p>
<h4 id="状态栏">状态栏</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;QStatusBar&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">QStatusBar</span><span class="o">*</span> <span class="n">sBar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QStatusBar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">sBar</span><span class="o">-&gt;</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">()</span> <span class="o">-</span> <span class="mi">30</span><span class="p">,</span> <span class="n">width</span><span class="p">(),</span> <span class="mi">30</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">sBar</span><span class="o">-&gt;</span><span class="n">showMessage</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;测试消息3秒消失!&#34;</span><span class="p">),</span> <span class="mi">3000</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e7%8a%b6%e6%80%81%e6%a0%8f.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E7%8A%B6%E6%80%81%E6%A0%8F.png, images/%e7%8a%b6%e6%80%81%e6%a0%8f.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E7%8A%B6%E6%80%81%E6%A0%8F.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E7%8A%B6%E6%80%81%E6%A0%8F.png"
        title="状态栏" /></p>
<h3 id="qmainwindow">QMainWindow</h3>
<p>QMainWindow继承QWidget,封装了很多操作.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">QMainWindow</span>
</span></span><span class="line"><span class="cl"><span class="err">│</span>  
</span></span><span class="line"><span class="cl"><span class="err">├─</span><span class="n">QMenuBar</span>
</span></span><span class="line"><span class="cl"><span class="err">├</span>  <span class="err">└─</span><span class="n">QMenu</span>
</span></span><span class="line"><span class="cl"><span class="err">├</span>     <span class="err">└─</span><span class="n">QAction</span>
</span></span><span class="line"><span class="cl"><span class="err">├─</span><span class="n">QToolBar</span>
</span></span><span class="line"><span class="cl"><span class="err">└─</span><span class="n">QStatusBar</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="菜单栏">菜单栏</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//一级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QMenu</span><span class="o">*</span> <span class="n">m1</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">menuBar</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//二级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QAction</span><span class="o">*</span> <span class="n">a11</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单1.1&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">QAction</span><span class="o">*</span> <span class="n">a12</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单1.2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">QAction</span><span class="o">*</span> <span class="n">a13</span> <span class="o">=</span> <span class="n">m1</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单1.3&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//添加图标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">a12</span><span class="o">-&gt;</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s">&#34;:/LuoMenu/ke nan.png&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//一级菜单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QMenu</span><span class="o">*</span> <span class="n">m2</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">menuBar</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单2&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">QMenu</span><span class="o">*</span> <span class="n">m3</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">menuBar</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addMenu</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;菜单3&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="工具栏-1">工具栏</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">mainToolBar</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">a11</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">mainToolBar</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">a12</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ui</span><span class="p">.</span><span class="n">mainToolBar</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">a13</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//设置ToolBar样式, 文件名显示在图标下面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ui</span><span class="p">.</span><span class="n">mainToolBar</span><span class="o">-&gt;</span><span class="n">setToolButtonStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">ToolButtonTextUnderIcon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//工具栏换行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">this</span><span class="o">-&gt;</span><span class="n">addToolBarBreak</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//默认顶部插入工具栏
</span></span></span><span class="line"><span class="cl"><span class="c1">//可调用下面的重载函数,调整插入位置
</span></span></span><span class="line"><span class="cl"><span class="c1">//void addToolBar(Qt::ToolBarArea area, QToolBar * toolbar)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QToolBar</span><span class="o">*</span> <span class="n">tBar2</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">addToolBar</span><span class="p">(</span><span class="s">&#34;toolBar2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">tBar2</span><span class="o">-&gt;</span><span class="n">addAction</span><span class="p">(</span><span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;顶部&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="状态栏-1">状态栏</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">this</span><span class="o">-&gt;</span><span class="n">statusBar</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">showMessage</span><span class="p">(</span><span class="s">&#34;Status Bar&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="源码">源码</h3>
<p><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/Qt%E8%8F%9C%E5%8D%95.7z" rel="">Qt菜单.7z</a></p>
<h2 id="qt事件">Qt事件</h2>
<p>重载Qt事件有2种方式:</p>
<ul>
<li>重载event这个虚函数,在里面判断event的类型,</li>
<li>重载各自的事件虚函数(如 keyPressEvent).</li>
</ul>
<h3 id="qevent">QEvent</h3>
<h4 id="重载事件">重载事件</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">bool</span> <span class="nf">event</span><span class="p">(</span><span class="n">QEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="示例-5">示例</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//声明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//重载event
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">bool</span> <span class="n">event</span><span class="p">(</span><span class="n">QEvent</span><span class="o">*</span> <span class="n">ev</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="n">LuoEvent</span><span class="o">::</span><span class="n">event</span><span class="p">(</span><span class="n">QEvent</span><span class="o">*</span> <span class="n">ev</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">switch</span> <span class="p">(</span><span class="n">ev</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">case</span> <span class="n">QEvent</span><span class="o">::</span><span class="nl">KeyPress</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//键盘事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">//推荐重载keyPressEvent或keyReleaseEvent
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QKeyEvent</span><span class="o">*</span> <span class="n">keyEv</span> <span class="o">=</span> <span class="p">(</span><span class="n">QKeyEvent</span><span class="o">*</span><span class="p">)</span><span class="n">ev</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//判断是否是自动触发的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">keyEv</span><span class="o">-&gt;</span><span class="n">isAutoRepeat</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//这个输出的是大写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="n">keyEv</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//这个可以区分大小写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">keyEv</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">keyEv</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="sc">&#39;A&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//返回true表示已被处理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">case</span> <span class="n">QEvent</span><span class="o">::</span><span class="nl">MouseButtonPress</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//鼠标事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QMouseEvent</span><span class="o">*</span> <span class="n">me</span> <span class="o">=</span> <span class="p">(</span><span class="n">QMouseEvent</span><span class="o">*</span><span class="p">)</span><span class="n">ev</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//相对坐标(本地坐标)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;QEvent::MouseButtonPress &#34;</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;相对坐标 &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">me</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">me</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//程序窗口坐标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;QEvent::MouseButtonPress &#34;</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;程序窗口坐标 &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">me</span><span class="o">-&gt;</span><span class="n">windowPos</span><span class="p">().</span><span class="n">x</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">me</span><span class="o">-&gt;</span><span class="n">windowPos</span><span class="p">().</span><span class="n">y</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//屏幕坐标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;QEvent::MouseButtonPress &#34;</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;屏幕坐标 &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">me</span><span class="o">-&gt;</span><span class="n">screenPos</span><span class="p">().</span><span class="n">x</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">me</span><span class="o">-&gt;</span><span class="n">screenPos</span><span class="p">().</span><span class="n">y</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//本地坐标转屏幕坐标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QPoint</span> <span class="n">gPos</span> <span class="o">=</span> <span class="n">mapToGlobal</span><span class="p">(</span><span class="n">me</span><span class="o">-&gt;</span><span class="n">pos</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;QEvent::MouseButtonPress &#34;</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;本地坐标转屏幕坐标 &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">gPos</span><span class="p">.</span><span class="n">x</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="n">gPos</span><span class="p">.</span><span class="n">y</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//获取鼠标的屏幕坐标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;QCursor&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">QCursor</span><span class="o">::</span><span class="n">pos</span><span class="p">().</span><span class="n">x</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">QCursor</span><span class="o">::</span><span class="n">pos</span><span class="p">().</span><span class="n">y</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//鼠标按钮事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">if</span> <span class="p">(</span><span class="n">me</span><span class="o">-&gt;</span><span class="n">buttons</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">::</span><span class="n">LeftButton</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;LeftButton&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">me</span><span class="o">-&gt;</span><span class="n">buttons</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">::</span><span class="n">RightButton</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;RightButton&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">me</span><span class="o">-&gt;</span><span class="n">buttons</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">::</span><span class="n">MiddleButton</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;MiddleButton&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="n">QEvent</span><span class="o">::</span><span class="nl">Resize</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//窗口大小改变事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">QResizeEvent</span><span class="o">*</span> <span class="n">re</span> <span class="o">=</span> <span class="p">(</span><span class="n">QResizeEvent</span><span class="o">*</span><span class="p">)</span><span class="n">ev</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Resize Old &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">re</span><span class="o">-&gt;</span><span class="n">oldSize</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="o">&lt;&lt;</span> <span class="s">&#34;Resize New &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">re</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">		<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">QWidget</span><span class="o">::</span><span class="n">event</span><span class="p">(</span><span class="n">ev</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="键盘事件">键盘事件</h3>
<h4 id="重载事件-1">重载事件</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">keyPressEvent</span><span class="p">(</span><span class="n">QKeyEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">keyReleaseEvent</span><span class="p">(</span><span class="n">QKeyEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="示例-6">示例</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//声明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//键盘事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">keyPressEvent</span><span class="p">(</span><span class="n">QKeyEvent</span><span class="o">*</span> <span class="n">ev</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">keyReleaseEvent</span><span class="p">(</span><span class="n">QKeyEvent</span><span class="o">*</span> <span class="n">ev</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">LuoEvent</span><span class="o">::</span><span class="n">keyPressEvent</span><span class="p">(</span><span class="n">QKeyEvent</span><span class="o">*</span> <span class="n">ev</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//键盘按下某个按键后,会多次响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//解决键盘按钮连发现象,判断是否是自动触发的,若是则返回
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="n">ev</span><span class="o">-&gt;</span><span class="n">isAutoRepeat</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;keyPressEvent &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ev</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">LuoEvent</span><span class="o">::</span><span class="n">keyReleaseEvent</span><span class="p">(</span><span class="n">QKeyEvent</span><span class="o">*</span> <span class="n">ev</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">ev</span><span class="o">-&gt;</span><span class="n">isAutoRepeat</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;keyReleaseEvent &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ev</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="鼠标事件">鼠标事件</h3>
<h4 id="重载事件-2">重载事件</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//鼠标移进来
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">enterEvent</span><span class="p">(</span><span class="n">QEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//鼠标移出去
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">leaveEvent</span><span class="p">(</span><span class="n">QEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">mouseDoubleClickEvent</span><span class="p">(</span><span class="n">QMouseEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//鼠标移动事件,需要开启鼠标跟踪,setMouseTracking(true)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="n">QMouseEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="n">QMouseEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">mouseReleaseEvent</span><span class="p">(</span><span class="n">QMouseEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="坐标">坐标</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//相对坐标(本地坐标)
</span></span></span><span class="line"><span class="cl"><span class="c1">//相对于Widget的位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">QMouseEvent</span><span class="o">::</span><span class="n">x</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">QMouseEvent</span><span class="o">::</span><span class="n">y</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//程序窗口坐标
</span></span></span><span class="line"><span class="cl"><span class="c1">//相对于程序窗口的位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">const</span> <span class="n">QPointF</span> <span class="o">&amp;</span><span class="n">QMouseEvent</span><span class="o">::</span><span class="n">windowPos</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//屏幕坐标
</span></span></span><span class="line"><span class="cl"><span class="c1">//相对于屏幕的位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">const</span> <span class="n">QPointF</span> <span class="o">&amp;</span><span class="n">QMouseEvent</span><span class="o">::</span><span class="n">screenPos</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//本地坐标转屏幕坐标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">QPoint</span> <span class="nf">mapToGlobal</span><span class="p">(</span><span class="k">const</span> <span class="n">QPoint</span> <span class="o">&amp;</span><span class="n">pos</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//获取鼠标的屏幕坐标
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">[</span><span class="k">static</span><span class="p">]</span> <span class="n">QPoint</span> <span class="n">QCursor</span><span class="o">::</span><span class="n">pos</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="按键">按键</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//获取按键状态,鼠标的哪个键被按下
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Qt</span><span class="o">::</span><span class="n">MouseButtons</span> <span class="n">QMouseEvent</span><span class="o">::</span><span class="n">buttons</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">MouseButton</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">NoButton</span>         <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">LeftButton</span>       <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">RightButton</span>      <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">MidButton</span>        <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span> <span class="c1">// ### Qt 6: remove me
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">MiddleButton</span>     <span class="o">=</span> <span class="n">MidButton</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">...</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="窗口大小改变">窗口大小改变</h3>
<p>可重载该事件来解决不同电脑屏幕分辨率不同,而导致的控件显示异常的现象.</p>
<h4 id="重载事件-3">重载事件</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="n">QResizeEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="示例-7">示例</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//声明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//窗口大小改变事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">resizeEvent</span><span class="p">(</span><span class="n">QResizeEvent</span><span class="o">*</span> <span class="n">re</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">LuoEvent</span><span class="o">::</span><span class="n">resizeEvent</span><span class="p">(</span><span class="n">QResizeEvent</span><span class="o">*</span> <span class="n">re</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;resizeEvent&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//窗口改变前的大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//re-&gt;oldSize()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//窗口改变后的大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//re-&gt;size()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="源代码-2">源代码</h3>
<p><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/Qt%E4%BA%8B%E4%BB%B6.7z" rel="">Qt事件.7z</a></p>
<h2 id="qpainter">QPainter</h2>
<h3 id="重载事件-4">重载事件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="绘制文本">绘制文本</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//声明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl"><span class="c1">//重载这个虚函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span><span class="o">*</span> <span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">LuoPaint</span><span class="o">::</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span><span class="o">*</span> <span class="n">event</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//设置绘制设备 (Widget)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">QPainter</span> <span class="nf">p</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//设置画笔颜色
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">p</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//设置字体
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//p.setFont(QFont(QStringLiteral(&#34;黑体&#34;), 30));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//这样设置之后,我们在字体选中控件中选择字体后,界面的绘制的字体没有改变
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//我们需要调用update这个槽函数,来刷新界面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">QFont</span> <span class="n">font</span> <span class="o">=</span> <span class="n">ui</span><span class="p">.</span><span class="n">fontComboBox</span><span class="o">-&gt;</span><span class="n">currentFont</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">font</span><span class="p">.</span><span class="n">setPixelSize</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">font</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//绘制文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">p</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">QStringLiteral</span><span class="p">(</span><span class="s">&#34;测试文字&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>需要注意的是,我们通过字体选择控件选择字体后,需要调update这个槽函数来刷新界面.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/%e5%ad%97%e4%bd%93%e9%80%89%e6%8b%a9%e6%8e%a7%e4%bb%b6%e7%bb%91%e5%ae%9a%e6%a7%bd%e5%87%bd%e6%95%b0.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%AD%97%E4%BD%93%E9%80%89%E6%8B%A9%E6%8E%A7%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%A7%BD%E5%87%BD%E6%95%B0.png, images/%e5%ad%97%e4%bd%93%e9%80%89%e6%8b%a9%e6%8e%a7%e4%bb%b6%e7%bb%91%e5%ae%9a%e6%a7%bd%e5%87%bd%e6%95%b0.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%AD%97%E4%BD%93%E9%80%89%E6%8B%A9%E6%8E%A7%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%A7%BD%E5%87%BD%E6%95%B0.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/%E5%AD%97%E4%BD%93%E9%80%89%E6%8B%A9%E6%8E%A7%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%A7%BD%E5%87%BD%E6%95%B0.png"
        title="字体选择控件绑定槽函数" /></p>
<h3 id="绘制线">绘制线</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//声明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl"><span class="c1">//重载这个虚函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span><span class="o">*</span> <span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">LuoPaint</span><span class="o">::</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span><span class="o">*</span> <span class="n">event</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//设置绘制设备 (Widget)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">QPainter</span> <span class="nf">p</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//绘制线
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//设置画笔样式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">QPen</span> <span class="n">pen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//实线
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">pen</span><span class="p">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">SolidLine</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//线粗
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">pen</span><span class="p">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//线刷子
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">pen</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">red</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//结尾端样式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">pen</span><span class="p">.</span><span class="n">setCapStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">RoundCap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//连接处样式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">pen</span><span class="p">.</span><span class="n">setJoinStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">RoundJoin</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">QVector</span><span class="o">&lt;</span><span class="n">QLine</span><span class="o">&gt;</span> <span class="n">lines</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">lines</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">QLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">350</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">lines</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">QLine</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">450</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">lines</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">QLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">450</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="mi">550</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="p">.</span><span class="n">drawLines</span><span class="p">(</span><span class="n">lines</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="qt配置">Qt配置</h2>
<h3 id="vs2019黑色方案">VS2019黑色方案</h3>
<p><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/VS2019dark.xml" rel="">VS2019dark.xml</a></p>
<ol>
<li>将上述黑色方案放到<strong>Qt目录\Tools\QtCreator\share\qtcreator\styles</strong>.</li>
<li>在QtCreator中工具-&gt;选项-&gt;环境-&gt;theme,选择dark.</li>
<li>在QtCreator中工具-&gt;选项-&gt;文本编辑器,选择VS2019.</li>
</ol>
<h3 id="控制台">控制台</h3>
<p>方便调试,看输出信息.</p>
<h4 id="qtcreator">QtCreator</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/Qt%e5%bc%80%e5%90%af%e6%8e%a7%e5%88%b6%e5%8f%b0.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E5%BC%80%E5%90%AF%E6%8E%A7%E5%88%B6%E5%8F%B0.png, images/Qt%e5%bc%80%e5%90%af%e6%8e%a7%e5%88%b6%e5%8f%b0.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E5%BC%80%E5%90%AF%E6%8E%A7%E5%88%B6%E5%8F%B0.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E5%BC%80%E5%90%AF%E6%8E%A7%E5%88%B6%E5%8F%B0.png"
        title="Qt开启控制台" /></p>
<h4 id="vs">VS</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/VS%e6%8e%a7%e5%88%b6%e5%8f%b0.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VS%E6%8E%A7%E5%88%B6%E5%8F%B0.png, images/VS%e6%8e%a7%e5%88%b6%e5%8f%b0.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VS%E6%8E%A7%E5%88%B6%E5%8F%B0.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VS%E6%8E%A7%E5%88%B6%E5%8F%B0.png"
        title="VS控制台" /></p>
<h3 id="vs番茄插件设置">VS番茄插件设置</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/VSQt%e4%bb%a3%e7%a0%81%e6%8f%90%e7%a4%ba.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VSQt%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA.png, images/VSQt%e4%bb%a3%e7%a0%81%e6%8f%90%e7%a4%ba.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VSQt%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/VSQt%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA.png"
        title="VSQt代码提示" /></p>
<h3 id="环境变量">环境变量</h3>
<p>添加环境变量: Qt_INCLUDEPATH_ = D:\QT\5.12.10\msvc2017_64\include</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="images/Qt%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f.png"
        data-srcset="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png, images/Qt%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f.png 1.5x, /posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png 2x"
        data-sizes="auto"
        alt="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/images/Qt%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png"
        title="Qt环境变量" /></p>
<p>按上述设置后,可解决某些情况下在VS中写Qt代码不提示,工程标红等现象.</p>
<h3 id="vs工程标红">VS工程标红</h3>
<ol>
<li>右键.ui文件,编译.</li>
<li>右键解决方案,重新扫描解决方案.</li>
</ol>
<h2 id="qss">Qss</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//声明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//设置皮肤样式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">static</span> <span class="kt">void</span> <span class="n">SetStyle</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span><span class="o">&amp;</span> <span class="n">styleName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">luoQt</span><span class="o">::</span><span class="n">SetStyle</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span><span class="o">&amp;</span> <span class="n">styleName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">QFile</span> <span class="nf">file</span><span class="p">(</span><span class="n">QString</span><span class="p">(</span><span class="s">&#34;./image/%1.qss&#34;</span><span class="p">).</span><span class="n">arg</span><span class="p">(</span><span class="n">styleName</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="n">b</span> <span class="o">=</span> <span class="n">file</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">QFile</span><span class="o">::</span><span class="n">ReadOnly</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">QString</span> <span class="n">qss</span> <span class="o">=</span> <span class="n">QLatin1String</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">readAll</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="n">qApp</span><span class="o">-&gt;</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="n">qss</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">qApp</span><span class="o">-&gt;</span><span class="n">setPalette</span><span class="p">(</span><span class="n">QPalette</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#34;#F0F0F0&#34;</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/qt/Qss.7z" rel="">Qss.7z</a></p>
<h2 id="qt程序打包">Qt程序打包</h2>
<p>将Qt程序单独放到一个文件夹中,cmd到该文件夹,执行下面的命令.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">windeployqt 程序名
</span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-10-13</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/qt/">Qt</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/sdk/" class="prev" rel="prev" title="Sdk"><i class="fas fa-angle-left fa-fw"></i>Sdk</a>
            <a href="/posts/%E7%95%8C%E9%9D%A2%E7%BC%96%E7%A8%8B/mfc/" class="next" rel="next" title="Mfc">Mfc<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">夏洛魂</div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">夏洛魂</a></span>&nbsp;|&nbsp;<span class="license">MIT</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":150},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
