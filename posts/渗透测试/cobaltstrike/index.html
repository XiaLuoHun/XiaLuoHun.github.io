<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>CobaltStrike使用 - 夏洛魂的个人博客</title><meta name="author" content="夏洛魂">
<meta name="author-link" content="">
<meta name="description" content="前置定义 C2: Command&amp;Control Server的简称,也就是命令与控制服务器. Listener: 攻击者在C2上运行的服务,可以监听Beacon的请求. Beacon: 植入到受感染系统中的恶意程" /><meta name="keywords" content='CobaltStrike' />
  <meta itemprop="name" content="CobaltStrike使用">
  <meta itemprop="description" content="前置定义 C2: Command&amp;Control Server的简称,也就是命令与控制服务器. Listener: 攻击者在C2上运行的服务,可以监听Beacon的请求. Beacon: 植入到受感染系统中的恶意程">
  <meta itemprop="datePublished" content="2021-09-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-09-10T00:00:00+00:00">
  <meta itemprop="wordCount" content="4286">
  <meta itemprop="image" content="https://XiaLuoHun.github.io/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png">
  <meta itemprop="keywords" content="CobaltStrike"><meta property="og:url" content="https://XiaLuoHun.github.io/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/">
  <meta property="og:site_name" content="夏洛魂的个人博客">
  <meta property="og:title" content="CobaltStrike使用">
  <meta property="og:description" content="前置定义 C2: Command&amp;Control Server的简称,也就是命令与控制服务器. Listener: 攻击者在C2上运行的服务,可以监听Beacon的请求. Beacon: 植入到受感染系统中的恶意程">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-09-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-09-10T00:00:00+00:00">
    <meta property="article:tag" content="CobaltStrike">
    <meta property="og:image" content="https://XiaLuoHun.github.io/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://XiaLuoHun.github.io/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png">
  <meta name="twitter:title" content="CobaltStrike使用">
  <meta name="twitter:description" content="前置定义 C2: Command&amp;Control Server的简称,也就是命令与控制服务器. Listener: 攻击者在C2上运行的服务,可以监听Beacon的请求. Beacon: 植入到受感染系统中的恶意程">
<meta name="application-name" content="夏洛魂">
<meta name="apple-mobile-web-app-title" content="夏洛魂"><meta name="theme-color" data-light="#ffffff" data-dark="#ffffff" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://XiaLuoHun.github.io/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/" /><link rel="prev" href="https://XiaLuoHun.github.io/posts/android/android%E5%9F%BA%E7%A1%80/smali/" /><link rel="next" href="https://XiaLuoHun.github.io/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "CobaltStrike使用",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/XiaLuoHun.github.io\/posts\/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95\/cobaltstrike\/"
    },"image": [{
              "@type": "ImageObject",
              "url": "https:\/\/XiaLuoHun.github.io\/posts\/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95\/cobaltstrike\/images\/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png",
              "width":  1438 ,
              "height":  672 
            }],"genre": "posts","keywords": "CobaltStrike","wordcount":  4286 ,
    "url": "https:\/\/XiaLuoHun.github.io\/posts\/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95\/cobaltstrike\/","datePublished": "2021-09-10T00:00:00+00:00","dateModified": "2021-09-10T00:00:00+00:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "夏洛魂"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="fixed" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="夏洛魂的个人博客"><span class="header-title-text">夏洛魂</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              >文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              >标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              >分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/excalidraw/"
                
                
              >在线绘图</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/about/"
                
                
              >关于作者</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="夏洛魂的个人博客"><span class="header-title-text">夏洛魂</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                >文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                >标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                >分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/excalidraw/"
                  
                  
                >在线绘图</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/about/"
                  
                  
                >关于作者</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>CobaltStrike使用</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><img loading="lazy" src="/images/Luo.png" alt="夏洛魂" data-title="夏洛魂" width="20" height="20" class="avatar" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/>&nbsp;夏洛魂</span></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" class="post-category" title="分类 - 渗透测试"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> 渗透测试</a></span></div><div class="post-meta-line"><span title="发布于 2021-09-10 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2021-09-10">2021-09-10</time></span>&nbsp;<span title="4286 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 4300 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 9 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#前置定义">前置定义</a></li>
        <li><a href="#安装">安装</a>
          <ul>
            <li><a href="#windows环境配置示例">Windows环境配置示例</a></li>
            <li><a href="#linux环境配置示例">Linux环境配置示例</a></li>
          </ul>
        </li>
        <li><a href="#listener与payload生成">Listener与Payload生成</a>
          <ul>
            <li><a href="#listener介绍">Listener介绍</a></li>
            <li><a href="#listener创建">Listener创建</a></li>
            <li><a href="#listener配置">Listener配置</a></li>
          </ul>
        </li>
        <li><a href="#beacon详解">Beacon详解</a>
          <ul>
            <li><a href="#http-beacontcp-beacon">HTTP Beacon&amp;TCP Beacon</a></li>
            <li><a href="#smb-beacon">SMB Beacon</a></li>
            <li><a href="#ssh-beacon">SSH Beacon</a></li>
          </ul>
        </li>
        <li><a href="#凭据导出与存储">凭据导出与存储</a>
          <ul>
            <li><a href="#hashdump导出">hashdump导出</a></li>
            <li><a href="#mimikatz导出">Mimikatz导出</a></li>
            <li><a href="#凭据存储">凭据存储</a></li>
          </ul>
        </li>
        <li><a href="#文件管理">文件管理</a></li>
        <li><a href="#进程管理">进程管理</a></li>
        <li><a href="#端口扫描">端口扫描</a></li>
        <li><a href="#net-view">Net View</a></li>
        <li><a href="#屏幕截图">屏幕截图</a></li>
        <li><a href="#浏览器代理">浏览器代理</a></li>
        <li><a href="#web-delivery">Web Delivery</a></li>
        <li><a href="#socks">Socks</a></li>
        <li><a href="#安装扩展">安装扩展</a></li>
        <li><a href="#权限提升">权限提升</a></li>
        <li><a href="#横向移动">横向移动</a></li>
        <li><a href="#控制持久化">控制持久化</a></li>
        <li><a href="#网站克隆">网站克隆</a></li>
        <li><a href="#用户手册">用户手册</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><h2 id="前置定义" class="heading-element"><span>前置定义</span>
  <a href="#%e5%89%8d%e7%bd%ae%e5%ae%9a%e4%b9%89" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><strong>C2</strong>: Command&amp;Control Server的简称,也就是命令与控制服务器.</p>
<p><strong>Listener</strong>: 攻击者在C2上运行的服务,可以监听Beacon的请求.</p>
<p><strong>Beacon</strong>: 植入到受感染系统中的恶意程序,可以请求C2服务器并在受感染系统中执行命令.</p>
<p><strong>TeamServer</strong>: CobaltStrike的服务器组件,是配置和启动Listener的地方.</p>
<h2 id="安装" class="heading-element"><span>安装</span>
  <a href="#%e5%ae%89%e8%a3%85" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 id="windows环境配置示例" class="heading-element"><span>Windows环境配置示例</span>
  <a href="#windows%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e7%a4%ba%e4%be%8b" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>提前安装好jdk,将jdk中的bin目录添加到环境变量中.</p>
<ol>
<li>切换到Cobaltstrike目录执行如下命令.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="c1">//若目录下存在cobaltstrike.store文件,删除
</span></span></span><span class="line"><span class="cl"><span class="c1">//Keytool.exe 这个文件位于jdk的bin目录中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Keytool</span><span class="p">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">keystore</span> <span class="p">.</span><span class="o">/</span><span class="n">cobaltstrike</span><span class="p">.</span><span class="n">store</span> <span class="o">-</span><span class="n">storepass</span> <span class="mi">123456</span> <span class="o">-</span><span class="n">keypass</span> <span class="mi">123456</span> <span class="o">-</span><span class="n">genkey</span> <span class="o">-</span><span class="n">keyalg</span> <span class="n">RSA</span> <span class="o">-</span><span class="n">alias</span> <span class="n">cobaltstrike</span> <span class="o">-</span><span class="n">dname</span> <span class="s">&#34;CN=Major Cobalt Strike, OU=AdvancedPenTesting, O=cobaltstrike, L=Somewhere, S=Cyberspace, C=Earth&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>执行命令.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="p">.</span><span class="o">/</span><span class="n">teamserver</span><span class="p">.</span><span class="n">bat</span> <span class="mf">8.8.8.8</span> <span class="mi">123456</span></span></span></code></pre></td></tr></table>
</div>
</div><p>8.8.8.8为你的服务器外网IP,123456为Coabltstrike的客户端密码.</p>
<ol start="3">
<li>客户端双击cobaltstrike.bat,填写服务器外网IP和teamserver密码,即可登入.</li>
</ol>
<div class="details admonition note open">
    <div class="details-summary admonition-title">
      <i class="icon fa-solid fa-pencil-alt fa-fw" aria-hidden="true"></i>注意<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden="true"></i>
    </div>
    <div class="details-content">
      <div class="admonition-content">如果连不上,需要关掉teamserver所在的服务端的防火墙.</div>
    </div>
  </div>
<h3 id="linux环境配置示例" class="heading-element"><span>Linux环境配置示例</span>
  <a href="#linux%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e7%a4%ba%e4%be%8b" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ol>
<li>CD切换到Cobaltstrike目录.</li>
<li>执行命令</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">./teamserver 8.8.8.8 123456</span></span></code></pre></td></tr></table>
</div>
</div><p>8.8.8.8为你的服务器外网IP,123456为Coabltstrike的客户端密码.</p>
<ol start="3">
<li>客户端运行命令.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl"><span class="n">Javaw</span> <span class="o">-</span><span class="n">Dfile</span><span class="p">.</span><span class="n">encoding</span><span class="o">=</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span> <span class="o">-</span><span class="nl">XX</span><span class="p">:</span><span class="n">ParallelGCThreads</span><span class="o">=</span><span class="mi">4</span> <span class="o">-</span><span class="nl">XX</span><span class="p">:</span><span class="o">+</span><span class="n">AggressiveHeap</span> <span class="o">-</span><span class="nl">XX</span><span class="p">:</span><span class="o">+</span><span class="n">UseParallelGC</span> <span class="o">-</span><span class="n">jar</span> <span class="n">cobaltstrike</span><span class="p">.</span><span class="n">jar</span></span></span></code></pre></td></tr></table>
</div>
</div><p>填写服务器外网IP和teamserver密码,即可登入.</p>
<h2 id="listener与payload生成" class="heading-element"><span>Listener与Payload生成</span>
  <a href="#listener%e4%b8%8epayload%e7%94%9f%e6%88%90" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 id="listener介绍" class="heading-element"><span>Listener介绍</span>
  <a href="#listener%e4%bb%8b%e7%bb%8d" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>Listener(监听器):专门用于对其他对象身上发生的事件或状态改变进行监听和相应处理的对象,当被监视的对象发生情况时,立即采取相应的行动.</p>
<p>在许多的渗透测试工具中,例如empire,metasploit,cobaltstrike中都有Listener的存在.大家可以简单地理解为Listener就是用来<strong>接收目标主机权限的模块</strong>.</p>
<h3 id="listener创建" class="heading-element"><span>Listener创建</span>
  <a href="#listener%e5%88%9b%e5%bb%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p><strong>创建Listener的步骤</strong>：Cobaltstrike&ndash;&gt;Listeners.</p>
<p>目前我使用的是CobaltStrike4.2版本,其中内置了 8个Listener.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Beacon DNS
</span></span><span class="line"><span class="cl">Beacon HTTP
</span></span><span class="line"><span class="cl">Beacon HTTPS
</span></span><span class="line"><span class="cl">Beacon SMB
</span></span><span class="line"><span class="cl">Beacon TCP
</span></span><span class="line"><span class="cl">External C2
</span></span><span class="line"><span class="cl">Foreign HTTP
</span></span><span class="line"><span class="cl">Foreign HTTPS</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Beacon</strong>:为cs内置监听器,也就是说,当我们在目标系统成功执行Payload以后,会弹回一个Beacon的shell给cs.
<strong>Foreign</strong>:主要是提供给外部使用的一些监听器,比如你想利用cs派生一个meterpreter或者 armitage的shell回来,来继续后面的内网渗透,这时就选择使用外部监听器.</p>
<h3 id="listener配置" class="heading-element"><span>Listener配置</span>
  <a href="#listener%e9%85%8d%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>选择Cobaltstrike&ndash;&gt;Listeners,会打开一个标签页,选择Add并选择你要使用的Listener类型,配置好外网IP和端口(不能冲突)点击save即可保存.在以后生成Payload的过程中即可使用该监听器.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE1.png" alt="Listener配置1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE1.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE1.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE1.png?size=large 2x" data-title="Listener配置1" style="--width: 1147px;--aspect-ratio: 1147 / 691;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p><strong>HTTP Host(Stager)</strong>: 控制HTTP Beacon的HTTP Stager的主机.仅当你将此payload与需要显式stager的攻击配对时,才使用此值.</p>
<p><strong>Profile</strong>: 你可以选择一个C2拓展文件变体.通过一个C2文件变体,你可以在一个文件中指定多个配置文件的变量.使用变体文件之后,你设置的每个HTTP或HTTPS监听器会有不同的网络流量指标.</p>
<p><strong>HTTP Port(C2)</strong>: 设置你的HTTP Beacon回连的端口.</p>
<p><strong>HTTP Port(Bind)</strong>: 指定你的HTTP Beacon payload web服务器绑定的端口.如果你要设置端口弯曲重定向器(例如,接受来自80或443端口的连接但将连接路由到团队服务器开在另一个端口上的连接,这样的重定向器),那么这些选项会很有用.</p>
<p><strong>HTTP Host Header</strong>: 如果被指定了,会影响你的HTTP stagers,并通过你的HTTP通信.这个选项
使得通过Cobalt Strike利用域名前置变得更加容易.</p>
<p><strong>HTTP Proxy</strong>: 为此payload指定一个显式的代理配置.</p>
<p>生成常规后门:</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE2.png" alt="Listener配置2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE2.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE2.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Listener%E9%85%8D%E7%BD%AE2.png?size=large 2x" data-title="Listener配置2" style="--width: 813px;--aspect-ratio: 813 / 413;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>无状态木马:</p>
<p>场景:</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E5%9C%BA%E6%99%AF.png" alt="无状态木马场景" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E5%9C%BA%E6%99%AF.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E5%9C%BA%E6%99%AF.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E5%9C%BA%E6%99%AF.png?size=large 2x" data-title="无状态木马场景" style="--width: 615px;--aspect-ratio: 615 / 124;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>生成:</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E7%94%9F%E6%88%90.png" alt="无状态木马生成" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E7%94%9F%E6%88%90.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E7%94%9F%E6%88%90.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%A8%E9%A9%AC%E7%94%9F%E6%88%90.png?size=large 2x" data-title="无状态木马生成" style="--width: 1150px;--aspect-ratio: 1150 / 393;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p><strong>需要注意的是</strong>:如果开启了防火墙会产生一个Windows安全警报.因此最好提前用cmd添加一个防火墙放行规则或关闭防火墙,随后便可将无状态的木马上传到内网的其他机器,运行后返回一个会话.</p>
<h2 id="beacon详解" class="heading-element"><span>Beacon详解</span>
  <a href="#beacon%e8%af%a6%e8%a7%a3" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>右键目标interact来使用Beacon,我们用它来执行各种命令.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%BD%BF%E7%94%A8Beacon.png" alt="使用Beacon" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%BD%BF%E7%94%A8Beacon.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%BD%BF%E7%94%A8Beacon.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%BD%BF%E7%94%A8Beacon.png?size=large 2x" data-title="使用Beacon" style="--width: 1420px;--aspect-ratio: 1420 / 658;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>需要注意一下两点:</p>
<ul>
<li>CobaltStrike默认是60s和teamserver通信一次,这会让我们执行命令或进行其他操作响应很慢,可以通过sleep命令进行修改(如sleep 5, 5s和teamserver通信一次).</li>
<li>执行cmd命令的时候前面要加shell(如shell dir).</li>
</ul>
<h3 id="http-beacontcp-beacon" class="heading-element"><span>HTTP Beacon&amp;TCP Beacon</span>
  <a href="#http-beacontcp-beacon" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>这两种beacon都是比较普通的,只不过是主机与teamserver的通信协议不同而已.</p>
<h3 id="smb-beacon" class="heading-element"><span>SMB Beacon</span>
  <a href="#smb-beacon" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>简介:</p>
<p>SMB Beacon通过管道(pipe)进行进程间的数据传递.管道通信的进程可以是本地主机上的两个进程,也可以和远程主机上的进程通过网络进行通信.Windows将命名管道通信封装在SMB协议中.因此得名SMB Beacon.</p>
<p>使用:</p>
<p>这种Beacon要求具有SMB Beacon的主机必须接受端口445上的连接.
派生一个SMB Beacon方法:在Listner生成SMB Beacon.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/SMBBeacon1.png" alt="SMBBeacon1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/SMBBeacon1.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/SMBBeacon1.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/SMBBeacon1.png?size=large 2x" data-title="SMBBeacon1" style="--width: 1420px;--aspect-ratio: 1420 / 686;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>在目标主机右键,Access-&gt;Spawn AS,弹窗后Lintener选择上面创建的SMB Beacon,或者直接在Beacon中使用命令spawn smb(smb为上面创建的Smb lintener的名字).</p>
<p>运行成功后外部可以看到∞∞这个字符，这就是派生的SMB Beacon.
当前是连接状态,你可以在Beacon上用link <ip>命令连接他或者unlink <ip>命令断开它。</p>
<h3 id="ssh-beacon" class="heading-element"><span>SSH Beacon</span>
  <a href="#ssh-beacon" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>当内网有Linux时,CobaltStrike也是考虑到的,提供了sh连接,大家可以通过metasploit爆破内网的sh账号密码,然后用目标机的Beaco去连接就可以了.
目前有两种SSH Beacon连接方法:</p>
<ul>
<li>
<p>Beacon命令：ssh [target:port] [user] [password]</p>
</li>
<li>
<p>SSH密匙连接: ssh [target:port] [user] [/path/to/key.pem]</p>
</li>
</ul>
<h2 id="凭据导出与存储" class="heading-element"><span>凭据导出与存储</span>
  <a href="#%e5%87%ad%e6%8d%ae%e5%af%bc%e5%87%ba%e4%b8%8e%e5%ad%98%e5%82%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>凭据说的通俗易懂一点,可以理解为目标机的账号,密码.</p>
<h3 id="hashdump导出" class="heading-element"><span>hashdump导出</span>
  <a href="#hashdump%e5%af%bc%e5%87%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p><strong>右键目标机-&gt;Access-&gt;Dump Hashes</strong></p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/hashdump.png" alt="hashdump" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/hashdump.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/hashdump.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/hashdump.png?size=large 2x" data-title="hashdump" style="--width: 1420px;--aspect-ratio: 1420 / 663;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>以本次导出的凭据为例:</p>
<p>DefaultAccount:503:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::
Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::
WDAGUtilityAccount:504:aad3b435b51404eeaad3b435b51404ee:d2e84884968fe5d39b0066bb66e60c20:::</p>
<p><strong>31d6cfe0d16ae931b73c59d7e0c089c0</strong>,为Guest用户的NTLM hash.</p>
<p>我们可以去cmd5等平台破解该NTLM密文.</p>
<h3 id="mimikatz导出" class="heading-element"><span>Mimikatz导出</span>
  <a href="#mimikatz%e5%af%bc%e5%87%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p><strong>右键目标机-&gt;Access-&gt;Run Mimikatz</strong></p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Mimikatz%E5%AF%BC%E5%87%BA%E5%87%AD%E6%8D%AE.png" alt="Mimikatz导出凭据" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Mimikatz%E5%AF%BC%E5%87%BA%E5%87%AD%E6%8D%AE.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Mimikatz%E5%AF%BC%E5%87%BA%E5%87%AD%E6%8D%AE.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/Mimikatz%E5%AF%BC%E5%87%BA%E5%87%AD%E6%8D%AE.png?size=large 2x" data-title="Mimikatz导出凭据" style="--width: 1420px;--aspect-ratio: 1420 / 664;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>当会话为管理员权限时,才能dump成功,如果权限很低,请先提权.</p>
<p>如上图所示,成功导出了某用户的明文密码.</p>
<h3 id="凭据存储" class="heading-element"><span>凭据存储</span>
  <a href="#%e5%87%ad%e6%8d%ae%e5%ad%98%e5%82%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>点击下图中的图标,即可查看曾经导出的凭据.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%87%AD%E6%8D%AE%E5%AD%98%E5%82%A8.png" alt="凭据存储" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%87%AD%E6%8D%AE%E5%AD%98%E5%82%A8.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%87%AD%E6%8D%AE%E5%AD%98%E5%82%A8.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%87%AD%E6%8D%AE%E5%AD%98%E5%82%A8.png?size=large 2x" data-title="凭据存储" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="文件管理" class="heading-element"><span>文件管理</span>
  <a href="#%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>右键目标机-&gt;Explore-&gt;File Browser</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86.png" alt="文件管理" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86.png?size=large 2x" data-title="文件管理" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>下载文件:</p>
<ol>
<li>右键目标文件-&gt;Download</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B61.png" alt="下载文件1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B61.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B61.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B61.png?size=large 2x" data-title="下载文件1" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<ol start="2">
<li>上述操作之后,还需点击下方的图标,选中要下载的文件,点击Sync Files才可将文件下载到本机.</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B62.png" alt="下载文件2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B62.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B62.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B62.png?size=large 2x" data-title="下载文件2" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="进程管理" class="heading-element"><span>进程管理</span>
  <a href="#%e8%bf%9b%e7%a8%8b%e7%ae%a1%e7%90%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>右键目标机-&gt;Explore-&gt;Process List</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.png" alt="进程管理" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.png?size=large 2x" data-title="进程管理" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>点击下方的图标,可以看到键盘记录的结果.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E9%94%AE%E7%9B%98%E8%AE%B0%E5%BD%95.png" alt="键盘记录" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E9%94%AE%E7%9B%98%E8%AE%B0%E5%BD%95.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E9%94%AE%E7%9B%98%E8%AE%B0%E5%BD%95.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E9%94%AE%E7%9B%98%E8%AE%B0%E5%BD%95.png?size=large 2x" data-title="键盘记录" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="端口扫描" class="heading-element"><span>端口扫描</span>
  <a href="#%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>右键目标机-&gt;Explore-&gt;Port Scan</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png" alt="端口扫描1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F1.png?size=large 2x" data-title="端口扫描1" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>点击下方图标,可查看端口扫描的结果.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F2.png" alt="端口扫描2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F2.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F2.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F2.png?size=large 2x" data-title="端口扫描2" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="net-view" class="heading-element"><span>Net View</span>
  <a href="#net-view" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>该功能会显示当前域的计算机列表.</p>
<p>右键目标机-&gt;Explore-&gt;Net View</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/NetView.png" alt="NetView" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/NetView.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/NetView.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/NetView.png?size=large 2x" data-title="NetView" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="屏幕截图" class="heading-element"><span>屏幕截图</span>
  <a href="#%e5%b1%8f%e5%b9%95%e6%88%aa%e5%9b%be" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ol>
<li>右键目标机-&gt;Explore-&gt;Screenshot</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE1.png" alt="屏幕截图1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE1.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE1.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE1.png?size=large 2x" data-title="屏幕截图1" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<ol start="2">
<li>点击下方图标,查看屏幕截图.</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE2.png" alt="屏幕截图2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE2.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE2.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE2.png?size=large 2x" data-title="屏幕截图2" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="浏览器代理" class="heading-element"><span>浏览器代理</span>
  <a href="#%e6%b5%8f%e8%a7%88%e5%99%a8%e4%bb%a3%e7%90%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ol>
<li>右键目标机-&gt;Explore-&gt;Browser Pivot</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%861.png" alt="浏览器代理1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%861.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%861.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%861.png?size=large 2x" data-title="浏览器代理1" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<ol start="2">
<li>配置好相关端口信息后,点击Launch</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%862.png" alt="浏览器代理2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%862.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%862.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%862.png?size=large 2x" data-title="浏览器代理2" style="--width: 664px;--aspect-ratio: 664 / 230;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%863.png" alt="浏览器代理3" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%863.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%863.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%863.png?size=large 2x" data-title="浏览器代理3" style="--width: 1424px;--aspect-ratio: 1424 / 342;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<ol start="3">
<li>在浏览器中或者Windows中设置中配置代理</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%864.png" alt="浏览器代理4" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%864.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%864.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%864.png?size=large 2x" data-title="浏览器代理4" style="--width: 1424px;--aspect-ratio: 1424 / 688;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<ol start="4">
<li>此时我们就可以用浏览器打开该目标机的内网服务.</li>
</ol>
<p>可以使用<strong>browserpivot stop</strong>这个命令,关闭浏览器代理.</p>
<h2 id="web-delivery" class="heading-element"><span>Web Delivery</span>
  <a href="#web-delivery" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>此功能可以利用bitsadmin、exe、powershell、python实现快速上线目标主机,使用起来很方便.</p>
<ol>
<li>点击下方的图标,配置好端口(不要和其他的重复)、Lintener、Type就点击Launch</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery1.png" alt="WebDelivery1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery1.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery1.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery1.png?size=large 2x" data-title="WebDelivery1" style="--width: 1418px;--aspect-ratio: 1418 / 658;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<ol start="2">
<li>将下方生成的命令在目标机器上执行,就可以实现一条命令快速上线了.</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery2.png" alt="WebDelivery2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery2.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery2.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/WebDelivery2.png?size=large 2x" data-title="WebDelivery2" style="--width: 255px;--aspect-ratio: 255 / 150;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="socks" class="heading-element"><span>Socks</span>
  <a href="#socks" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>目前利用网络防火墙将组织内部的网络结构与外部网络如INTERNET中有效地隔离开来,这种方法正变得逐渐流行起来.这些防火墙系统通常以应用层网关的形式工作在网络之间,提供受控的TELNET、FTP、SMTP等的接入.</p>
<p>Socks提供一个通用框架来使这些协议安全透明地穿过防火墙.说的简单明了一点,在渗透测试中,我们使用Socks技术,可以穿透进入目标机的内网,从而扩大我们的战果</p>
<p>右键目标机-&gt;Pivoting-&gt;Socks Server</p>
<h2 id="安装扩展" class="heading-element"><span>安装扩展</span>
  <a href="#%e5%ae%89%e8%a3%85%e6%89%a9%e5%b1%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>扩展是CobaltStrike一个极为重要的模块,它有效的丰富了CobaltStrike的功能.</p>
<p>选择菜单栏的CobaltStrike-&gt;Script Manager, 点击load,然后选择cna扩展文件即可.</p>
<h2 id="权限提升" class="heading-element"><span>权限提升</span>
  <a href="#%e6%9d%83%e9%99%90%e6%8f%90%e5%8d%87" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ol>
<li>右键目标机-&gt;Access-&gt;Elevate</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%871.png" alt="权限提升1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%871.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%871.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%871.png?size=large 2x" data-title="权限提升1" style="--width: 1420px;--aspect-ratio: 1420 / 659;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<ol start="2">
<li>配置好Listener,点击Launch即可</li>
</ol>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%872.png" alt="权限提升2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%872.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%872.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%872.png?size=large 2x" data-title="权限提升2" style="--width: 361px;--aspect-ratio: 361 / 186;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%873.png" alt="权限提升3" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%873.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%873.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%873.png?size=large 2x" data-title="权限提升3" style="--width: 1438px;--aspect-ratio: 1438 / 672;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>从上图我们可以看到,确实提权了,权限为system.</p>
<p>也可以在Beacon中输入命令<strong>getsystem</strong>,获取system权限</p>
<p><strong>需要注意的是</strong>,当权限太低的时候,提权会不成功.</p>
<h2 id="横向移动" class="heading-element"><span>横向移动</span>
  <a href="#%e6%a8%aa%e5%90%91%e7%a7%bb%e5%8a%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>
<p>Target视图下的横向移动</p>
<p>在执行完端口扫描后,目标视图中,选择一个目标,右键-&gt;Jump-&gt;psexec,即可选择凭证进行横向移动,如果该机使用了和之前的目标机一样的凭证,则会成功返回一个system beacon.</p>
</li>
<li>
<p>窃取令牌</p>
</li>
</ul>
<p>在进程列表中,寻找以管理员身份运行的进程,并选定进行steal token,如果成功,则会返回域管权限的beacon,但是一般情况下绝不会那么简单的&hellip;</p>
<ul>
<li>其他手段横向移动</li>
<li>
<ul>
<li>可以各种系统漏洞:比如说用ms17-010,ms08-067批量检测一下内网.</li>
<li>弱口令检测.</li>
<li>中间件漏洞.</li>
<li>Web端漏洞.</li>
</ul>
</li>
</ul>
<h2 id="控制持久化" class="heading-element"><span>控制持久化</span>
  <a href="#%e6%8e%a7%e5%88%b6%e6%8c%81%e4%b9%85%e5%8c%96" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>在Windows中,拿到目标主机权限后,维持权限是必不可少的工作.目前常见的手法有:</p>
<ul>
<li>注册表</li>
<li>启动项</li>
<li>计时任务</li>
<li>设置服务</li>
<li>shift后门</li>
<li>Dll劫持</li>
<li>利用安装的某些程序</li>
</ul>
<p>Windows Service维持权限:</p>
<p>在CobaltStrike中生成一个Windows Service服务后门,导出时命名为beacon.exe</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BB%B4%E6%8C%81%E6%9D%83%E9%99%901.png" alt="维持权限1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BB%B4%E6%8C%81%E6%9D%83%E9%99%901.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BB%B4%E6%8C%81%E6%9D%83%E9%99%901.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BB%B4%E6%8C%81%E6%9D%83%E9%99%901.png?size=large 2x" data-title="维持权限1" style="--width: 670px;--aspect-ratio: 670 / 171;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>在目标机中执行如下命令:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">C</span><span class="p">:</span>\<span class="n">Windows</span>\<span class="n">Temp</span>
</span></span><span class="line"><span class="cl"><span class="n">upload</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">XiaLuoHun</span>\<span class="n">Desktop</span>\<span class="n">beacon</span><span class="o">.</span><span class="n">exe</span>
</span></span><span class="line"><span class="cl"><span class="n">shell</span> <span class="n">sc</span> <span class="n">create</span> <span class="s2">&#34;thisisserver&#34;</span> <span class="n">binpath</span><span class="o">=</span> <span class="s2">&#34;C:\Users\XiaLuoHun\Desktop</span><span class="se">\b</span><span class="s2">eacon.exe&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">shell</span> <span class="n">sc</span> <span class="n">description</span> <span class="s2">&#34;thisisserver&#34;</span> <span class="s2">&#34;description&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">shell</span> <span class="n">sc</span> <span class="n">config</span> <span class="s2">&#34;thisisserver&#34;</span> <span class="n">start</span><span class="o">=</span> <span class="n">auto</span>
</span></span><span class="line"><span class="cl"><span class="n">shell</span> <span class="n">net</span> <span class="n">start</span> <span class="s2">&#34;thisisserver&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>这样的话目标机每次开机,都会运行你的beacon.exe后门.</p>
<div class="details admonition note open">
    <div class="details-summary admonition-title">
      <i class="icon fa-solid fa-pencil-alt fa-fw" aria-hidden="true"></i>注意<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden="true"></i>
    </div>
    <div class="details-content">
      <div class="admonition-content">以上操作如果没有权限的话,就会失败.</div>
    </div>
  </div>
<h2 id="网站克隆" class="heading-element"><span>网站克隆</span>
  <a href="#%e7%bd%91%e7%ab%99%e5%85%8b%e9%9a%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%861.png" alt="网站克隆1" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%861.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%861.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%861.png?size=large 2x" data-title="网站克隆1" style="--width: 671px;--aspect-ratio: 671 / 235;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>根据个人需求,填写克隆网站,主机地址和端口,注意端口不要冲突,记得把键盘记录打开.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%862.png" alt="网站克隆2" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%862.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%862.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%862.png?size=large 2x" data-title="网站克隆2" style="--width: 364px;--aspect-ratio: 364 / 340;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>点击Clone,就会生成一条链接.需要注意的是,这一步有可能不成功,就需要你换个网址了.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%863.png" alt="网站克隆3" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%863.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%863.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%863.png?size=large 2x" data-title="网站克隆3" style="--width: 244px;--aspect-ratio: 244 / 151;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>接下来,就可以把这条链接发给别人了,当别人在这个网站上进行键盘操作时,就可以在Web Log窗口查看了.</p>
<p><img loading="lazy" src="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%864.png" alt="网站克隆4" srcset="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%864.png?size=small, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%864.png?size=medium 1.5x, /posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/images/%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%864.png?size=large 2x" data-title="网站克隆4" style="--width: 1089px;--aspect-ratio: 1089 / 668;background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="用户手册" class="heading-element"><span>用户手册</span>
  <a href="#%e7%94%a8%e6%88%b7%e6%89%8b%e5%86%8c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><a href="/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/CobaltStrike4.0%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C.pdf" class="card-link"><span class="cl-backdrop" style="--cl-bg-url: url(/images/fixit.min.svg);"></span>
    <span class="cl-content">
      <span class="cl-text">
        <span class="cl-title">CobaltStrike4.0用户手册</span>
        <span class="cl-meta">
          <svg class="cl-icon-link" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M574 665.4c-3.1-3.1-8.2-3.1-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zM832.6 191.4c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6c-3.1 3.1-3.1 8.2 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1z" fill="#a9a9b3"></path><path d="M610.1 372.3c-3.1-3.1-8.2-3.1-11.3 0L372.3 598.7c-3.1 3.1-3.1 8.2 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z" fill="#a9a9b3"></path></svg>
          <span class="cl-url">/posts/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/cobaltstrike/CobaltStrike4.0%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C.pdf</span>
        </span>
      </span><svg class="cl-shortcut-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="64" height="64"><path d="M960 512c0 249.408-203.2 448-448 448-244.778667 0-448-198.592-448-448S262.592 64 512 64s448 198.592 448 448" fill="#2196F3"></path><path d="M507.52 718.08c0-8.96-4.48-13.44-13.44-17.92-26.88-8.96-53.76-8.96-76.16-31.381333-4.48-8.96-4.48-17.92-8.96-26.88-8.96-8.96-31.36-13.44-44.8-17.92h-89.6c-13.44-4.48-22.4-22.4-31.36-35.84 0-4.48 0-13.461333-8.96-13.461334-8.96-4.458667-17.92 4.501333-26.88 0-4.48-4.458667-4.48-8.96-4.48-13.418666 0-13.461333 8.96-26.901333 17.92-35.861334 13.44-8.96 26.88 4.48 40.32 4.48 4.48 0 4.48 0 8.96 4.48 13.44 4.48 17.92 22.4 17.92 35.861334v8.96c0 4.48 4.48 4.48 8.96 4.48 4.48-22.4 4.48-44.821333 8.96-67.2 0-26.88 26.88-53.781333 49.28-62.72 8.96-4.458667 13.44 4.501333 22.4 0 26.88-8.96 94.08-35.84 80.64-71.658667-8.96-31.381333-35.84-62.698667-71.68-58.24-8.96 4.501333-13.44 8.96-22.4 13.461333-13.44 8.96-40.32 35.84-53.76 35.84-22.4-4.48-22.4-35.84-17.92-49.301333 4.48-17.92 44.8-76.138667 71.68-67.178667l17.92 17.92c8.96 4.48 22.4 4.48 35.84 4.48 4.48 0 8.96 0 13.44-4.48 4.48-4.48 4.48-4.48 4.48-8.96 0-13.44-13.44-26.901333-22.4-35.861333s-22.4-17.92-35.84-22.378667c-44.8-13.461333-116.48 4.458667-152.32 35.84-35.84 31.36-62.72 85.12-80.64 129.92-8.96 26.88-17.92 62.698667-22.4 94.08-4.48 22.4-8.96 40.32 4.48 62.698667 13.44 26.88 40.32 53.781333 67.2 71.68 17.92 13.44 53.76 13.44 71.68 35.84 13.44 17.941333 8.96 40.32 8.96 62.72 0 26.88 17.92 49.28 26.88 71.658667 4.48 13.461333 8.96 31.381333 13.44 44.821333 0 4.48 4.48 31.36 4.48 35.84 26.88 13.44 49.28 26.901333 80.64 35.861333 4.48 0 22.4-26.901333 22.4-31.381333 13.44-13.44 22.4-31.36 35.84-40.32 8.96-4.48 17.92-8.96 26.88-17.941333 8.96-8.96 13.44-26.88 17.92-40.32 4.48-8.938667 8.96-26.858667 4.48-40.298667M516.48 305.92c4.48 0 8.96-4.48 17.92-8.96 13.44-8.96 26.901333-22.4 40.32-31.36 13.461333-8.96 26.901333-22.4 35.861333-31.36 13.44-8.96 22.4-26.88 26.88-40.341333 4.48-8.96 17.941333-26.88 13.44-40.32-4.48-8.96-26.88-13.44-35.84-17.92C579.2 126.698667 547.84 122.24 512 122.24c-13.44 0-31.36 4.458667-35.84 17.92-4.48 22.4 13.44 17.92 31.36 22.4 0 0 4.48 35.84 4.48 40.32 4.48 22.421333-8.96 35.84-8.96 58.24 0 13.44 0 35.84 8.96 44.8h4.48zM892.8 619.52c4.501333-8.96 4.501333-22.4 8.96-31.36 4.501333-22.421333 4.501333-44.8 4.501333-67.2 0-44.8-4.501333-89.578667-17.92-129.92-8.96-13.44-13.461333-26.88-17.941333-40.341333-8.96-22.378667-22.4-44.8-40.32-62.698667-17.92-22.4-40.341333-85.12-80.64-67.2-13.44 4.501333-22.4 22.421333-31.36 31.381333l-26.88 40.32c-4.501333 4.48-8.96 13.44-4.501333 17.92 0 4.48 4.501333 4.48 8.96 4.48 8.96 4.501333 13.461333 4.501333 22.421333 8.96 4.48 0 8.96 4.501333 4.48 8.96 0 0 0 4.501333-4.48 4.501334-22.421333 22.4-44.8 40.32-67.2 62.698666-4.48 4.48-8.96 13.44-8.96 17.92s4.48 4.48 4.48 8.96c0 4.501333-4.48 4.501333-8.96 8.96-8.96 4.501333-17.92 8.96-22.4 13.461334-4.48 8.96 0 22.4-4.48 31.36-4.48 22.4-17.941333 40.32-26.901333 62.72-8.96 13.418667-13.418667 26.88-22.378667 40.32 0 17.92-4.501333 31.36 4.458667 44.8 22.421333 31.36 62.72 13.44 94.08 26.901333 8.96 4.458667 17.92 4.458667 22.421333 13.418667 13.418667 13.461333 13.418667 35.861333 17.92 49.301333 4.458667 17.92 8.96 35.84 17.92 53.76 4.48 22.421333 13.44 44.821333 17.92 62.72 40.341333-31.36 76.16-67.178667 103.04-112 26.88-31.424 40.341333-67.242667 53.76-103.104" fill="#CDDC39"></path></svg></span></a>
</div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2021-09-10 00:00:00">更新于 2021-09-10&nbsp;</span>
      </div></div><div class="post-info-line">
        <div class="post-info-md"></div>
        <div class="post-info-share">
          <span></span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/cobaltstrike/" class="post-tag" title="标签 - CobaltStrike">CobaltStrike</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/android/android%E5%9F%BA%E7%A1%80/smali/" class="post-nav-item" rel="prev" title="Smali"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Smali</a>
      <a href="/posts/android/android%E5%9F%BA%E7%A1%80/arm%E9%80%86%E5%90%91/" class="post-nav-item" rel="next" title="Arm逆向">Arm逆向<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content always-active" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2020 - 2024</span><span class="author" itemprop="copyrightHolder">
              <a href="/">夏洛魂</a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">该网站在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":150},"comment":{"enable":false},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"version":"v0.3.8-RC"};</script><script src="/js/theme.min.js" defer></script><script src="/js/custom.min.js" defer></script></body>
</html>
